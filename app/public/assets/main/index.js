System.register("chunks:///_virtual/Account.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./GameEvent.ts","./AccountModelComp.ts","./AccountNetData.ts","./GameUIConfig.ts","./ViewModel.ts","./formatCurrency.ts"],(function(e){var t,n,r,s,a,o,u,c,i,p,f,h;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){a=e.oops},function(e){o=e.ecs},function(e){u=e.GameEvent},function(e){c=e.AccountModelComp},function(e){i=e.AccountNetDataComp},function(e){p=e.UIID},function(e){f=e.VM},function(e){h=e.format}],execute:function(){var g;s._RF.push({},"08792UGJyBAPZrFJgQxK1NP","Account",void 0);e("Account",o.register("Account")(g=function(e){function s(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).AccountModel=void 0,t.AccountNetData=void 0,t}t(s,e);var o=s.prototype;return o.init=function(){this.addComponents(c),this.add(i)},o.login=function(){var e=n(r().mark((function e(t,n){var s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.gui.waitOpen(),e.next=4,fetch(a.http.server+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return s=e.sent,e.next=7,s.json();case 7:if(!(o=e.sent).status){e.next=10;break}throw new Error(o.message);case 10:return f.setValue("Account.data",o.user),f.setValue("Account.balance",h(o.user.chipsAmount,!0)),a.storage.set("userId",o.user.id),a.gui.remove(p.Login,!0),e.next=16,a.gui.openAsync(p.Layout);case 16:return e.next=18,a.gui.openAsync(p.Home);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),a.gui.toast(""+e.t0);case 23:return e.prev=23,a.gui.waitClose(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}(),o.register=function(){var e=n(r().mark((function e(t,n,s,o){var u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.gui.waitOpen(),e.next=4,fetch(a.http.server+"/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n,name:s,email:o,external:!1})});case 4:return u=e.sent,e.next=7,u.json();case 7:if(!(c=e.sent).status){e.next=10;break}throw new Error(c.message);case 10:return a.gui.remove(p.Register,!0),f.setValue("Account.data",c.user),f.setValue("Account.balance",h(c.user.chipsAmount,!0)),a.storage.set("userId",c.user.id),e.next=16,a.gui.openAsync(p.Layout);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),a.gui.toast(""+e.t0);case 21:return e.prev=21,a.gui.waitClose(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(t,n,r,s){return e.apply(this,arguments)}}(),o.logout=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.gui.waitOpen(),e.next=4,fetch(a.http.server+"/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:f.getValue("Account.data.id")})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(!(n=e.sent).status){e.next=10;break}throw new Error(n.message);case 10:return a.storage.remove("userId"),a.message.dispatchEvent(u.CLOSE_DROPDOWN),a.gui.clear(),a.gui.open(p.Background),e.next=16,a.gui.openAsync(p.Login);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),a.gui.toast(""+e.t0);case 21:return e.prev=21,a.gui.waitClose(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),o.getUserInfo=function(){var e=n(r().mark((function e(t){var n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a.http.server+"/users/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(s=e.sent).status){e.next=9;break}throw new Error(s.message);case 9:return e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),s}(o.Entity))||g);s._RF.pop()}}}));

System.register("chunks:///_virtual/AccountDropdownViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts","./SingletonModuleComp.ts"],(function(o){var t,n,e,r,c,u,i,s;return{setters:[function(o){t=o.inheritsLoose,n=o.asyncToGenerator,e=o.regeneratorRuntime},function(o){r=o.cclegacy,c=o._decorator},function(o){u=o.ecs},function(o){i=o.CCComp},function(o){s=o.smc}],execute:function(){var p;r._RF.push({},"d0829TVKwlNYb267UycY6+5","AccountDropdownViewComp",void 0);var a=c.ccclass;c.property,o("AccountDropdownViewComp",a("AccountDropdownViewComp")(p=u.register("AccountDropdownView",!1)(p=function(o){function r(){return o.apply(this,arguments)||this}t(r,o);var c=r.prototype;return c.start=function(){},c.logout=function(){var o=n(e().mark((function o(){return e().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.account.logout();case 2:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),c.reset=function(){this.node.destroy()},r}(i))||p)||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/AccountModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(t){var n,e,o,c,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy},function(t){c=t.ecs},function(t){i=t.VM}],execute:function(){var u;o._RF.push({},"c8c1c+TD9JGz5j3n9VuNlwM","AccountModelComp",void 0);t("AccountModelComp",c.register("AccountModel")(u=function(t){function o(){for(var n,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return(n=t.call.apply(t,[this].concat(o))||this).vm=new a,n}n(o,t);var c=o.prototype;return c.vmAdd=function(){i.add(this.vm,"Account")},c.vmRemove=function(){this.vm.reset(),i.remove("Account")},c.reset=function(){this.vmRemove()},e(o,[{key:"data",get:function(){return this.vm.data},set:function(t){this.vm.data=t}},{key:"balance",get:function(){return this.vm.balance},set:function(t){this.vm.balance=t}}]),o}(c.Comp))||u);var a=function(){function t(){this.data=null,this.balance="0"}return t.prototype.reset=function(){this.data=null,this.balance="0"},e(t,[{key:"name",get:function(){var t;return(null==(t=this.data)?void 0:t.name)||""}},{key:"id",get:function(){var t;return(null==(t=this.data)?void 0:t.id)||""}}]),t}();o._RF.pop()}}}));

System.register("chunks:///_virtual/AccountNetData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./AccountModelComp.ts","./Oops.ts","./GameEvent.ts"],(function(t){var e,n,c,o,r,u,a,s;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){r=t.ecs},function(t){u=t.AccountModelComp},function(t){a=t.oops},function(t){s=t.GameEvent}],execute:function(){var i,l;o._RF.push({},"c9cfe+ySzVMerOh2X+9JkJx","AccountNetData",void 0);var p=t("AccountNetDataComp",r.register("AccountNetData")(i=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.reset=function(){},n}(r.Comp))||i);t("AccountNetDataSystem",r.register("Account")(l=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var i=o.prototype;return i.filter=function(){return r.allOf(p,u)},i.entityEnter=function(){var t=n(c().mark((function t(e){var n,o=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={target:this,callback:function(t){o.createAccount(e,t),a.message.dispatchEvent(s.LOGIN_SUCCESS)}},null,n.callback(null),e.remove(p);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.createAccount=function(t,e){var n=t.AccountModel;n.vmAdd(),e&&(n.vm.data=e,a.storage.set("userId",e.id))},o}(r.ComblockSystem))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/AccountViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts","./Oops.ts","./PositionUtils.ts","./GameEvent.ts"],(function(o){var t,n,i,e,r,s,c,a,d,p,u,h,l,f;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){r=o.cclegacy,s=o._decorator,c=o.Prefab,a=o.instantiate,d=o.Node},function(o){p=o.ecs},function(o){u=o.CCComp},function(o){h=o.oops},function(o){l=o.getNodePosition},function(o){f=o.GameEvent}],execute:function(){var w,v,E,_,C,m;r._RF.push({},"0b824vvY5FGibfRDOEK2n+W","AccountViewComp",void 0);var y=s.ccclass,T=s.property;o("AccountViewComp",(w=y("AccountViewComp"),v=p.register("AccountView",!1),E=T(c),w(_=v((m=t((C=function(o){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=o.call.apply(o,[this].concat(r))||this,i(t,"dropdownPrefab",m,e(t)),t.dropdown=void 0,t.inGame=!1,t}n(t,o);var r=t.prototype;return r.start=function(){this.dropdown=a(this.dropdownPrefab),h.gui.root.on(d.EventType.TOUCH_START,this.close_dropdown,this),this.on(f.CLOSE_DROPDOWN,this.close_dropdown,this),this.on(f.ENTER_GAME,this.onHandler,this),this.on(f.EXIT_GAME,this.onHandler,this)},r.onHandler=function(o){switch(o){case f.ENTER_GAME:this.inGame=!0;break;case f.EXIT_GAME:this.inGame=!1}},r.btn_dropdown=function(o){var t=l(h.gui.root,this.node);this.dropdown.setPosition(t.x-10,t.y-(100+this.node.h)),this.dropdown.active=!this.inGame,h.gui.root.addChild(this.dropdown)},r.close_dropdown=function(){var o;null!=(o=this.dropdown)&&o.active&&(this.dropdown.active=!1)},r.reset=function(){h.gui.root.off(d.EventType.TOUCH_START,this.close_dropdown,this),this.node.destroy()},t}(u)).prototype,"dropdownPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=C))||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Ambilight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,a,n,o,s,c,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.CCInteger,p=t.Sprite,l=t.Component}],execute:function(){var u,h,m,_,f;o._RF.push({},"73c69GH9M9F2Ilsm0fvjTCX","Ambilight",void 0);var y=s.ccclass,g=s.property;t("Ambilight",(u=y("Ambilight"),h=g(c),u((f=e((_=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_max",f,a(e)),e._start=0,e._material=void 0,e}i(e,t);var o=e.prototype;return o.update=function(t){this._material=this.node.getComponent(p).getMaterial(0),this.node.active&&this._material&&this._setShaderTime(t)},o._setShaderTime=function(t){var e=this._start;e>this.max&&(e=0),e+=.015,this._material.setProperty("speed",e),this._start=e},n(e,[{key:"max",get:function(){return this._max},set:function(t){this._max=t}}]),e}(l)).prototype,"_max",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(_.prototype,"max",[h],Object.getOwnPropertyDescriptor(_.prototype,"max"),_.prototype),m=_))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var i,n,a,s,e;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,s=t.Animation},function(t){e=t.default}],execute:function(){var o;n._RF.push({},"64571Qy/TlCEZI/28RxIG+E","AnimatorAnimation",void 0);var h=a.ccclass,r=(a.property,a.requireComponent),m=a.disallowMultiple,p=a.menu,l=a.help;t("default",h(o=m(o=r(s)(o=p("OopsFramework/Animator/AnimatorAnimation （动画状态机）")(o=l("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565")(o=function(t){function n(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=t.call.apply(t,[this].concat(a))||this)._animation=null,i._animState=null,i._wrapModeMap=new Map,i}i(n,t);var a=n.prototype;return a.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._animation=this.getComponent(s),this._animation.on(s.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(s.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},a.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._animation=this.getComponent(s),this._animation.on(s.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(s.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},a.playAnimation=function(t,i){t&&(this._animation.play(t),this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:this._wrapModeMap.get(this._animState)))},a.scaleTime=function(t){this._animState&&(this._animState.speed=t)},n}(e))||o)||o)||o)||o)||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorController.ts"],(function(t){var a,n,e,i,o,r,s,c,u,l;return{setters:[function(t){a=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.JsonAsset,u=t.Component},function(t){l=t.default}],execute:function(){var p,h,m,f,g,_,y,d,A,b;r._RF.push({},"7ff14NOug1NAIB1XgQlC9Gc","AnimatorBase",void 0);var v=s.ccclass,S=s.property,C=s.executionOrder,M=s.menu;t("default",(p=C(-1e3),h=M("animator/AnimatorBase"),m=S({type:c,tooltip:"状态机json文件"}),f=S({tooltip:"是否在start中自动启动状态机"}),g=S({tooltip:"是否在update中自动触发状态机逻辑更新"}),v(_=p(_=h((d=a((y=function(t){function a(){for(var a,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=t.call.apply(t,[this].concat(o))||this,e(a,"AssetRawUrl",d,i(a)),e(a,"PlayOnStart",A,i(a)),e(a,"AutoUpdate",b,i(a)),a._hasInit=!1,a._ac=null,a._stateLogicMap=null,a._onStateChangeCall=null,a._animationPlayer=null,a}n(a,t);var r=a.prototype;return r.onFrameEvent=function(t){var a;null==(a=this._animationPlayer)||a.onFrameEventCallback(t,this)},r.getState=function(t){return this._ac.states.get(t)},r.onInit=function(){},r.initArgs=function(){for(var t=this,a=arguments.length,n=new Array(a),e=0;e<a;e++)n[e]=arguments[e];n.forEach((function(a){a&&("function"==typeof a?t._onStateChangeCall=a:"object"==typeof a&&(a instanceof Map?t._stateLogicMap=a:t._animationPlayer=a))}))},r.updateAnimator=function(){var t,a=this._ac.curState.speed;this._ac.curState.multi&&(a*=null!=(t=this._ac.params.getNumber(this._ac.curState.multi))?t:1);if(this.scaleTime(a),this._stateLogicMap){var n=this._stateLogicMap.get(this._ac.curState.name);n&&n.onUpdate()}this._ac.updateAnimator()},r.update=function(){this._hasInit&&this.AutoUpdate&&this.updateAnimator()},r.manualUpdate=function(){this._hasInit&&!this.AutoUpdate&&this.updateAnimator()},r.initJson=function(t){this._ac=new l(this,t)},r.onAnimFinished=function(){var t;this._ac.onAnimationComplete(),null==(t=this._animationPlayer)||t.onFinishedCallback(this)},r.playAnimation=function(t,a){},r.scaleTime=function(t){},r.onStateChange=function(t,a){this.playAnimation(a.motion,a.loop);var n=t?t.name:"";if(this._stateLogicMap){var e=this._stateLogicMap.get(n);e&&e.onExit();var i=this._stateLogicMap.get(a.name);i&&i.onEntry()}this._onStateChangeCall&&this._onStateChangeCall(n,a.name)},r.setBool=function(t,a){this._ac.params.setBool(t,a)},r.getBool=function(t){return 0!==this._ac.params.getBool(t)},r.setNumber=function(t,a){this._ac.params.setNumber(t,a)},r.getNumber=function(t){return this._ac.params.getNumber(t)},r.setTrigger=function(t){this._ac.params.setTrigger(t)},r.resetTrigger=function(t){this._ac.params.resetTrigger(t)},r.autoTrigger=function(t){this._ac.params.autoTrigger(t)},r.play=function(t){this._hasInit&&this._ac.play(t)},o(a,[{key:"curStateName",get:function(){return this._ac.curState.name}},{key:"curStateMotion",get:function(){return this._ac.curState.motion}}]),a}(u)).prototype,"AssetRawUrl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=a(y.prototype,"PlayOnStart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=a(y.prototype,"AutoUpdate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=y))||_)||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCondition.ts",["cc"],(function(t){var a,r;return{setters:[function(t){a=t.cclegacy,r=t.error}],execute:function(){a._RF.push({},"8ade2h2C/ZA86thhI0NNuqu","AnimatorCondition",void 0);var e=t("ParamType",function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMBER=2]="NUMBER",t[t.TRIGGER=3]="TRIGGER",t[t.AUTO_TRIGGER=4]="AUTO_TRIGGER",t}({})),i=t("LogicType",function(t){return t[t.EQUAL=0]="EQUAL",t[t.NOTEQUAL=1]="NOTEQUAL",t[t.GREATER=2]="GREATER",t[t.LESS=3]="LESS",t[t.GREATER_EQUAL=4]="GREATER_EQUAL",t[t.LESS_EQUAL=5]="LESS_EQUAL",t}({}));t("default",function(){function t(t,a){this._ac=void 0,this._param="",this._value=0,this._logic=i.EQUAL,this._ac=a,this._param=t.param,this._value=t.value,this._logic=t.logic}var a=t.prototype;return a.getParamName=function(){return this._param},a.getParamType=function(){return this._ac.params.getParamType(this._param)},a.check=function(){var t=this.getParamType();if(t===e.BOOLEAN)return this._ac.params.getBool(this._param)===this._value;if(t!==e.NUMBER)return t===e.AUTO_TRIGGER?0!==this._ac.params.getAutoTrigger(this._param):t===e.TRIGGER?0!==this._ac.params.getTrigger(this._param):(r("[AnimatorCondition.check] 错误的type: "+t),!1);var a=this._ac.params.getNumber(this._param);switch(this._logic){case i.EQUAL:return a===this._value;case i.NOTEQUAL:return a!==this._value;case i.GREATER:return a>this._value;case i.LESS:return a<this._value;case i.GREATER_EQUAL:return a>=this._value;case i.LESS_EQUAL:return a<=this._value;default:return!1}},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorParams.ts","./AnimatorState.ts"],(function(t){var e,a,n,s,i;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t.error},function(t){s=t.default},function(t){i=t.default}],execute:function(){a._RF.push({},"01df9SMBjRCyYDE7SgbZxua","AnimatorController",void 0);t("default",function(){function t(t,e){this._jsonData=null,this._animator=null,this._params=null,this._states=null,this._anyState=null,this._curState=null,this._changeCount=0,this.animCompleteState=null,this.animComplete=!1,this._animator=t,this._jsonData=e,this._states=new Map,this._params=new s(e.parameters),this.init(e)}var a=t.prototype;return a.init=function(t){if(t.states.length<=0)n("[AnimatorController.init] 状态机json错误");else{var e=t.defaultState;this._anyState=new i(t.anyState,this);for(var a=0;a<t.states.length;a++){var s=new i(t.states[a],this);this._states.set(s.name,s)}this.changeState(e)}},a.updateState=function(){this._curState.checkAndTrans(),this._curState!==this._anyState&&null!==this._anyState&&this._anyState.checkAndTrans()},a.updateAnimator=function(){this._changeCount=0,this.updateState(),this.animComplete&&this.animCompleteState.loop&&(this.animComplete=!1),this.params.resetAllAutoTrigger()},a.onAnimationComplete=function(){this.animComplete=!0,this.animCompleteState=this._curState},a.play=function(t){this._states.has(t)&&this._curState.name!==t&&(this.animComplete=!1,this.changeState(t))},a.changeState=function(t){if(this._changeCount++,this._changeCount>1e3)n("[AnimatorController.changeState] error: 状态切换递归调用超过1000次，transition设置可能出错!");else if(!this._states.has(t)||null!==this._curState&&this._curState.name===t)n("[AnimatorController.changeState] error state: "+t);else{var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},e(t,[{key:"curState",get:function(){return this._curState}},{key:"params",get:function(){return this._params}},{key:"states",get:function(){return this._states}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCustomization.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(i){var t,n,a,e,o,r,s;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,a=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator},function(i){s=i.default}],execute:function(){var l,c,u,p,h,m;o._RF.push({},"fe7aemTdvFBeJlAmC+6XphU","AnimatorCustomization",void 0);var f=r.ccclass,y=r.property,d=r.disallowMultiple,A=r.menu,_=r.help;i("default",(l=A("OopsFramework/Animator/AnimatorCustomization （自定义状态机）"),c=_("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565"),u=y({override:!0,visible:!1}),f(p=d(p=l(p=c((m=t((h=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,a(t,"PlayOnStart",m,e(t)),t}n(t,i);var o=t.prototype;return o.onInit=function(){this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},o.playAnimation=function(i,t){this._animationPlayer&&i&&this._animationPlayer.playAnimation(i,t)},o.scaleTime=function(i){this._animationPlayer&&this._animationPlayer.scaleTime(i)},t}(s)).prototype,"PlayOnStart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=h))||p)||p)||p)||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorDragonBones.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var n,s,i,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,o=t.dragonBones},function(t){e=t.default}],execute:function(){var a;s._RF.push({},"dc324J03ptB8b2JV9Ljduzh","AnimatorDragonBones",void 0);var r=i.ccclass,h=(i.property,i.requireComponent),l=i.disallowMultiple,c=i.menu,u=i.help;t("default",r(a=l(a=h(o.ArmatureDisplay)(a=c("OopsFramework/Animator/AnimatorDragonBones （龙骨状态机）")(a=u("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565")(a=function(t){function s(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._dragonBones=null,n}n(s,t);var i=s.prototype;return i.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._dragonBones=this.getComponent(o.ArmatureDisplay),this._dragonBones.addEventListener("complete",this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._dragonBones=this.getComponent(o.ArmatureDisplay),this._dragonBones.addEventListener("complete",this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.playAnimation=function(t,n){t&&this._dragonBones.playAnimation(t,n?0:-1)},i.scaleTime=function(t){t>0&&(this._dragonBones.timeScale=t)},s}(e))||a)||a)||a)||a)||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorParams.ts",["cc","./AnimatorCondition.ts"],(function(t){var a,e;return{setters:[function(t){a=t.cclegacy},function(t){e=t.ParamType}],execute:function(){a._RF.push({},"13926xryDRPXJ50lCnLvy4J","AnimatorParams",void 0);t("default",function(){function t(t){var a=this;this._paramMap=new Map,t.forEach((function(t){var e={type:t.type,value:t.init};a._paramMap.set(t.param,e)}))}var a=t.prototype;return a.getParamType=function(t){var a=this._paramMap.get(t);return a?a.type:null},a.setNumber=function(t,a){var r=this._paramMap.get(t);r&&r.type===e.NUMBER&&(r.value=a)},a.setBool=function(t,a){var r=this._paramMap.get(t);r&&r.type===e.BOOLEAN&&(r.value=a?1:0)},a.setTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.TRIGGER&&(a.value=1)},a.resetTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.TRIGGER&&(a.value=0)},a.autoTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.AUTO_TRIGGER&&(a.value=1)},a.resetAutoTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.AUTO_TRIGGER&&(a.value=0)},a.resetAllAutoTrigger=function(){this._paramMap.forEach((function(t,a){t.type===e.AUTO_TRIGGER&&(t.value=0)}))},a.getNumber=function(t){var a=this._paramMap.get(t);return a&&a.type===e.NUMBER?a.value:0},a.getBool=function(t){var a=this._paramMap.get(t);return a&&a.type===e.BOOLEAN?a.value:0},a.getTrigger=function(t){var a=this._paramMap.get(t);return a&&a.type===e.TRIGGER?a.value:0},a.getAutoTrigger=function(t){var a=this._paramMap.get(t);return a&&a.type===e.AUTO_TRIGGER?a.value:0},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSkeletal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorAnimation.ts"],(function(t){var i,e,a,n,o,r,s,l,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.SkeletalAnimation,l=t.CCFloat,c=t.game},function(t){u=t.default}],execute:function(){var p,m,h,d,_,f,S;o._RF.push({},"8c545jBn4xF7LWXjl506avi","AnimatorSkeletal",void 0);var y=r.ccclass,g=r.property,w=r.requireComponent,A=r.disallowMultiple,k=r.menu,v=r.help;t("AnimatorSkeletal",(p=w(s),m=k("OopsFramework/Animator/AnimatorSkeletal （骨骼动画状态机）"),h=v("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565"),d=g({type:l,tooltip:"动画切换过度时间"}),y(_=A(_=p(_=m(_=h((S=i((f=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,a(i,"duration",S,n(i)),i.cross_duration=0,i.current_time=0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.cross_duration=1e3*this.duration},o.playAnimation=function(t,i){t&&(c.totalTime-this.current_time>this.cross_duration?this._animation.crossFade(t,this.duration):this._animation.play(t),this.current_time=c.totalTime,this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:1))},i}(u)).prototype,"duration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_=f))||_)||_)||_)||_)||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var e,n,i,s,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.sp},function(t){o=t.default}],execute:function(){var a;n._RF.push({},"7fde8yJEfxMMqzjg+V4UVkT","AnimatorSpine",void 0);var r=i.ccclass,p=(i.property,i.requireComponent),l=i.disallowMultiple,h=i.menu,c=i.help;t("default",r(a=l(a=p(s.Skeleton)(a=h("OopsFramework/Animator/AnimatorSpine（Spine 状态机）")(a=c("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565")(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._spine=null,e._completeListenerMap=new Map,e._secondaryListenerMap=new Map,e}e(n,t);var i=n.prototype;return i.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(s.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._spine=this.getComponent(s.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.getBone=function(t){return this._spine.findBone(t)},i.onSpineEvent=function(t,e){var n,i=t.animation?e.data.name:"";null==(n=this._animationPlayer)||n.onFrameEventCallback(i,this)},i.onSpineComplete=function(t){0===t.trackIndex&&this.onAnimFinished(),this._completeListenerMap.forEach((function(e,n){e?n.call(e,t):n(t)})),this._secondaryListenerMap.forEach((function(e,n){t.trackIndex===e.TrackIndex&&n.call(e,t)}))},i.playAnimation=function(t,e){t?this._spine.setAnimation(0,t,e):this._spine.clearTrack(0)},i.scaleTime=function(t){t>0&&(this._spine.timeScale=t)},i.addSecondaryListener=function(t,e){this._secondaryListenerMap.set(t,e)},i.addCompleteListener=function(t,e){void 0===e&&(e=null),this._completeListenerMap.has(t)||this._completeListenerMap.set(t,e)},i.removeCompleteListener=function(t){this._completeListenerMap.delete(t)},i.clearCompleteListener=function(){this._completeListenerMap.clear},n}(o))||a)||a)||a)||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpineSecondary.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorSpine.ts","./AnimatorBase.ts"],(function(t){var i,n,e,s,o,r,a,h,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.sp},function(t){h=t.default},function(t){l=t.default}],execute:function(){var c,p,u,d,m,f,_;o._RF.push({},"e47112s9c9Kwo8XQQ4KSW0c","AnimatorSpineSecondary",void 0);var y=r.ccclass,A=r.property,S=r.requireComponent,g=r.menu,k=r.help;t("default",(c=S(a.Skeleton),p=g("OopsFramework/Animator/AnimatorSpine （Spine 次状态机）"),u=k("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12036279&doc_id=2873565"),d=A({tooltip:"动画播放的trackIndex，必须大于0"}),y(m=c(m=p(m=u((_=i((f=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(i,"TrackIndex",_,s(i)),i._main=null,i._spine=null,i}n(i,t);var o=i.prototype;return o.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(a.Skeleton),this._main=this.getComponent(h),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},o.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._spine=this.getComponent(a.Skeleton),this._main=this.getComponent(h),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},o.playAnimation=function(t,i){t?this._spine.setAnimation(this.TrackIndex,t,i):this._spine.clearTrack(this.TrackIndex)},i}(l)).prototype,"TrackIndex",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=f))||m)||m)||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorTransition.ts"],(function(t){var i,n,e;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"bd2d1/E71JL1Jj3HzsYH82H","AnimatorState",void 0);t("default",function(){function t(t,i){this._name="",this._motion="",this._loop=!1,this._speed=1,this._multi="",this._transitions=[],this._ac=null,this._name=t.state,this._motion=t.motion||"",this._loop=t.loop||!1,this._speed=t.speed||1,this._multi=t.multiplier||"",this._ac=i;for(var n=0;n<t.transitions.length;n++){var s=new e(t.transitions[n],i);s.isValid()&&this._transitions.push(s)}}return t.prototype.checkAndTrans=function(){for(var t=0;t<this._transitions.length;t++){var i=this._transitions[t];if(i&&i.check())return void i.doTrans()}},i(t,[{key:"name",get:function(){return this._name}},{key:"motion",get:function(){return this._motion}},{key:"loop",get:function(){return this._loop}},{key:"multi",get:function(){return this._multi}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorStateLogic.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b06fbd3UdNKvooAUeDi9UTc","AnimatorStateLogic",void 0);t("AnimatorStateLogic",function(){function t(){}var n=t.prototype;return n.onEntry=function(){},n.onUpdate=function(){},n.onExit=function(){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorTransition.ts",["cc","./AnimatorCondition.ts"],(function(t){var i,n,e;return{setters:[function(t){i=t.cclegacy},function(t){n=t.ParamType,e=t.default}],execute:function(){i._RF.push({},"39224xRIkpEG7hvPJlKoGDy","AnimatorTransition",void 0);t("default",function(){function t(t,i){this._toStateName="",this._hasExitTime=!1,this._conditions=[],this._ac=null,this._toStateName=t.toState,this._hasExitTime=t.hasExitTime,this._ac=i;for(var n=0;n<t.conditions.length;n++){var a=new e(t.conditions[n],i);this._conditions.push(a)}}var i=t.prototype;return i.isValid=function(){return this._hasExitTime||this._conditions.length>0},i.check=function(){if(this._toStateName===this._ac.curState.name)return!1;if(this._hasExitTime&&(this._ac.curState!==this._ac.animCompleteState||!this._ac.animComplete))return!1;for(var t=0;t<this._conditions.length;t++)if(!this._conditions[t].check())return!1;return!0},i.doTrans=function(){this._hasExitTime&&(this._ac.animComplete=!1);for(var t=0;t<this._conditions.length;t++){var i=this._conditions[t].getParamType(),e=this._conditions[t].getParamName();i===n.TRIGGER?this._ac.params.resetTrigger(e):i===n.AUTO_TRIGGER&&this._ac.params.resetAutoTrigger(e)}this._ac.changeState(this._toStateName)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayExt.ts",["cc"],(function(){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"2696fVV0U1BcotwtuSW7qe9","ArrayExt",void 0),!Array.prototype.__cc_extended&&Object.defineProperties(Array.prototype,{remove:{value:function(t){if("function"==typeof t)for(var r=this.length-1;r>-1;--r)t(this[r],r,this)&&this.splice(r,1);else for(var n=this.length-1;n>-1;--n)this[n]===t&&this.splice(n,1);return this}},removeOne:{value:function(t){if("function"==typeof t){for(var r=0;r<this.length;++r)if(t(this[r],r,this))return this.splice(r,1),this}else for(var n=0;n<this.length;++n)if(this[n]===t)return this.splice(n,1),this;return this}},random:{value:function(){return this[Math.floor(Math.random()*this.length)]}},fastRemoveAt:{value:function(t){var r=this.length;if(t<0||t>=r)return null;var n=this[t];return this[t]=this[r-1],this.length=r-1,n}},fastRemove:{value:function(t){function r(r){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}((function(t){var r=this.indexOf(t);return r>=0&&(this[r]=this[this.length-1],--this.length,!0)}))},first:{value:function(){return this.length?this[0]:null}},last:{value:function(){return this.length?this[this.length-1]:null}},max:{value:function(t){if(!this.length)return null;if("function"==typeof t){for(var r=t(this[0],0,this),n=1;n<this.length;++n){var i=t(this[n],n,this);r=i>r?i:r}return r}return this.reduce((function(t,r){return(n=t)>(i=r)?n:i;var n,i}))}},min:{value:function(t){if(!this.length)return null;if("function"==typeof t){for(var r=t(this[0],0,this),n=1;n<this.length;++n){var i=t(this[n],n,this);r=i<r?i:r}return r}return this.reduce((function(t,r){return(n=t)<(i=r)?n:i;var n,i}))}},distinct:{value:function(){return this.filter((function(t,r,n){return n.indexOf(t)===r}))}},filterIndex:{value:function(t){for(var r=[],n=0;n<this.length;++n)t(this[n],n,this)&&r.push(n);return r}},count:{value:function(t){for(var r=0,n=0;n<this.length;++n)t(this[n],n,this)&&++r;return r}},sum:{value:function(t){for(var r=0,n=0;n<this.length;++n)r+=t?t(this[n],n,this):this[n];return r}},average:{value:function(t){return this.sum(t)/this.length}},orderBy:{value:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.slice().sort((function(r,n){for(var i=0;i<t.length;++i){var e=t[i](r),u=t[i](n);if(e>u)return 1;if(e<u)return-1}return 0}))}},orderByDesc:{value:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.slice().sort((function(r,n){for(var i=0;i<t.length;++i){var e=t[i](r),u=t[i](n);if(e>u)return-1;if(e<u)return 1}return 0}))}},binarySearch:{value:function(t){function r(r,n){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}((function(t,r){for(var n=0,i=this.length-1;n<=i;){var e=(i+n)/2|0,u=r?r(this[e]):this[e];if(t===u)return e;t>u?n=e+1:t<u&&(i=e-1)}return-1}))},binaryInsert:{value:function(t,r,n){"boolean"==typeof r&&(n=r,r=void 0);for(var i=0,e=this.length-1,u=NaN,h=r?r(t):t;i<=e;){u=(e+i)/2|0;var s=r?r(this[u]):this[u];if(h===s){if(n)return u;break}h>s?i=u+1:h<s&&(e=u-1)}var f=i>u?u+1:u;return this.splice(f,0,t),f}},binaryDistinct:{value:function(t){return this.filter((function(r,n,i){return i.binarySearch(r,t)===n}))}},findLast:{value:function(t){for(var r=this.length-1;r>-1;--r)if(t(this[r],r,this))return this[r]}},findLastIndex:{value:function(t){for(var r=this.length-1;r>-1;--r)if(t(this[r],r,this))return r;return-1}},groupBy:{value:function(t){var r=this.reduce((function(r,n){var i=t(n);return r[i]||(r[i]=[]),r[i].push(n),r}),{});return Object.keys(r).map((function(t){var n=r[t];return n.key=t,n}))}},__cc_extended:{value:!0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtil.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"4613b2zY/dMSaGPBGo6eti3","ArrayUtil",void 0);r("ArrayUtil",function(){function r(){}return r.noRepeated=function(r){for(var n=[r[0]],t=1;t<r.length;t++){for(var e=!1,o=0;o<n.length;o++)if(r[t]==n[o]){e=!0;break}e||n.push(r[t])}return n},r.copy2DArray=function(r){for(var n=[],t=0;t<r.length;t++)n.push(r[t].concat());return n},r.fisherYatesShuffle=function(r){for(var n=r.length;n;){var t=Math.floor(Math.random()*n--),e=r[n];r[n]=r[t],r[t]=e}return r},r.confound=function(r){return r.slice().sort((function(){return Math.random()-.5}))},r.flattening=function(r){for(;r.some((function(r){return Array.isArray(r)}));)r=[].concat.apply([],r);return r},r.removeItem=function(r,n){for(var t=r.concat(),e=0;e<t.length;e++){if(n==t[e]){r.splice(e,1);break}}},r.combineArrays=function(r,n){return[].concat(r,n)},r.getRandomValueInArray=function(r){return r[Math.floor(Math.random()*r.length)]},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var n,i,e,u;return{setters:[function(s){n=s.createClass},function(s){i=s.cclegacy,e=s.warn,u=s.log}],execute:function(){i._RF.push({},"8c48bBN521JzIxhITJunFji","AsyncQueue",void 0),s("AsyncQueue",function(){function s(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}var i=s.prototype;return i.push=function(n,i){void 0===i&&(i=null);var e=s._$uuid_count++;return this._queues.push({uuid:e,callbacks:[n],params:i}),e},i.pushMulti=function(n){for(var i=s._$uuid_count++,e=arguments.length,u=new Array(e>1?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];return this._queues.push({uuid:i,callbacks:u,params:n}),i},i.remove=function(s){var n;if((null==(n=this._runningAsyncTask)?void 0:n.uuid)!==s){for(var i=0;i<this._queues.length;i++)if(this._queues[i].uuid===s){this._queues.splice(i,1);break}}else e("正在执行的任务不可以移除")},i.clear=function(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null},i.step=function(){this.isProcessing&&this.next(this._isProcessingTaskUUID)},i.play=function(s){var n=this;if(void 0===s&&(s=null),!this.isProcessing&&this._enable){var i=this._queues.shift();if(i){this._runningAsyncTask=i;var e=i.uuid;this._isProcessingTaskUUID=e;var u=i.callbacks;if(1==u.length){u[0]((function(s){void 0===s&&(s=null),n.next(e,s)}),i.params,s)}else for(var t=u.length,r=[],c=function(s){void 0===s&&(s=null),--t,r.push(s||null),0===t&&n.next(e,r)},l=t,a=0;a<l;a++)u[a](c,i.params,s)}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}},i.yieldTime=function(s,n){void 0===n&&(n=null);this.push((function(i,e,u){var t=setTimeout((function(){clearTimeout(t),n&&n(),i(u)}),s)}),{des:"AsyncQueue.yieldTime"})},i.next=function(s,n){void 0===n&&(n=null),this._isProcessingTaskUUID===s?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(n)):this._runningAsyncTask&&u(this._runningAsyncTask)},s.excuteTimes=function(s,n){void 0===n&&(n=null);var i=s;return function(){0===--i&&n&&n()}},n(s,[{key:"queues",get:function(){return this._queues}},{key:"enable",get:function(){return this._enable},set:function(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}},{key:"size",get:function(){return this._queues.length}},{key:"isProcessing",get:function(){return this._isProcessingTaskUUID>0}},{key:"isStop",get:function(){return!(this._queues.length>0)&&!this.isProcessing}},{key:"runningParams",get:function(){return this._runningAsyncTask?this._runningAsyncTask.params:null}}]),s}())._$uuid_count=1,i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,c=t.AudioSource}],execute:function(){var i;e._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);var r=n.ccclass;t("AudioEffect",r("AudioEffect")(i=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(o=t.call.apply(t,[this].concat(n))||this).onComplete=null,o}o(e,t);var n=e.prototype;return n.start=function(){this.node.on(c.EventType.ENDED,this.onAudioEnded,this)},n.onAudioEnded=function(){this.onComplete&&this.onComplete()},e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ResLoader.ts","./AudioEffect.ts"],(function(e){var t,n,o,s,i,c,r,u,f,a;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,i=e.AudioClip,c=e.NodePool,r=e.Node},function(e){u=e.oops},function(e){f=e.resLoader},function(e){a=e.AudioEffect}],execute:function(){s._RF.push({},"01278BDjrtCr4CBpmO5DZlN","AudioEffectPool",void 0);e("AudioEffectPool",function(){function e(){this._switch=!0,this._volume=1,this.pool=new c,this.effects=new Map,this.res=new Map,this._aeId=0}var s=e.prototype;return s.getAeId=function(){return 3e4==this._aeId&&(this._aeId=1),this._aeId++,this._aeId},s.load=function(){var e=n(o().mark((function e(t,s,c){var h=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=f.defaultBundleName),e.abrupt("return",new Promise(n(o().mark((function e(n,l){var p,d,v,m,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.switch){e.next=2;break}return e.abrupt("return",n(-1));case 2:if(p=h.getAeId(),d=t instanceof i?t.uuid:s+"_"+t,d+="_"+p,!(t instanceof i)){e.next=9;break}v=t,e.next=15;break;case 9:if(v=f.get(t,i,s)){e.next=15;break}return h.res.set(s,t),e.next=14,f.loadAsync(s,t,i);case 14:v=e.sent;case 15:_=null,0==h.pool.size()?((_=new r).name="AudioEffect",_.parent=u.audio.node,m=_.addComponent(a)):(_=h.pool.get(),m=_.getComponent(a)),m.onComplete=function(){h.put(p,t,s),c&&c()},h.effects.set(d,m),m.volume=h.volume,m.clip=v,m.play(),n(p);case 23:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),s.put=function(e,t,n){var o;void 0===n&&(n=f.defaultBundleName),o=t instanceof i?t.uuid:n+"_"+t,o+="_"+e;var s=this.effects.get(o);s&&s.clip&&(this.effects.delete(o),s.stop(),this.pool.put(s.node))},s.release=function(){this.effects.forEach((function(e){e.node.destroy()})),this.effects.clear(),this.res.forEach((function(e,t){f.release(t,e)})),this.pool.clear()},s.stop=function(){this.effects.forEach((function(e){e.stop()}))},s.play=function(){this.switch&&this.effects.forEach((function(e){e.play()}))},s.pause=function(){this.switch&&this.effects.forEach((function(e){e.pause()}))},t(e,[{key:"switch",get:function(){return this._switch},set:function(e){this._switch=e,e&&this.stop()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e,this.effects.forEach((function(t){t.volume=e}))}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./AudioEffectPool.ts","./AudioMusic.ts"],(function(t){var s,i,e,c,u,o,n;return{setters:[function(t){s=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,c=t.Component},function(t){u=t.oops},function(t){o=t.AudioEffectPool},function(t){n=t.AudioMusic}],execute:function(){e._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);var h="game_audio";t("AudioManager",function(t){function e(){for(var s,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(s=t.call.apply(t,[this].concat(e))||this).music=null,s.effect=new o,s.local_data={},s}s(e,t);var c=e.prototype;return c.setMusicComplete=function(t){void 0===t&&(t=null),this.music.onComplete=t},c.playMusic=function(t,s,i){this.music.switch&&(this.music.loop=!1,this.music.load(t,s,i).then())},c.playMusicLoop=function(t,s){this.music.switch&&(this.music.loop=!0,this.music.load(t,null,s).then())},c.stopMusic=function(){this.music.switch&&this.music.playing&&this.music.stop()},c.playEffect=function(t,s,i){return this.effect.load(t,s,i)},c.putEffect=function(t,s,i){this.effect.put(t,s,i)},c.resumeAll=function(){!this.music.playing&&this.music.progress>0&&this.music.play(),this.effect.play()},c.pauseAll=function(){this.music.playing&&this.music.pause(),this.effect.pause()},c.stopAll=function(){this.music.stop(),this.effect.stop()},c.save=function(){this.local_data.volume_music=this.music.volume,this.local_data.volume_effect=this.effect.volume,this.local_data.switch_music=this.music.switch,this.local_data.switch_effect=this.effect.switch,u.storage.set(h,this.local_data)},c.load=function(){if(this.music=this.getComponent(n)||this.addComponent(n),this.local_data=u.storage.getJson(h),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault()},c.setState=function(){this.music.volume=this.local_data.volume_music,this.effect.volume=this.local_data.volume_effect,this.music.switch=this.local_data.switch_music,this.effect.switch=this.local_data.switch_effect},c.setStateDefault=function(){this.local_data={},this.music.volume=1,this.effect.volume=1,this.music.switch=!0,this.effect.switch=!0},i(e,[{key:"progressMusic",get:function(){return this.music.progress},set:function(t){this.music.progress=t}},{key:"volumeMusic",get:function(){return this.music.volume},set:function(t){this.music.volume=t,this.save()}},{key:"switchMusic",get:function(){return this.music.switch},set:function(t){this.music.switch=t,t||this.music.stop(),this.save()}},{key:"volumeEffect",get:function(){return this.effect.volume},set:function(t){this.effect.volume=t,this.save()}},{key:"switchEffect",get:function(){return this.effect.switch},set:function(t){this.effect.switch=t,t||this.effect.stop(),this.save()}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts"],(function(t){var e,n,i,s,r,o,u,a,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t._decorator,u=t.AudioSource,a=t.AudioClip},function(t){c=t.resLoader}],execute:function(){var l;r._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);var h=o.ccclass;o.menu,t("AudioMusic",h("AudioMusic")(l=function(t){function r(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).switch=!0,e.onComplete=null,e._progress=0,e._isLoading=!1,e._nextBundleName=null,e._nextUrl=null,e}e(r,t);var o=r.prototype;return o.start=function(){this.node.on(u.EventType.ENDED,this.onAudioEnded,this)},o.onAudioEnded=function(){this.onComplete&&this.onComplete()},o.load=function(){var t=i(s().mark((function t(e,n,i){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=c.defaultBundleName),!this._isLoading){t.next=5;break}return this._nextBundleName=i,this._nextUrl=e,t.abrupt("return");case 5:return this._isLoading=!0,t.next=8,c.loadAsync(i,e,a);case 8:(r=t.sent)&&(this._isLoading=!1,null!=this._nextUrl?(this.load(this._nextUrl,n,this._nextBundleName),this._nextBundleName=this._nextUrl=null):(n&&n(),this.playing&&this.stop(),this.release(),this.clip=r,this.play()));case 10:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),o.release=function(){this.clip&&(this.stop(),this.clip.decRef(),this.clip=null)},n(r,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(t){this._progress=t,this.currentTime=t*this.duration}}]),r}(u))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts"],(function(e){var t,n,o,i,r,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.view,r=e.UITransform},function(e){s=e.ecs},function(e){c=e.CCComp}],execute:function(){var u;n._RF.push({},"7168dnkQcJLlalhbRvjP7rq","BackgroundViewComp",void 0);var a=o.ccclass;o.property,e("BackgroundViewComp",a("BackgroundViewComp")(u=s.register("BackgroundView",!1)(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){this.updateDemission()},o.updateDemission=function(){var e=i.getVisibleSize(),t=this.node.getComponent(r);t&&t.setContentSize(e.width,e.height)},o.onScreenResize=function(){this.updateDemission()},o.reset=function(){this.node.destroy()},n}(c))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BTreeNode.ts"],(function(t){var e,r,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy},function(t){i=t.BTreeNode}],execute:function(){r._RF.push({},"22a91RP3fNG/rWWAXlmM4BT","BehaviorTree",void 0);var s=0;t("BehaviorTree",function(){function t(t,e){this.title=void 0,this._root=void 0,this._current=void 0,this._started=!1,this._blackboard=void 0,s+=1,this.title=t.constructor.name+"(btree_"+s+")",this._root=t,this._blackboard=e}var r=t.prototype;return r.setObject=function(t){this._blackboard=t},r.run=function(){this._started&&console.error("行为树【"+this.title+"】未调用步骤，在最后一次调用步骤时有一个任务未完成"),this._started=!0;var e=t.getNode(this._root);this._current=e,e.setControl(this),e.start(this._blackboard),e.run(this._blackboard)},r.running=function(t){this._started=!1},r.success=function(){this._current.end(this._blackboard),this._started=!1},r.fail=function(){this._current.end(this._blackboard),this._started=!1},t.register=function(t,e){this._registeredNodes.set(t,e)},t.getNode=function(t){var e=t instanceof i?t:this._registeredNodes.get(t);if(!e)throw new Error("无法找到节点【"+t+"】，可能它没有注册过");return e},e(t,[{key:"started",get:function(){return this._started}}]),t}())._registeredNodes=new Map,r._RF.pop()}}}));

System.register("chunks:///_virtual/BhvButtonGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,e,r,o,a,l,u,s,p,c,b;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,l=n.Enum,u=n.Button,s=n.SpriteFrame,p=n.EventHandler,c=n.Component,b=n.color}],execute:function(){var f,m,v,h,d,y,E,C,g,T,S,z,L,w,R,I,D,N,_,H,O,B,P,A,G,M,k,x,F,X,J;o._RF.push({},"41df676L55LvJ52uxkQpfxJ","BhvButtonGroup",void 0);var U=a.ccclass,j=a.property,Q=a.menu,V=function(n){return n[n.CHILDREN_INDEX=0]="CHILDREN_INDEX",n[n.CHILDREN_NAME=1]="CHILDREN_NAME",n}(V||{});n("BhvButtonGroup",(f=Q("OopsFramework/UI/Button Group （按钮组控制）"),m=j({type:l(u.Transition)}),v=j({visible:function(){return this.transition===u.Transition.COLOR}}),h=j({visible:function(){return this.transition===u.Transition.COLOR}}),d=j({visible:function(){return this.transition===u.Transition.COLOR}}),y=j({visible:function(){return this.transition===u.Transition.COLOR}}),E=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),C=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),g=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),T=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),S=j({visible:function(){return this.transition===u.Transition.SCALE||this.transition===u.Transition.COLOR}}),z=j({visible:function(){return this.transition===u.Transition.SCALE}}),L=j({type:l(V)}),w=j({type:[p]}),R=j({tooltip:"规避3.x引擎BUG，EventHandler.component位为空导致找不到触发事件的脚本名的问题",readonly:!0}),U(I=f((N=t((D=function(n){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,e(t,"transition",N,r(t)),e(t,"hoverColor",_,r(t)),e(t,"normalColor",H,r(t)),e(t,"pressedColor",O,r(t)),e(t,"disabledColor",B,r(t)),e(t,"normalSprite",P,r(t)),e(t,"pressedSprite",A,r(t)),e(t,"hoverSprite",G,r(t)),e(t,"disabledSprite",M,r(t)),e(t,"duration",k,r(t)),e(t,"zoomScale",x,r(t)),e(t,"paramType",F,r(t)),e(t,"touchEvents",X,r(t)),e(t,"EventHandler_component",J,r(t)),t}return i(t,n),t.prototype.onLoad=function(){var n=this;this.node.children.forEach((function(t,i){var e=t.getComponent(u);null==e&&(e=t.addComponent(u)),n.touchEvents.forEach((function(r){var o=new p;o.component=""==r.component?n.EventHandler_component:r.component,o.handler=r.handler,o.target=r.target,n.paramType===V.CHILDREN_INDEX?o.customEventData=i.toString():o.customEventData=t.name,e.clickEvents.push(o)}))}))},t}(c)).prototype,"transition",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Transition.NONE}}),_=t(D.prototype,"hoverColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(255,255,255)}}),H=t(D.prototype,"normalColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(214,214,214)}}),O=t(D.prototype,"pressedColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(211,211,211)}}),B=t(D.prototype,"disabledColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(124,124,124)}}),P=t(D.prototype,"normalSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"pressedSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(D.prototype,"hoverSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"disabledSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"duration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(D.prototype,"zoomScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),F=t(D.prototype,"paramType",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.CHILDREN_INDEX}}),X=t(D.prototype,"touchEvents",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(D.prototype,"EventHandler_component",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"VMModify"}}),I=D))||I)||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/BhvFrameIndex.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,s,a,p,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.Sprite,u=e.SpriteFrame,c=e.CCInteger,l=e.error,d=e.Component}],execute:function(){var h,m,f,x,y,F,v,g;s._RF.push({},"c238ewfJ2VJnZ8Gb8YQs5Ts","BhvFrameIndex",void 0);var I=a.ccclass,b=a.property,_=a.executeInEditMode,w=a.requireComponent,C=a.menu;e("BhvFrameIndex",(h=w(p),m=C("OopsFramework/UI/Frame Index （图片切换）"),f=b({type:[u],tooltip:"sprite将会用到帧图片"}),x=b({type:c,tooltip:"当前显示的帧图"}),I(y=_(y=h(y=m((v=t((F=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"spriteFrames",v,i(t)),n(t,"_index",g,i(t)),t}r(t,e);var s=t.prototype;return s.setName=function(e){var t=this.spriteFrames.findIndex((function(t){return t.name==e}));t<0&&l("frameIndex 设置了不存在的name:",e),this.index=t||0},s.random=function(e,t){if(this.spriteFrames){var r=this.spriteFrames.length;(null==e||e<0)&&(e=0),(null==t||t>r)&&(t=r),this.index=Math.floor(Math.random()*(t-e)+e)}},s.next=function(){this.index++},s.previous=function(){this.index--},o(t,[{key:"index",get:function(){return this._index},set:function(e){e<0||(this._index=e%this.spriteFrames.length,this.node.getComponent(p).spriteFrame=this.spriteFrames[this._index])}}]),t}(d)).prototype,"spriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),t(F.prototype,"index",[x],Object.getOwnPropertyDescriptor(F.prototype,"index"),F.prototype),g=t(F.prototype,"_index",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=F))||y)||y)||y)||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/BhvRollNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,l,a,o,n,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,l=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,n=t._decorator,u=t.Label,s=t.Enum,c=t.lerp,p=t.Component}],execute:function(){var h,b,f,g,m,y,E,v,d,T,M,S,R,w,F,I,V,_,C;o._RF.push({},"72d13dwmG9LS4gkJhSuAp3F","BhvRollNumber",void 0);var N=n.ccclass,A=n.property,L=n.menu,z=function(t){return t[t.INTEGER=0]="INTEGER",t[t.FIXED_2=1]="FIXED_2",t[t.TIMER=2]="TIMER",t[t.PERCENTAGE=3]="PERCENTAGE",t[t.KMBT_FIXED2=4]="KMBT_FIXED2",t[t.CUSTOMER=5]="CUSTOMER",t}(z||{});t("BhvRollNumber",(h=L("OopsFramework/UI/Roll Number （滚动数字）"),b=A({type:u,tooltip:"需要滚动的 Label 组件,如果不进行设置，就会从自己的节点自动查找"}),f=A({tooltip:"当前的滚动值(开始的滚动值)"}),g=A({tooltip:"是否显示正负符号"}),m=A({tooltip:"滚动的目标值"}),y=A({tooltip:"滚动的线性差值",step:.01,max:1,min:0}),E=A({tooltip:"是否在开始时就播放"}),v=A({tooltip:"在滚动之前会等待几秒",step:.1,max:1,min:0}),d=A({type:s(z),tooltip:"是否在开始时就播放"}),N(T=h((S=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"label",S,l(e)),r(e,"value",R,l(e)),r(e,"showPlusSymbol",w,l(e)),r(e,"_targetValue",F,l(e)),r(e,"lerp",I,l(e)),r(e,"playAtStart",V,l(e)),r(e,"runWaitTimer",_,l(e)),r(e,"valueType",C,l(e)),e.onCustom=null,e.isScrolling=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){null==this.label&&(this.label=this.node.getComponent(u)),this.playAtStart&&(this.updateLabel(),this.scroll())},o.scroll=function(){var t=this;this.isScrolling||(this.runWaitTimer>0?this.scheduleOnce((function(){t.isScrolling=!0}),this.runWaitTimer):this.isScrolling=!0)},o.stop=function(){this.value=this.targetValue,this.isScrolling=!1,this.updateLabel()},o.init=function(t,e,i){this.targetValue=e||0,this.value=t||0,this.lerp=i||.1},o.scrollTo=function(t){null!=t&&(this.targetValue=t)},o.updateLabel=function(){var t=this.value,e="";switch(this.valueType){case z.INTEGER:e=Math.round(t)+"";break;case z.FIXED_2:e=t.toFixed(2);break;case z.TIMER:e=function(t,e){void 0===t&&(t=0);void 0===e&&(e=!0);var i=Math.floor(t),r=Math.floor(i/3600),l=Math.floor(i%3600/60),a=i%60,o=""+l,n=""+a;a<10&&(n="0"+a);return e?(l<10&&(o="0"+l),r+":"+o+":"+n):(o=""+(l+60*r),l<10&&(o="0"+l),o+":"+n)}(t);break;case z.PERCENTAGE:e=Math.round(100*t)+"%";break;case z.KMBT_FIXED2:e=t>=Number.MAX_VALUE?"MAX":t>1e12?(t/1e12).toFixed(2)+"T":t>1e9?(t/1e9).toFixed(2)+"B":t>1e6?(t/1e6).toFixed(2)+"M":t>1e3?(t/1e3).toFixed(2)+"K":Math.round(t).toString();break;case z.CUSTOMER:this.onCustom&&(e=this.onCustom(this.value,this.targetValue))}if(this.showPlusSymbol&&(t>0?e="+"+e:t<0&&(e="-"+e)),this.label){if(e===this.label.string)return;this.label.string=e}},o.update=function(t){if(0!=this.isScrolling)return this.value=c(this.value,this.targetValue,this.lerp),this.updateLabel(),Math.abs(this.value-this.targetValue)<=1e-4?(this.value=this.targetValue,void(this.isScrolling=!1)):void 0},a(e,[{key:"targetValue",get:function(){return this._targetValue},set:function(t){this._targetValue=t,this.scroll()}}]),e}(p)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(M.prototype,"value",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(M.prototype,"showPlusSymbol",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(M.prototype,"targetValue",[m],Object.getOwnPropertyDescriptor(M.prototype,"targetValue"),M.prototype),F=e(M.prototype,"_targetValue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),I=e(M.prototype,"lerp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),V=e(M.prototype,"playAtStart",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=e(M.prototype,"runWaitTimer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(M.prototype,"valueType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.INTEGER}}),T=M))||T)||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/BhvSwitchPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var i,t,n,r,o,a,s,c,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.CCInteger,h=e.Component},function(e){u=e.VMEnv}],execute:function(){var d,p,g,l,f,x;a._RF.push({},"b3d083kncpDPqVztMtiq6DO","BhvSwitchPage",void 0);var v=s.ccclass,y=s.property,P=s.executeInEditMode,_=s.menu;e("BhvSwitchPage",(d=_("OopsFramework/UI/Switch Page （页面切换）"),p=y({type:c}),v(g=P(g=d((f=i((l=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"isLoopPage",f,r(i)),n(i,"_index",x,r(i)),i.preIndex=0,i._isChanging=!1,i}t(i,e);var a=i.prototype;return a.onLoad=function(){this.preIndex=this.index},a._updateEditorPage=function(e){if(u.editor)for(var i=this.node.children,t=0;t<i.length;t++){var n=i[t];n.active=t==e}},a._updatePage=function(e){var i=this.node.children,t=this.preIndex,n=this.index;if(t!==n){var r=i[t],o=i[n];r.active=!1,o.active=!0}},a.next=function(){return!this.isChanging&&(this.index++,!0)},a.previous=function(){return!this.isChanging&&(this.index--,!0)},a.setEventIndex=function(e,i){return this.index>=0&&null!=this.index&&!1===this.isChanging&&(this.index=i,!0)},o(i,[{key:"index",get:function(){return this._index},set:function(e){if(!this.isChanging){e=Math.round(e);var i=this.node.children.length-1;this.isLoopPage?(e>i&&(e=0),e<0&&(e=i)):(e>i&&(e=i),e<0&&(e=0)),this.preIndex=this._index,this._index=e,u.editor?this._updateEditorPage(e):this._updatePage(e)}}},{key:"isChanging",get:function(){return this._isChanging}}]),i}(h)).prototype,"isLoopPage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=i(l.prototype,"_index",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(l.prototype,"index",[p],Object.getOwnPropertyDescriptor(l.prototype,"index"),l.prototype),g=l))||g)||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/BoardViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./PlayerEvent.ts","./PositionUtils.ts","./SingletonModuleComp.ts","./CardUtils.ts","./CCVMParentComp.ts","./ViewModel.ts","./CardViewComp.ts","./SpriteHelper.ts","./TableEvent.ts"],(function(t){var e,a,n,r,i,o,s,d,u,c,l,h,p,f,C,m,v,g,y,T,b,w,S,A,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){d=t.cclegacy,u=t._decorator,c=t.Node,l=t.v3,h=t.UITransform,p=t.Size},function(t){f=t.oops},function(t){C=t.ecs},function(t){m=t.PlayerEvent},function(t){v=t.getNodePosition},function(t){g=t.smc},function(t){y=t.tweenCardToNode,T=t.getCardResPath},function(t){b=t.CCVMParentComp},function(t){w=t.VM},function(t){S=t.CardViewComp},function(t){A=t.loadResSpriteAtlasToNode},function(t){E=t.TableEvent}],execute:function(){var V,M,P,R,_,D;d._RF.push({},"5d9c2kJEM5PT7sh/jq90h8j","BoardViewComp",void 0);var L=u.ccclass,k=u.property;t("BoardViewComp",(V=L("BoardViewComp"),M=C.register("BoardView",!1),P=k(c),V(R=M((D=e((_=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"cards",D,r(e)),e.boardCards=[],e.data={pot:0,callAmount:0},e}a(e,t);var d=e.prototype;return d.start=function(){f.message.on(E.LEAVE_TABLE,this.handleLeaveTable,this),f.message.on(m.MATCH_STARTED,this.handleMatchStarted,this),f.message.on(m.CHANGE_TURN,this.handleChangeTurn,this),f.message.on(m.PLAYERS_UPDATED,this.handlePlayersUpdated,this)},d.handleLeaveTable=function(t,e){w.getValue("Match.players").length<=1&&this.clearCards()},d.handleMatchStarted=function(t,e){this.clearCards(),this.dealCard(),this.updateView(e.match)},d.handlePlayersUpdated=function(t,e){var a,n,r=this;(this.updateView(e.match),null==(a=e.match)?void 0:a.participants.find((function(t){var e;return t.playerId===(null==(e=w.getValue("Match.player"))?void 0:e.id)})))||(null!=(n=this.boardCards)&&n.length||(this.dealCard(),setTimeout((function(){r.dealFlopCard()}),200)))},d.updateView=function(t){this.data&&(this.data.pot=t.pot,this.data.callAmount=t.callAmount)},d.handleChangeTurn=function(t,e){var a=this,n=w.getValue("Match.match");e.matchData&&n&&(!n.isFlop&&e.matchData.isFlop&&setTimeout((function(){a.dealFlopCard()}),200),!n.isTurn&&e.matchData.isTurn&&setTimeout((function(){a.dealTurnCard()}),500),!n.isRiver&&e.matchData.isRiver&&setTimeout((function(){a.dealRiverCard()}),800))},d.clearCards=function(){var t;if(null!=(t=this.boardCards)&&t.length){for(var e,a=i(this.boardCards);!(e=a()).done;){var n=e.value;null!=n&&n.isValid&&n.destroy()}this.boardCards=[]}},d.playSlipSound=function(t){var e=this;void 0===t&&(t=3),t<=0||(f.audio.playMusic("audios/sound_slip_3"),setTimeout((function(){return e.playSlipSound(t-1)}),200))},d.dealCard=function(){var t,e=this;(null==(t=this.cards)?void 0:t.length)>0&&(this.playSlipSound(),Array.from({length:3}).map(o(s().mark((function t(a,n){var r,i,o,d,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.cards[0],null==(r=o.getChildByName("card"))||!r.active){t.next=3;break}return t.abrupt("return");case 3:return d=v(e.node,o),t.next=6,g.match.createEmptyCard();case 6:(u=t.sent).setPosition(l(500,0,0)),null==(i=e.node)||i.addChild(u),e.boardCards.push(u),y(u,l(d.x+5*n,d.y,d.z),.1+n/2,(function(){u.getComponent(h).setContentSize(new p(o.w,o.h))}));case 11:case"end":return t.stop()}}),t)})))))},d.dealFlopCard=function(){var t,e=this;f.audio.playMusic("audios/sound_shuffle"),null==(t=this.cards)||t.map(o(s().mark((function t(a,n){var r,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>2)){t.next=2;break}return t.abrupt("return");case 2:r=v(e.node,a),i=e.boardCards[n],o=w.getValue("Match.match"),y(i,r,.2+n/2,(function(){var t=o.board[n].rank,e=o.board[n].suit,r=o.board[n].id;if(t&&e&&r){var s=T(t,e),d=s.path,u=s.sprite;i.getComponent(S).onAdded(r),A(i,d,u),i.getComponent(h).setContentSize(new p(a.w,a.h))}}));case 6:case"end":return t.stop()}}),t)}))))},d.dealTurnCard=function(){var t=o(s().mark((function t(){var e,a,n,r,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playSlipSound(1),a=null==(e=this.cards)?void 0:e[3],n=v(this.node,a),t.next=5,g.match.createEmptyCard();case 5:(r=t.sent).setPosition(l(500,0,0)),this.node.addChild(r),this.boardCards.push(r),i=w.getValue("Match.match"),y(r,n,.5,(function(){var t=i.board[3].rank,e=i.board[3].suit,n=i.board[3].id;if(t&&e&&n){var o=T(t,e),s=o.path,d=o.sprite;r.getComponent(S).onAdded(n),A(r,s,d),r.getComponent(h).setContentSize(new p(a.w,a.h))}}));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.dealRiverCard=function(){var t=o(s().mark((function t(){var e,a,n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playSlipSound(1),e=this.cards[4],a=v(this.node,e),t.next=5,g.match.createEmptyCard();case 5:(n=t.sent).setPosition(l(500,0,0)),this.node.addChild(n),this.boardCards.push(n),r=w.getValue("Match.match"),y(n,a,.6,(function(){var t=r.board[4].rank,a=r.board[4].suit,i=r.board[4].id;if(t&&a&&i){var o=T(t,a),s=o.path,d=o.sprite;n.getComponent(S).onAdded(i),A(n,s,d),n.getComponent(h).setContentSize(new p(e.w,e.h))}}));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.onDestroy=function(){f.message.off(m.MATCH_STARTED,this.handleMatchStarted,this),f.message.off(m.CHANGE_TURN,this.handleChangeTurn,this),f.message.off(m.PLAYERS_UPDATED,this.handlePlayersUpdated,this),f.message.off(m.LEAVE_TABLE,this.handleLeaveTable,this)},d.reset=function(){this.node.destroy()},e}(b)).prototype,"cards",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=_))||R)||R));d._RF.pop()}}}));

System.register("chunks:///_virtual/BranchNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BehaviorTree.ts","./BTreeNode.ts"],(function(n){var t,i,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.BehaviorTree},function(n){e=n.BTreeNode}],execute:function(){i._RF.push({},"beafaDMsw9FCbGDpLVmMfa1","BranchNode",void 0);n("BranchNode",function(n){function i(t){var i;return(i=n.call(this)||this).children=void 0,i._actualTask=void 0,i._runningNode=void 0,i._nodeRunning=void 0,i._blackboard=void 0,i.children=t||[],i}t(i,n);var e=i.prototype;return e.start=function(){this._actualTask=0,n.prototype.start.call(this)},e.run=function(n){0==this.children.length?this._control.fail():(this._blackboard=n,this.start(),this._actualTask<this.children.length&&this._run()),this.end()},e._run=function(n){var t=o.getNode(this.children[this._actualTask]);this._runningNode=t,t.setControl(this),t.start(this._blackboard),t.run(this._blackboard)},e.running=function(n){this._nodeRunning=n,this._control.running(n)},e.success=function(){this._nodeRunning=null,this._runningNode.end(this._blackboard)},e.fail=function(){this._nodeRunning=null,this._runningNode.end(this._blackboard)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/BTreeNode.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f0aeepAwndJP7wlpP6QKx06","BTreeNode",void 0);t("BTreeNode",function(){function t(){this._control=void 0,this.title=void 0,this.title=this.constructor.name}var n=t.prototype;return n.start=function(t){},n.end=function(t){},n.setControl=function(t){this._control=t},n.running=function(t){this._control.running(this)},n.success=function(){this._control.success()},n.fail=function(){this._control.fail()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildTimeConstants.ts",["cc","./env"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t}],execute:function(){n._RF.push({},"21a39/4HchJdJkSQKKKkLh9","BuildTimeConstants",void 0);var o=Object.keys(e).sort();t("BuildTimeConstants",(function(){var t=o.reduce((function(t,n){return Math.max(t,n.length)}),0),n=""+o.map((function(n){var o=e[n],u="boolean"==typeof o?o?"true":"false":o;return"\n"+n.padStart(t," ")+" : "+u}));console.log(n)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ButtonSimple.ts"],(function(t){var e,n,o,i,a,r,s,c,l,u,p,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.Animation,l=t.AnimationClip,u=t.Node,p=t.Sprite},function(t){f=t.oops},function(t){d=t.default}],execute:function(){var h,m,y,g,T,_;r._RF.push({},"1be36hrGO5Oz6Eapg6ygW03","ButtonEffect",void 0);var b=s.ccclass,v=s.property,E=s.menu;t("default",(h=b("ButtonEffect"),m=E("OopsFramework/Button/ButtonEffect （有特效按钮）"),y=v({tooltip:"是否开启"}),h(g=m((_=e((T=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"disabledEffect",_,i(e)),e.anim=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.anim=this.node.addComponent(c);var e=f.res.get("common/anim/button_scale_start",l),n=f.res.get("common/anim/button_scale_end",l);this.anim.defaultClip=e,this.anim.createState(e,null==e?void 0:e.name),this.anim.createState(n,null==n?void 0:n.name),this.node.on(u.EventType.TOUCH_START,this.onTouchtStart,this),t.prototype.onLoad.call(this)},r.onTouchtStart=function(t){this.disabledEffect||this.anim.play("button_scale_start")},r.onTouchEnd=function(e){this.disabledEffect||this.anim.play("button_scale_end"),t.prototype.onTouchEnd.call(this,e)},r.onDestroy=function(){this.node.off(u.EventType.TOUCH_START,this.onTouchtStart,this),t.prototype.onDestroy.call(this)},a(e,[{key:"grayscale",get:function(){return this.node.getComponent(p).grayscale},set:function(t){this.node.getComponent(p)&&(this.node.getComponent(p).grayscale=t)}}]),e}(d)).prototype,"disabledEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=T))||g)||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonPlayViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCVMParentComp.ts","./GameEvent.ts","./Oops.ts","./GameUIConfig.ts"],(function(t){var o,n,e,i,s,a,u,r,c;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.Node},function(t){s=t.ecs},function(t){a=t.CCVMParentComp},function(t){u=t.GameEvent},function(t){r=t.oops},function(t){c=t.UIID}],execute:function(){var h;n._RF.push({},"993a3YMrmRJnqqeRoBKR5Fu","ButtonPlayViewComp",void 0);var p=e.ccclass;e.property,t("ButtonPlayViewComp",p("ButtonPlayViewComp")(h=s.register("ButtonPlayView",!1)(h=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.start=function(){this.on(u.ENTER_GAME,this.onHandler,this),this.on(u.EXIT_GAME,this.onHandler,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this)},e.onHandler=function(t){switch(t){case u.ENTER_GAME:this.node.active=!1;break;case u.EXIT_GAME:this.node.active=!0}},e.onTouchEnd=function(t){r.gui.has(c.Home)&&r.gui.remove(c.Home,!0),r.gui.has(c.Table)&&r.gui.remove(c.Table,!0),r.gui.has(c.Match)&&r.gui.remove(c.Match,!0),r.gui.has(c.Room)||(r.gui.openAsync(c.Room),t.propagationStopped=!0)},e.reset=function(){this.node.destroy()},n}(a))||h)||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSimple.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,n,o,i,r,u,c,a,p,s,l,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){c=t.cclegacy,a=t._decorator,p=t.AudioClip,s=t.Node,l=t.game,f=t.Component},function(t){h=t.oops}],execute:function(){var d,y,T,m,E,v,C,b,g,_;c._RF.push({},"8d645yObX1FvJfk2sbi0rxp","ButtonSimple",void 0);var w=a.ccclass,O=a.property,S=a.menu;t("default",(d=w("ButtonSimple"),y=S("OopsFramework/Button/ButtonSimple （节点按钮）"),T=O({tooltip:"是否只触发一次"}),m=O({tooltip:"每次触发间隔"}),E=O({tooltip:"触摸音效",type:p}),d(v=y((b=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(e,"once",b,i(e)),o(e,"interval",g,i(e)),o(e,"effect",_,i(e)),e.touchCount=0,e.touchtEndTime=0,e}n(e,t);var c=e.prototype;return c.onLoad=function(){this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},c.onTouchEnd=function(t){if(this.once){if(this.touchCount>0)return void(t.propagationStopped=!0);this.touchCount++}this.touchtEndTime&&l.totalTime-this.touchtEndTime<this.interval?t.propagationStopped=!0:(this.touchtEndTime=l.totalTime,this.playEffect())},c.playEffect=function(){var t=r(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.effect&&h.audio.playEffect(this.effect);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.onDestroy=function(){this.node.off(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e}(f)).prototype,"once",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=e(C.prototype,"interval",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),_=e(C.prototype,"effect",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v)||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonTouchLong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonEffect.ts"],(function(t){var o,n,e,i,s,c,u,r;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,u=t.EventHandler},function(t){r=t.default}],execute:function(){var a,h,l,p,f,T,_,g;s._RF.push({},"da96en7WYpPTaPIkO1l/Nux","ButtonTouchLong",void 0);var v=c.ccclass,m=c.property,L=c.menu;t("ButtonTouchLong",(a=v("ButtonTouchLong"),h=L("OopsFramework/Button/ButtonTouchLong （长按按钮）"),l=m({tooltip:"长按时间（秒）"}),p=m({type:[u],tooltip:"长按时间（秒）"}),a(f=h((_=o((T=function(t){function o(){for(var o,n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return o=t.call.apply(t,[this].concat(s))||this,e(o,"time",_,i(o)),e(o,"clickEvents",g,i(o)),o._passTime=0,o._isTouchLong=!0,o._event=null,o}n(o,t);var s=o.prototype;return s.onLoad=function(){this._isTouchLong=!1,t.prototype.onLoad.call(this)},s.onTouchtStart=function(o){this._event=o,this._passTime=0,t.prototype.onTouchtStart.call(this,o)},s.onTouchEnd=function(o){this._passTime>this.time&&(o.propagationStopped=!0),this._event=null,this._passTime=0,this._isTouchLong=!1,t.prototype.onTouchEnd.call(this,o)},s.removeTouchLong=function(){this._event=null,this._isTouchLong=!1},s.update=function(t){var o=this;this._event&&!this._isTouchLong&&(this._passTime+=t,this._passTime>=this.time&&(this._isTouchLong=!0,this.clickEvents.forEach((function(t){t.emit([t.customEventData]),o.playEffect()})),this.removeTouchLong()))},o}(r)).prototype,"time",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=o(T.prototype,"clickEvents",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=T))||f)||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraUtil.ts",["cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.Vec3,r=e.view}],execute:function(){t._RF.push({},"95c77QQpp1EjKj8UBFCCdKu","CameraUtil",void 0);e("CameraUtil",function(){function e(){}return e.isInView=function(e,t){var i=e.node.getWorldPosition(),o=e.worldToScreen(t),c=n.normalize(new n,t.subtract(i)),u=e.node.forward,a=n.dot(u,c),s=r.getViewportRect();return a>0&&o.x<=s.width&&o.x>=0&&o.y<=s.height&&o.y>=0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CardUtils.ts",["cc"],(function(s){var e,t,a,n;return{setters:[function(s){e=s.cclegacy,t=s.tween,a=s.v3,n=s.easing}],execute:function(){e._RF.push({},"2ad3bRbx21F9qTfl8wnu2a6","CardUtils",void 0);s("getCardResPath",(function(s,e){return{path:"textures/pockers/"+e.toLowerCase(),sprite:s.toLowerCase()+"_"+e.toLowerCase()}})),s("tweenCardToNode",(function(s,e,r,i){return t(s).delay(0).set({scale:a(0,0,1),opacity:200}).parallel(t().to(.7*r,{position:e},{easing:n.sineOut}),t().sequence(t().to(.4*r,{scale:a(.2,.2,1),angle:180,opacity:255},{easing:n.sineOut}).to(.3*r,{scale:a(1,1,1),angle:360},{easing:n.sineInOut}).call(i))).start()})),s("flipCardToNode",(function(s,e,n){return t(s).delay(0).to(.4*e,{scale:a(0,1,1)},{easing:"quadIn"}).call(n).to(.3*e,{scale:a(1,1,1)},{easing:"quadOut"}).start()}));var r={A:"A",TWO:"2",THREE:"3",FOUR:"4",FIVE:"5",SIX:"6",SEVEN:"7",EIGHT:"8",NINE:"9",TEN:"T",J:"J",Q:"Q",K:"K"},i={AA:9,KK:9,QQ:9,JJ:9,AKs:9,TT:8,AQs:8,AJs:8,AK:8,KQs:8,ATs:7,KJs:7,AQ:7,99:7,QJs:7,KTs:7,88:6,QTs:6,A9s:6,AJ:6,JTs:6,KQ:6,A8s:6,AT:6,K9s:5,A7s:5,KJ:5,A5s:5,Q9s:5,T9s:5,77:5,J9s:5,A6s:5,QJ:5,A4s:5,KT:5,QT:5,A3s:5,K8s:5,JT:5,A2s:5,Q8s:5,T8s:4,K7s:4,"98s":4,66:4,J8s:4,A9:4,K6s:4,K5s:4,A8:4,"87s":3,"97s":3,K4s:3,Q7s:3,T7s:3,K9:3,J7s:3,T9:3,55:3,Q6s:3,Q9:3,K3s:3,J9:3,A7:3,Q5s:3,A5:3,K2s:3,Q4s:2,A6:2,T6s:2,J6s:2,A4:2,J5s:2,K8:2,Q3s:2,44:2,T8:2,A3:2,J8:2,Q8:2,K7:2,A2:2,K6:2},o={A:14,K:13,Q:12,J:11,T:10,9:9,8:8,7:7,6:6,5:5,4:4,3:3,2:2};s("getStarRating",(function(s,e){if(!s||!e)return 1;var t=s.split("_"),a=t[0],n=t[1],A=e.split("_"),u=A[0],c=n===A[1],K=[r[a],r[u]].sort((function(s,e){return o[e]-o[s]})).join("");return c&&(K+="s"),i[K]||1}));e._RF.pop()}}}));

System.register("chunks:///_virtual/CardViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CCComp.ts"],(function(o){var t,e,n,r;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator},function(o){r=o.CCComp}],execute:function(){var i;e._RF.push({},"5aefePoieRJS7/QUIsicIoD","CardViewComp",void 0);var c=n.ccclass;n.property,o("CardViewComp",c("CardViewComp")(i=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))||this).id=void 0,t}t(e,o);var n=e.prototype;return n.onAdded=function(o){this.id=o},n.start=function(){},n.reset=function(){this.node.destroy()},n.onDestroy=function(){this.node.destroy()},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/CCComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts"],(function(o){var t,e,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator},function(o){c=o.GameComponent}],execute:function(){var r,i;e._RF.push({},"dd207fiyGJLf5r+bkiMgwdt","CCComp",void 0);var a=n.ccclass;n.property,o("CCComp",a("CCComp")(((i=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(t=o.call.apply(o,[this].concat(n))||this).canRecycle=void 0,t.ent=void 0,t}return t(e,o),e}(c)).tid=-1,i.compName=void 0,r=i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/CCVMParentComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMParent.ts"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.default}],execute:function(){var c,a;n._RF.push({},"5908aTmM1lItpXgo7ROpQeQ","CCVMParentComp",void 0);var i=r.ccclass;r.property,t("CCVMParentComp",i("CCVMParentComp")(((a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).canRecycle=void 0,e.ent=void 0,e}return e(n,t),n}(o)).tid=-1,a.compName=void 0,c=a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Collection.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,a,i;return{setters:[function(t){r=t.inheritsLoose,e=t.createClass,a=t.wrapNativeSuper},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1dcf5AtQQVK3KQ/2jHHD5gi","Collection",void 0);t("Collection",function(t){function a(){for(var r,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(r=t.call.apply(t,[this].concat(a))||this)._array=[],r}r(a,t);var i=a.prototype;return i.set=function(r,e){if(this.has(r)){var a=this.get(r),i=this._array.indexOf(a);this._array[i]=e}else this._array.push(e);return t.prototype.set.call(this,r,e)},i.delete=function(r){var e=this.get(r);if(e){var a=this._array.indexOf(e);return a>-1&&this._array.splice(a,1),t.prototype.delete.call(this,r)}return!1},i.clear=function(){this._array.splice(0,this._array.length),t.prototype.clear.call(this)},e(a,[{key:"array",get:function(){return this._array}}]),a}(a(Map)));i._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./Oops.ts"],(function(n){var t,e,o,i,c,l,a,r,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,l=n._decorator,a=n.Component},function(n){r=n.LanguageLabel},function(n){s=n.oops}],execute:function(){var u,f,h,b,p,g,d,m,_,y,C;c._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);var F=l.ccclass,k=l.property;n("CommonPrompt",(u=F("CommonPrompt"),f=k(r),h=k(r),b=k(r),p=k(r),u((m=t((d=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),l=0;l<e;l++)c[l]=arguments[l];return t=n.call.apply(n,[this].concat(c))||this,o(t,"lab_title",m,i(t)),o(t,"lab_content",_,i(t)),o(t,"lab_ok",y,i(t)),o(t,"lab_cancel",C,i(t)),t.config={},t}e(t,n);var c=t.prototype;return c.onAdded=function(n){return this.config=n||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0,!0},c.setTitle=function(){this.lab_title.dataID=this.config.title},c.setContent=function(){this.lab_content.dataID=this.config.content},c.setBtnOkLabel=function(){this.lab_ok.dataID=this.config.okWord},c.setBtnCancelLabel=function(){this.lab_cancel&&(this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1)},c.onOk=function(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()},c.onClose=function(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()},c.onCancel=function(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()},c.close=function(){s.gui.removeByNode(this.node)},c.onDestroy=function(){this.config=null},t}(a)).prototype,"lab_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"lab_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"lab_ok",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(d.prototype,"lab_cancel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"5034dEezo5Frr6dhZGVgmTh","Config",void 0);i("Config",(function(){this.game=void 0,this.query=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DateExt.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"80ebbBz8etB5qijWdYrU2HH","DateExt",void 0),Date.prototype.format=function(e){var t=this.getFullYear(),r=this.getMonth()+1,c=this.getDate(),s=this.getHours(),a=this.getMinutes(),i=this.getSeconds();return e.replace("yy",t.toString()).replace("mm",(r<10?"0":"")+r).replace("dd",(c<10?"0":"")+c).replace("hh",(s<10?"0":"")+s).replace("mm",(a<10?"0":"")+a).replace("ss",(i<10?"0":"")+i)},e._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BehaviorTree.ts","./BTreeNode.ts"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.BehaviorTree},function(t){r=t.BTreeNode}],execute:function(){o._RF.push({},"0455agxsbxHlYleJPDpJX3l","Decorator",void 0);t("Decorator",function(t){function o(e){var o;return(o=t.call(this)||this).node=void 0,e&&(o.node=n.getNode(e)),o}e(o,t);var r=o.prototype;return r.setNode=function(t){this.node=n.getNode(t)},r.start=function(){this.node.setControl(this),this.node.start(),t.prototype.start.call(this)},r.end=function(){this.node.end()},r.run=function(t){this.node.run(t)},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/Default.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.ecs}],execute:function(){var u,o;n._RF.push({},"c770dtIaRRN0Ih5xZZi2aSS","Default",void 0);var i=t("DefaultComp",r.register("Default")(u=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.reset=function(){},n}(r.Comp))||u);t("DefaultSystem",r.register("test")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var u=n.prototype;return u.filter=function(){return r.allOf(i)},u.entityEnter=function(t){t.remove(i)},n}(r.ComblockSystem))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/DefaultComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ecs}],execute:function(){var r;n._RF.push({},"c1b1fjRxUhAxoKxfnoKcKvj","DefaultComp",void 0);t("DefaultComp",o.register("Default")(r=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).id=-1,e}return e(n,t),n.prototype.reset=function(){this.id=-1},n}(o.Comp))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/DefaultViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCVMParentComp.ts"],(function(t){var e,r,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){o=t.ecs},function(t){c=t.CCVMParentComp}],execute:function(){var a;r._RF.push({},"49abdmLTd5CR66pSNgS8NHc","DefaultViewComp",void 0);var i=n.ccclass;n.property,t("DefaultViewComp",i("DefaultViewComp")(a=o.register("DefaultView",!1)(a=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).data={},e}e(r,t);var n=r.prototype;return n.start=function(){},n.reset=function(){this.node.destroy()},r}(c))||a)||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/DefaultViewComp2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts"],(function(t){var e,o,n,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){r=t.ecs},function(t){i=t.CCComp}],execute:function(){var u;o._RF.push({},"faa22WpZO5B+5cdl9khZ7w6","DefaultViewComp",void 0);var c=n.ccclass;n.property,t("DefaultViewComp",c("DefaultViewComp")(u=r.register("DefaultView",!1)(u=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.reset=function(){this.node.destroy()},o}(i))||u)||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(n){var s;return{setters:[function(n){s=n.cclegacy}],execute:function(){s._RF.push({},"82d3a9c71JEkI95d3qscHm8","Defines",void 0);n("ViewParams",(function(){this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}));s._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var n,o,t,s,r,a,c;return{setters:[function(e){n=e.inheritsLoose,o=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e._decorator,a=e.Component},function(e){c=e.oops}],execute:function(){var i;s._RF.push({},"d8f1fGRD7dBzIeBSkOpd/Py","DelegateComponent",void 0);var p=r.ccclass;e("DelegateComponent",p("DelegateComponent")(i=function(e){function s(){for(var n,o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];return(n=e.call.apply(e,[this].concat(t))||this).vp=null,n.onCloseWindow=null,n}n(s,e);var r=s.prototype;return r.add=function(){var e=this;return new Promise(o(t().mark((function n(o,s){var r,a,c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<e.node.components.length)){n.next=14;break}if(a=e.node.components[r],!(c=a.onAdded)){n.next=11;break}return n.next=7,c.call(a,e.vp.params);case 7:if(n.t0=n.sent,0!=n.t0){n.next=11;break}return o(!1),n.abrupt("return");case 11:r++,n.next=1;break;case 14:"function"==typeof e.vp.callbacks.onAdded&&e.vp.callbacks.onAdded(e.node,e.vp.params),o(!0);case 16:case"end":return n.stop()}}),n)}))))},r.remove=function(e){this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,e)):this.removed(this.vp,e))},r.onBeforeRemoveNext=function(e){this.removed(this.vp,e)},r.removed=function(e,n){e.valid=!1,e.callbacks&&"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onCloseWindow&&this.onCloseWindow(e),n?(this.node.destroy(),c.res.release(e.config.prefab)):this.node.removeFromParent()},r.onDestroy=function(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null},r.applyComponentsFunction=function(e,n,o){for(var t=0;t<e.components.length;t++){var s=e.components[t],r=s[n];r&&r.call(s,o)}},s}(a))||i);s._RF.pop()}}}));

System.register("chunks:///_virtual/DeviceUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t.sys}],execute:function(){r._RF.push({},"287a3oHJD1OrKr6dp6idwn9","DeviceUtil",void 0);t("DeviceUtil",function(){function t(){}return t.getSafeAreaRect=function(){return n.getSafeAreaRect()},e(t,null,[{key:"platform",get:function(){return n.platform}},{key:"os",get:function(){return n.os}},{key:"isNative",get:function(){return n.isNative}},{key:"isBrowser",get:function(){return n.isBrowser}},{key:"isMobile",get:function(){return n.isMobile}},{key:"isAndroid",get:function(){return n.platform===n.Platform.ANDROID}},{key:"isIPhone",get:function(){return n.platform===n.Platform.IOS}},{key:"isMobileBrowser",get:function(){return n.platform===n.Platform.MOBILE_BROWSER}},{key:"isDesktopBrowser",get:function(){return n.platform===n.Platform.DESKTOP_BROWSER}},{key:"isWeChat",get:function(){return n.platform===n.Platform.WECHAT_GAME}},{key:"isByteDance",get:function(){return n.platform===n.Platform.BYTEDANCE_MINI_GAME}},{key:"isBaidu",get:function(){return n.platform===n.Platform.BAIDU_MINI_GAME}},{key:"isVivo",get:function(){return n.platform===n.Platform.VIVO_MINI_GAME}},{key:"isOPPO",get:function(){return n.platform===n.Platform.OPPO_MINI_GAME}},{key:"isXiaomi",get:function(){return n.platform===n.Platform.XIAOMI_QUICK_GAME}},{key:"isHuawei",get:function(){return n.platform===n.Platform.HUAWEI_QUICK_GAME}},{key:"isAlipay",get:function(){return n.platform===n.Platform.ALIPAY_MINI_GAME}},{key:"isOpenHarmony",get:function(){return n.platform===n.Platform.OPENHARMONY}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/DirectorExt.ts",["cc"],(function(){var e,t,c,i;return{setters:[function(r){e=r.cclegacy,t=r.Director,c=r.director,i=r.js}],execute:function(){if(e._RF.push({},"37f48DDLR1EXKhzn+7pLlWB","DirectorExt",void 0),!t.prototype["__$cc-director-speed-extension$__"]){t.prototype["__$cc-director-speed-extension$__"]=!0;var r=c.tick.bind(c);c.tick=function(e){e*=c.globalGameTimeScale,r(e)},i.mixin(t.prototype,{globalGameTimeScale:1})}e._RF.pop()}}}));

System.register("chunks:///_virtual/displayobjectView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts"],(function(t){var e,o,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){i=t.GameComponent}],execute:function(){var c;o._RF.push({},"04b1832rn9JyoszlEp9UeHz","displayobjectView",void 0);var r=n.ccclass;n.property,t("displayobjectView",r("displayobjectView")(c=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.start=function(){},o}(i))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/ECS.ts",["cc","./ECSComp.ts","./ECSEntity.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts"],(function(t){var n,e,i,o,r,c,u,s;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ECSComp},function(t){i=t.ECSEntity},function(t){o=t.ECSMatcher},function(t){r=t.ECSModel},function(t){c=t.ECSSystem,u=t.ECSRootSystem,s=t.ECSComblockSystem}],execute:function(){var d;t("ecs",void 0),n._RF.push({},"be87fT76plLkaUKEYpkuV0n","ECS",void 0),function(t){var n=t.Entity=i;t.Comp=e,t.System=c,t.RootSystem=u,t.ComblockSystem=s;function a(t){return function(){var t=new n;return t.eid=r.eid++,r.eid2Entity.set(t.eid,t),t}().add(t)}t.register=function(t,n){return void 0===n&&(n=!0),function(e){if(e.s){var i=r.systems.get(t);null==i&&(i=new d.System,r.systems.set(t,i)),i.add(new e)}else if(null==e.tid)r.entityCtors.set(e,t);else{if(-1!==e.tid)throw new Error("重复注册组件： "+t+".");e.tid=r.compTid++,e.compName=t,n?(r.compCtors.push(e),r.compPools.set(e.tid,[])):r.compCtors.push(null),r.compAddOrRemove.set(e.tid,[])}}},t.getEntity=function(t){var n=r.entityCtors.get(t);null==n&&console.error(t.name+" 实体没有注册");var e=(r.entityPool.get(n)||[]).pop();return e||((e=new t).eid=r.eid++,e.name=n),e.init?(e.isValid=!0,e.init()):console.error(t.name+" 实体缺少 init 方法初始化默认组件"),r.eid2Entity.set(e.eid,e),e},t.query=function(t){var n=r.groups.get(t.mid);return n||(n=r.createGroup(t),r.eid2Entity.forEach(n.onComponentAddOrRemove,n)),n.matchEntities},t.clear=function(){r.eid2Entity.forEach((function(t){t.destroy()})),r.groups.forEach((function(t){t.clear()})),r.compAddOrRemove.forEach((function(t){t.length=0})),r.eid2Entity.clear(),r.groups.clear()},t.getEntityByEid=function(t){return r.eid2Entity.get(t)},t.activeEntityCount=function(){return r.eid2Entity.size},t.allOf=function(){var t;return(t=new o).allOf.apply(t,arguments)},t.anyOf=function(){var t;return(t=new o).anyOf.apply(t,arguments)},t.onlyOf=function(){var t;return(t=new o).onlyOf.apply(t,arguments)},t.excludeOf=function(){var t;return(t=new o).excludeOf.apply(t,arguments)},t.getSingleton=function(t){if(!r.tid2comp.has(t.tid)){var n=a(t);r.tid2comp.set(t.tid,n)}return r.tid2comp.get(t.tid)},t.addSingleton=function(t){var n=t.constructor.tid;r.tid2comp.has(n)||r.tid2comp.set(n,t)}}(d||(d=t("ecs",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/ECSComp.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"3d017ZhAZRH4bPfpLr5++8F","ECSComp",void 0);var e=t("ECSComp",(function(){this.ent=void 0,this.canRecycle=!0}));e.tid=-1,e.compName=void 0,c._RF.pop()}}}));

System.register("chunks:///_virtual/ECSEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var i,e,n,o;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy},function(t){n=t.ECSMask},function(t){o=t.ECSModel}],execute:function(){function s(t,i){for(var e=o.compAddOrRemove.get(i),n=e.length-1;n>=0;n--)e[n](t);o.tid2comp.has(i)&&o.tid2comp.delete(i)}e._RF.push({},"1fb62WC3PZPvLhjoZQfrREJ","ECSEntity",void 0);t("ECSEntity",function(){function t(){this.eid=-1,this.name="",this.isValid=!0,this.mask=new n,this.compTid2Ctor=new Map,this.compTid2Obj=new Map,this._parent=null,this._children=null}var e=t.prototype;return e.addChild=function(t){t._parent=this,this.children.set(t.eid,t)},e.removeChild=function(t,i){void 0===i&&(i=!0),null!=this.children&&(t.parent=null,this.children.delete(t.eid),i&&t.destroy())},e.add=function(t,i){if(void 0===i&&(i=!1),"function"==typeof t){var e,n=t.tid;if(-1===t.tid)throw Error("【"+this.name+"】实体【"+t.compName+"】组件未注册");if(this.compTid2Ctor.has(n)){if(!i)return console.log("【"+this.name+"】实体【"+t.compName+"】组件已存在"),this[t.compName];this.remove(t)}return this.mask.set(n),this.compTid2Obj.has(n)?(e=this.compTid2Obj.get(n),this.compTid2Obj.delete(n)):e=function(t){var i=o.compCtors[t.tid];if(!i)throw Error("没有找到该组件的构造函数，检查"+t.compName+"是否为不可构造的组件");return o.compPools.get(t.tid).pop()||new i}(t),this[t.compName]=e,this.compTid2Ctor.set(n,t),e.ent=this,s(this,n),e}var r=t.constructor,h=r.tid;if(-1===h||null==h)throw Error("【"+this.name+"】实体【"+r.name+"】组件未注册");if(this.compTid2Ctor.has(h))throw Error("【"+this.name+"】实体【"+r.name+"】组件已经存在");return this.mask.set(h),this[r.compName]=t,this.compTid2Ctor.set(h,r),t.ent=this,t.canRecycle=!1,s(this,h),this},e.addComponents=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];for(var n=0,o=i;n<o.length;n++){var s=o[n];this.add(s)}return this},e.get=function(t){return this[t.compName]},e.has=function(t){return"number"==typeof t?this.mask.has(t):this.compTid2Ctor.has(t.tid)},e.remove=function(t,i){void 0===i&&(i=!0);var e=!1,n=t.tid,r=t.compName;if(this.mask.has(n)){e=!0;var h=this[t.compName];if(h.ent=null,i){if(h.reset(),h.canRecycle)o.compPools.get(n).push(h)}else this.compTid2Obj.set(n,h)}e&&(this[r]=null,this.mask.delete(n),this.compTid2Ctor.delete(n),s(this,n))},e.destroy=function(){var t=this;this.isValid=!1,this._parent&&(this._parent.removeChild(this,!1),this._parent=null),this._children&&(this._children.forEach((function(i){t.removeChild(i)})),this._children=null),this.compTid2Ctor.forEach(this._remove,this),function(t){if(o.eid2Entity.has(t.eid)){var i=o.entityPool.get(t.name);null==i&&(i=[],o.entityPool.set(t.name,i)),i.push(t),o.eid2Entity.delete(t.eid)}else console.warn("试图销毁不存在的实体")}(this),this.compTid2Obj.clear()},e._remove=function(t){this.remove(t,!0)},i(t,[{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"children",get:function(){return null==this._children&&(this._children=new Map),this._children}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ECSGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c21a23o9P5FNJamcMmoYWfs","ECSGroup",void 0);t("ECSGroup",function(){function t(t){this.matcher=void 0,this._matchEntities=new Map,this._entitiesCache=null,this.count=0,this._enteredEntities=null,this._removedEntities=null,this.matcher=t}var i=t.prototype;return i.onComponentAddOrRemove=function(t){this.matcher.isMatch(t)?(this._matchEntities.set(t.eid,t),this._entitiesCache=null,this.count++,this._enteredEntities&&(this._enteredEntities.set(t.eid,t),this._removedEntities.delete(t.eid))):this._matchEntities.has(t.eid)&&(this._matchEntities.delete(t.eid),this._entitiesCache=null,this.count--,this._enteredEntities&&(this._enteredEntities.delete(t.eid),this._removedEntities.set(t.eid,t)))},i.watchEntityEnterAndRemove=function(t,e){this._enteredEntities=t,this._removedEntities=e},i.clear=function(){var t,e;this._matchEntities.clear(),this._entitiesCache=null,this.count=0,null==(t=this._enteredEntities)||t.clear(),null==(e=this._removedEntities)||e.clear()},e(t,[{key:"matchEntities",get:function(){return null===this._entitiesCache&&(this._entitiesCache=Array.from(this._matchEntities.values())),this._entitiesCache}},{key:"entity",get:function(){return this.matchEntities[0]}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMask.ts",["cc","./ECSModel.ts"],(function(t){var s,i;return{setters:[function(t){s=t.cclegacy},function(t){i=t.ECSModel}],execute:function(){s._RF.push({},"d18694PPbtGs5Ipgo/vaJBX","ECSMask",void 0);t("ECSMask",function(){function t(){this.mask=void 0,this.size=0;var t=Math.ceil(i.compTid/31);this.mask=new Uint32Array(t),this.size=t}var s=t.prototype;return s.set=function(t){this.mask[t/31>>>0]|=1<<t%31},s.delete=function(t){this.mask[t/31>>>0]&=~(1<<t%31)},s.has=function(t){return!!(this.mask[t/31>>>0]&1<<t%31)},s.or=function(t){for(var s=0;s<this.size;s++)if(this.mask[s]&t.mask[s])return!0;return!1},s.and=function(t){for(var s=0;s<this.size;s++)if((this.mask[s]&t.mask[s])!=this.mask[s])return!1;return!0},s.clear=function(){for(var t=0;t<this.size;t++)this.mask[t]=0},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var i,n,r,e,s,h,u;return{setters:[function(t){i=t.construct,n=t.createForOfIteratorHelperLoose,r=t.createClass,e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){h=t.ECSMask},function(t){u=t.ECSModel}],execute:function(){s._RF.push({},"37e8arlqPlN7amZYyHFvBIp","ECSMatcher",void 0);var o=1,c=(t("ECSMatcher",function(){function t(){this.rules=[],this._indices=null,this.isMatch=void 0,this.mid=-1,this._key=null,this.mid=o++}var e=t.prototype;return e.anyOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(a,n)),this.bindMatchMethod(),this},e.allOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(f,n)),this.bindMatchMethod(),this},e.onlyOf=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];this.rules.push(i(f,r));for(var s,h=[],o=n(u.compCtors);!(s=o()).done;){var c=s.value;r.indexOf(c)<0&&h.push(c)}return this.rules.push(i(l,h)),this.bindMatchMethod(),this},e.excludeOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(l,n)),this.bindMatchMethod(),this},e.bindMatchMethod=function(){1===this.rules.length?this.isMatch=this.isMatch1:2===this.rules.length?this.isMatch=this.isMatch2:this.isMatch=this.isMatchMore},e.isMatch1=function(t){return this.rules[0].isMatch(t)},e.isMatch2=function(t){return this.rules[0].isMatch(t)&&this.rules[1].isMatch(t)},e.isMatchMore=function(t){for(var i,r=n(this.rules);!(i=r()).done;){if(!i.value.isMatch(t))return!1}return!0},e.clone=function(){var i=new t;return i.mid=o++,this.rules.forEach((function(t){return i.rules.push(t)})),i},r(t,[{key:"key",get:function(){if(!this._key){for(var t="",i=0;i<this.rules.length;i++)t+=this.rules[i].getKey(),i<this.rules.length-1&&(t+=" && ");this._key=t}return this._key}},{key:"indices",get:function(){var t=this;return null===this._indices&&(this._indices=[],this.rules.forEach((function(i){Array.prototype.push.apply(t._indices,i.indices)}))),this._indices}}]),t}()),function(){function t(){this.indices=[],this.mask=new h;for(var t=-1,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];for(var e=n.length,s=0;s<e;s++){if(-1==(t="number"==typeof n[s]?n[s]:n[s].tid))throw Error("存在没有注册的组件！");this.mask.set(t),this.indices.indexOf(t)<0&&this.indices.push(t)}e>1&&this.indices.sort((function(t,i){return t-i}))}return t.prototype.toString=function(){return this.indices.join("-")},t}()),a=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.isMatch=function(t){return this.mask.or(t.mask)},n.getKey=function(){return"anyOf:"+this.toString()},i}(c),f=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.isMatch=function(t){return this.mask.and(t.mask)},n.getKey=function(){return"allOf:"+this.toString()},i}(c),l=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.getKey=function(){return"excludeOf:"+this.toString()},n.isMatch=function(t){return!this.mask.or(t.mask)},i}(c);s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSModel.ts",["cc","./ECSGroup.ts"],(function(e){var o,n;return{setters:[function(e){o=e.cclegacy},function(e){n=e.ECSGroup}],execute:function(){o._RF.push({},"1d60egM6r9Gta4Op3VABSGM","ECSModel",void 0);var t=e("ECSModel",function(){function e(){}return e.createGroup=function(o){var t=e.groups.get(o.mid);if(!t){t=new n(o),e.groups.set(o.mid,t);for(var r=o.indices,p=0;p<r.length;p++)e.compAddOrRemove.get(r[p]).push(t.onComponentAddOrRemove.bind(t))}return t},e}());t.eid=1,t.entityCtors=new Map,t.entityPool=new Map,t.eid2Entity=new Map,t.compTid=0,t.compPools=new Map,t.compCtors=[],t.compAddOrRemove=new Map,t.tid2comp=new Map,t.groups=new Map,t.systems=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/ecsmodule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(e){var t,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.ecs}],execute:function(){var u;n._RF.push({},"a752cz4uWFA0Jst3qb1xoWv","ecsmodule",void 0);e("ecsmodule",o.register("ecsmodule")(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.init=function(){},n}(o.Entity))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ECSSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSModel.ts"],(function(t){var e,i,s,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){s=t.cclegacy},function(t){n=t.ECSModel}],execute:function(){s._RF.push({},"9261fRWg2RBY5kxbFJsY1QC","ECSSystem",void 0),t("ECSComblockSystem",function(){function t(){this.group=void 0,this.dt=0,this.enteredEntities=null,this.removedEntities=null,this.hasEntityEnter=!1,this.hasEntityRemove=!1,this.hasUpdate=!1,this.tmpExecute=null,this.execute=void 0;var t=Object.hasOwnProperty,e=Object.getPrototypeOf(this),i=t.call(e,"entityEnter"),s=t.call(e,"entityRemove"),o=t.call(e,"firstUpdate"),r=t.call(e,"update");this.hasEntityEnter=i,this.hasEntityRemove=s,this.hasUpdate=r,i||s?(this.enteredEntities=new Map,this.removedEntities=new Map,this.execute=this.execute1,this.group=n.createGroup(this.filter()),this.group.watchEntityEnterAndRemove(this.enteredEntities,this.removedEntities)):(this.execute=this.execute0,this.group=n.createGroup(this.filter())),o&&(this.tmpExecute=this.execute,this.execute=this.updateOnce)}var i=t.prototype;return i.init=function(){},i.onDestroy=function(){},i.hasEntity=function(){return this.group.count>0},i.updateOnce=function(t){if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){for(var i,s=this.enteredEntities.values(),n=e(s);!(i=n()).done;){var o=i.value;this.entityEnter(o)}this.enteredEntities.clear()}for(var r,h=e(this.group.matchEntities);!(r=h()).done;){var u=r.value;this.firstUpdate(u)}this.execute=this.tmpExecute,this.execute(t),this.tmpExecute=null}},i.execute0=function(t){if(0!==this.group.count&&(this.dt=t,this.hasUpdate))for(var i,s=e(this.group.matchEntities);!(i=s()).done;){var n=i.value;this.update(n)}},i.execute1=function(t){var i;if(this.removedEntities.size>0){if(this.hasEntityRemove){i=this.removedEntities.values();for(var s,n=e(i);!(s=n()).done;){var o=s.value;this.entityRemove(o)}}this.removedEntities.clear()}if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){if(this.hasEntityEnter){i=this.enteredEntities.values();for(var r,h=e(i);!(r=h()).done;){var u=r.value;this.entityEnter(u)}}this.enteredEntities.clear()}if(this.hasUpdate)for(var c,a=e(this.group.matchEntities);!(c=a()).done;){var l=c.value;this.update(l)}}},t}()).s=!0;t("ECSRootSystem",function(){function t(){this.executeSystemFlows=[],this.systemCnt=0}var e=t.prototype;return e.add=function(t){return t instanceof o?Array.prototype.push.apply(this.executeSystemFlows,t.comblockSystems):this.executeSystemFlows.push(t),this.systemCnt=this.executeSystemFlows.length,this},e.init=function(){var t=this;n.systems.forEach((function(e){return t.add(e)})),this.executeSystemFlows.forEach((function(t){return t.init()}))},e.execute=function(t){for(var e=0;e<this.systemCnt;e++)this.executeSystemFlows[e].execute(t)},e.clear=function(){this.executeSystemFlows.forEach((function(t){return t.onDestroy()}))},t}());var o=t("ECSSystem",function(){function t(){this._comblockSystems=[]}return t.prototype.add=function(e){return e instanceof t?(Array.prototype.push.apply(this._comblockSystems,e._comblockSystems),e._comblockSystems.length=0):this._comblockSystems.push(e),this},i(t,[{key:"comblockSystems",get:function(){return this._comblockSystems}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/Effect2DFollow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./MathUtil.ts"],(function(t){var e,o,i,n,r,a,s,l,c,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Vec3,c=t.Component},function(t){u=t.oops},function(t){p=t.MathUtil}],execute:function(){var f,d,h,m,y,w,b,v;r._RF.push({},"f04f92UNY1J34UPA0VrEIsH","Effect2DFollow3D",void 0);var D=a.ccclass,g=a.property;t("Effect2DFollow3D",(f=D("Effect2DFollow3D"),d=g({type:s}),h=g({type:s}),f((w=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"node3d",w,n(e)),i(e,"nodeUi",b,n(e)),i(e,"distance",v,n(e)),e.camera=null,e.pos=new l,e}o(e,t);var r=e.prototype;return r.setTarget=function(t){this.node3d=t},r.start=function(){var t=this.zoom();this.node.setScale(t,t,1)},r.lateUpdate=function(t){var e=this.zoom();e=p.lerp(this.node.scale.x,e,.1),this.node.setScale(e,e,1)},r.zoom=function(){this.camera.convertToUINode(this.node3d.worldPosition,u.gui.game,this.pos),this.nodeUi.setPosition(this.pos),l.transformMat4(this.pos,this.node3d.worldPosition,this.camera._camera.matView);var t=this.distance/Math.abs(this.pos.z);return Math.floor(100*t)/100},e}(c)).prototype,"node3d",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"nodeUi",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(y.prototype,"distance",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectDelayRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectSingleCase.ts"],(function(e){var t,n,i,a,r,c,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,l=e.Component},function(e){o=e.EffectSingleCase}],execute:function(){var s,f,u;r._RF.push({},"01359fvxlFJZKx7BLUcTSWS","EffectDelayRelease",void 0);var p=c.ccclass,y=c.property;e("EffectDelayRelease",p("EffectDelayRelease")((u=t((f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"delay",u,a(t)),t}n(t,e);var r=t.prototype;return r.onEnable=function(){this.scheduleOnce(this.onDelay,this.delay)},r.onDelay=function(){o.instance.put(this.node)},t}(l)).prototype,"delay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=f))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectEvent.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"445875CzyRKaLiSXTYH66lm","EffectEvent",void 0);t("EffectEvent",function(t){return t.Put="EffectEvent_Put",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectFinishedRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectEvent.ts","./MessageManager.ts"],(function(e){var t,n,i,o,a,s,r,c,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.sp,a=e.Animation,s=e.ParticleSystem,r=e.Component},function(e){c=e.EffectEvent},function(e){u=e.message}],execute:function(){var l;n._RF.push({},"a751fmayL5JMYH0D4uJoK5H","EffectFinishedRelease",void 0);var f=i.ccclass;i.property,e("EffectFinishedRelease",f("EffectFinishedRelease")(l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).maxDuration=0,t}t(n,e);var i=n.prototype;return i.onEnable=function(){var e=this,t=this.getComponent(o.Skeleton);if(t){var n=t.skeletonData.skeletonJson.animations;for(var i in n){t.setCompleteListener(this.onRecovery.bind(this)),t.setAnimation(0,i,!1);break}}else{var r=this.node.getComponentsInChildren(a);if(r.length>0)r.forEach((function(t){var n,i=null==(n=t.defaultClip)?void 0:n.name;if(i){var o=t.getState(i);if(o){var a=o.duration;e.maxDuration=a>e.maxDuration?a:e.maxDuration}}t.play()})),this.scheduleOnce(this.onRecovery.bind(this),this.maxDuration);else if(s){this.node.getComponentsInChildren(s).forEach((function(t){t.clear(),t.stop(),t.play();var n=t.duration;e.maxDuration=n>e.maxDuration?n:e.maxDuration})),this.scheduleOnce(this.onRecovery.bind(this),this.maxDuration)}}},i.onRecovery=function(){this.node.parent&&u.dispatchEvent(c.Put,this.node)},n}(r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectSingleCase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./ResLoader.ts","./ViewUtil.ts","./EffectEvent.ts","./EffectFinishedRelease.ts"],(function(e){var t,n,s,i,r,a,c,o,f,u,l,h,d,p;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,s=e.createClass},function(e){i=e.cclegacy,r=e.Prefab,a=e.NodePool,c=e.sp,o=e.Animation,f=e.ParticleSystem},function(e){u=e.message},function(e){l=e.resLoader},function(e){h=e.ViewUtil},function(e){d=e.EffectEvent},function(e){p=e.EffectFinishedRelease}],execute:function(){i._RF.push({},"bf338Z+oYxIUbd4bPREw9Ud","EffectSingleCase",void 0),e("EffectSingleCase",function(){function e(){this._speed=1,this.effects=new Map,this.effects_use=new Map,this.res=new Map,u.on(d.Put,this.onPut,this)}var i=e.prototype;return i.onPut=function(e,t){this.put(t)},i.getCount=function(e){var t=this.effects.get(e);return t?t.size():0},i.preload=function(e,s,i){var c=this;return void 0===i&&(i=l.defaultBundleName),new Promise(t(n().mark((function t(o,f){var u,d,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(u=c.effects.get(s))&&(u=new a,c.effects.set(s,u)),c.res.set(s,i),t.next=5,l.loadAsync(i,s,r);case 5:for(d=0;d<e;d++)(p=h.createPrefabNode(s)).res_path=s,u.put(p);o();case 7:case"end":return t.stop()}}),t)}))))},i.loadAndShow=function(e,s,i){var a=this;return new Promise(t(n().mark((function t(c,o){var f,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a.effects.get(e)){t.next=15;break}if(!i||!i.bundleName){t.next=8;break}return a.res.set(e,i.bundleName),t.next=6,l.loadAsync(i.bundleName,e,r);case 6:t.next=11;break;case 8:return a.res.set(e,l.defaultBundleName),t.next=11,l.loadAsync(e,r);case 11:f=a.show(e,s,i),c(f),t.next=17;break;case 15:u=a.show(e,s,i),c(u);case 17:case"end":return t.stop()}}),t)}))))},i.show=function(e,t,n){var s,i=this.effects.get(e);return null==i&&(i=new a,this.effects.set(e,i)),0==i.size()?((s=h.createPrefabNode(e)).res_path=e,n&&n.isPlayFinishedRelease&&s.addComponent(p)):s=i.get(),this.setSpeed(s),n&&(n.pos&&(s.position=n.pos),n.worldPos&&(s.worldPosition=n.worldPos)),t&&(s.parent=t),this.effects_use.set(s,!0),s},i.put=function(e){var t=e.res_path;if(t){var n=this.effects.get(t);n&&(this.effects_use.delete(e),n.put(e))}},i.clear=function(e){e?this.effects.get(e).clear():(this.effects.forEach((function(e){e.clear()})),this.effects.clear())},i.release=function(e){if(e){this.clear(e);var t=this.res.get(e);l.release(e,t),this.res.delete(e)}else this.clear(),this.res.forEach((function(e,t){l.release(t,e)})),this.res.clear()},i.setSpeed=function(e){var t=this,n=e.getComponent(c.Skeleton);if(n)n.timeScale=this.speed;else{var s=e.getComponentsInChildren(o);if(s.length>0)s.forEach((function(e){var n,s=null==(n=e.defaultClip)?void 0:n.name;if(s){var i=e.getState(s);i&&(i.speed=t.speed)}}));else if(f){e.getComponentsInChildren(f).forEach((function(e){e.simulationSpeed=t.speed}))}}},s(e,[{key:"speed",get:function(){return this._speed},set:function(e){var t=this;this._speed=e,this.effects_use.forEach((function(e,n){t.setSpeed(n)}))}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"46d12Bx4JdKnIYHhcvNk6S1","EncryptUtil",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(t){var s,n;return{setters:[function(t){s=t.cclegacy},function(t){n=t.MessageEventData}],execute:function(){s._RF.push({},"c680af5iPNKeIO4cArf/90m","EventDispatcher",void 0);t("EventDispatcher",function(){function t(){this._msg=null}var s=t.prototype;return s.on=function(t,s,e){null==this._msg&&(this._msg=new n),this._msg.on(t,s,e)},s.off=function(t){this._msg&&this._msg.off(t)},s.dispatchEvent=function(t){var s;null==this._msg&&(this._msg=new n);for(var e=arguments.length,i=new Array(e>1?e-1:0),c=1;c<e;c++)i[c-1]=arguments[c];(s=this._msg).dispatchEvent.apply(s,[t].concat(i))},s.destroy=function(){this._msg&&this._msg.clear(),this._msg=null},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"beea7u9xnJD4rMj6ua/LTcF","EventMessage",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,s,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.sp,a=t.Material,o=t.Component}],execute:function(){var r;i._RF.push({},"61de7pPhiNF5plXR5pVKfXu","FlashSpine",void 0);var l=n.ccclass;n.property,t("default",l("FlashSpine")(r=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).duration=.5,e._median=0,e._time=0,e._material=null,e._skeleton=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this._median=this.duration/2,this._skeleton=this.node.getComponent(s.Skeleton),this._material=this._skeleton.customMaterial,this._material.setProperty("u_rate",1)},n.update=function(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;var e=2*Math.abs(this._time-this._median)/this.duration,i=new a;i.copy(this._material),this._skeleton.customMaterial=i,i.setProperty("u_rate",e)}},n.clickFlash=function(){this._time=this.duration},i}(o))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,a,n;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,a=t.Sprite,n=t.Component}],execute:function(){var s;e._RF.push({},"a7a9eXWbUpJ3rONqlgUYCY/","FlashSprite",void 0);var o=r.ccclass;r.property,t("default",o("FlashSprite")(s=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(i=t.call.apply(t,[this].concat(r))||this).duration=.5,i._median=0,i._time=0,i._material=null,i}i(e,t);var r=e.prototype;return r.onLoad=function(){this._median=this.duration/2,this._material=this.node.getComponent(a).getMaterial(0),this._material.setProperty("u_rate",1)},r.update=function(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;var i=2*Math.abs(this._time-this._median)/this.duration;this._material.setProperty("u_rate",i)}},r.clickFlash=function(){this._time=this.duration},e}(n))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/formatCurrency.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"a9477eZnD5MxJn7wSsHemkJ","formatCurrency",void 0);r("format",(function(r,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r).replace(t?"$":"","")}));t._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,r,s,a,h,c,p,l,y,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.math,h=e.KeyCode,c=e.CCFloat,p=e.input,l=e.Input,y=e.game,u=e.Component}],execute:function(){var d,f,v,_,C,S,T,m,E,g,k,w;r._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var x=s.ccclass,z=s.property,F=s.menu,A=a.Vec2,U=a.Vec3,b=a.Quat,D=new A,O=new A,L=new U,H=new b,K="W".charCodeAt(0),M="S".charCodeAt(0),P="A".charCodeAt(0),W="D".charCodeAt(0),N="Q".charCodeAt(0),R="E".charCodeAt(0),Y=h.SHIFT_LEFT;e("FreeFlightCamera",(d=x("FreeFlightCamera"),f=F("OopsFramework/Camera/FreeFlightCamera （自由飞行摄像机）"),v=z({type:c,tooltip:"移动速度"}),_=z({type:c,tooltip:"按Shift键后的速度"}),C=z({type:c,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),S=z({type:c,tooltip:"旋转速度"}),d(T=f((E=t((m=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"moveSpeed",E,n(t)),i(t,"moveSpeedShiftScale",g,n(t)),i(t,"damp",k,n(t)),i(t,"rotateSpeed",w,n(t)),t._euler=new U,t._velocity=new U,t._position=new U,t._speedScale=1,t}o(t,e);var r=t.prototype;return r.onLoad=function(){p.on(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.on(l.EventType.KEY_DOWN,this.onKeyDown,this),p.on(l.EventType.KEY_UP,this.onKeyUp,this),p.on(l.EventType.TOUCH_START,this.onTouchStart,this),p.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(l.EventType.TOUCH_END,this.onTouchEnd,this),U.copy(this._euler,this.node.eulerAngles),U.copy(this._position,this.node.position)},r.onDestroy=function(){p.off(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.off(l.EventType.KEY_DOWN,this.onKeyDown,this),p.off(l.EventType.KEY_UP,this.onKeyUp,this),p.off(l.EventType.TOUCH_START,this.onTouchStart,this),p.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(l.EventType.TOUCH_END,this.onTouchEnd,this)},r.update=function(e){U.transformQuat(L,this._velocity,this.node.rotation),U.scaleAndAdd(this._position,this._position,L,this.moveSpeed*this._speedScale),U.lerp(L,this.node.position,this._position,e/this.damp),this.node.setPosition(L),b.fromEuler(H,this._euler.x,this._euler.y,this._euler.z),b.slerp(H,this.node.rotation,H,e/this.damp),this.node.setRotation(H)},r.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;U.transformQuat(L,U.UNIT_Z,this.node.rotation),U.scaleAndAdd(this._position,this.node.position,L,t)},r.onKeyDown=function(e){var t=this._velocity;e.keyCode===Y?this._speedScale=this.moveSpeedShiftScale:e.keyCode===K?0===t.z&&(t.z=-1):e.keyCode===M?0===t.z&&(t.z=1):e.keyCode===P?0===t.x&&(t.x=-1):e.keyCode===W?0===t.x&&(t.x=1):e.keyCode===N?0===t.y&&(t.y=-1):e.keyCode===R&&0===t.y&&(t.y=1)},r.onKeyUp=function(e){var t=this._velocity;e.keyCode===Y?this._speedScale=1:e.keyCode===K?t.z<0&&(t.z=0):e.keyCode===M?t.z>0&&(t.z=0):e.keyCode===P?t.x<0&&(t.x=0):e.keyCode===W?t.x>0&&(t.x=0):e.keyCode===N?t.y<0&&(t.y=0):e.keyCode===R&&t.y>0&&(t.y=0)},r.onTouchStart=function(e){y.canvas.requestPointerLock()},r.onTouchMove=function(e){e.getStartLocation(D),D.x>.4*y.canvas.width?(e.getDelta(O),this._euler.y-=O.x*this.rotateSpeed*.1,this._euler.x+=O.y*this.rotateSpeed*.1):(e.getLocation(O),A.subtract(O,O,D),this._velocity.x=.01*O.x,this._velocity.z=.01*-O.y)},r.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(D),D.x<.4*y.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(u)).prototype,"moveSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=t(m.prototype,"moveSpeedShiftScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),k=t(m.prototype,"damp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),w=t(m.prototype,"rotateSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=m))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameCollision.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,n,t,e,r,l,s,c,a;return{setters:[function(i){o=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){r=i.cclegacy,l=i._decorator,s=i.ccenum,c=i.Collider,a=i.Component}],execute:function(){var h,g,u,p,f;r._RF.push({},"7fa3eqzDkpBUq8OUNr05VJh","GameCollision",void 0);var y=l.ccclass,C=l.property,d=i("CollisionType",function(i){return i[i.Role=0]="Role",i[i.Ballistic=1]="Ballistic",i[i.Wall=2]="Wall",i}({}));s(d);var T="onTriggerEnter",E="onTriggerStay",m="onTriggerExit",b="onCollisionEnter",v="onCollisionStay",x="onCollisionExit";i("GameCollision",(h=y("GameCollision"),g=C({type:d,tooltip:"碰撞物体类型"}),h((f=o((p=function(i){function o(){for(var o,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(o=i.call.apply(i,[this].concat(r))||this).collider=null,t(o,"type",f,e(o)),o}n(o,i);var r=o.prototype;return r.onLoad=function(){this.collider=this.getComponent(c),this.collider.isTrigger?(this.collider.on(T,this.onTrigger,this),this.collider.on(E,this.onTrigger,this),this.collider.on(m,this.onTrigger,this)):(this.collider.on(b,this.onCollision,this),this.collider.on(v,this.onCollision,this),this.collider.on(x,this.onCollision,this))},r.onTrigger=function(i){switch(i.type){case T:this.onTriggerEnter(i);break;case E:this.onTriggerStay(i);break;case m:this.onTriggerExit(i)}},r.onTriggerEnter=function(i){},r.onTriggerStay=function(i){},r.onTriggerExit=function(i){},r.onCollision=function(i){switch(i.type){case b:this.onCollisionEnter(i);break;case v:this.onCollisionStay(i);break;case x:this.onCollisionExit(i)}},r.onCollisionEnter=function(i){},r.onCollisionStay=function(i){},r.onCollisionExit=function(i){},o}(a)).prototype,"type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.Ballistic}}),u=p))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./EventDispatcher.ts","./EventMessage.ts","./ResLoader.ts","./ViewUtil.ts"],(function(e){var t,n,s,o,i,r,a,u,h,c,f,d,l,p,v,y,E,m,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e._decorator,a=e.Node,u=e.Button,h=e.EventHandler,c=e.input,f=e.Input,d=e.Component,l=e.isValid,p=e.SpriteFrame},function(e){v=e.oops},function(e){y=e.EventDispatcher},function(e){E=e.EventMessage},function(e){m=e.resLoader},function(e){g=e.ViewUtil}],execute:function(){var P;i._RF.push({},"62362nWbWZP653j6XL/zJDq","GameComponent",void 0);var G=r.ccclass,R=function(e){return e[e.Load=0]="Load",e[e.LoadDir=1]="LoadDir",e[e.Audio=2]="Audio",e}(R||{});e("GameComponent",G("GameComponent")(P=function(e){function i(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._event=null,t.nodes=null,t.resPaths=null,t}t(i,e);var r=i.prototype;return r.on=function(e,t,n){this.event.on(e,t,n)},r.off=function(e){this.event.off(e)},r.dispatchEvent=function(e){for(var t,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];(t=this.event).dispatchEvent.apply(t,[e].concat(s))},r.getNode=function(e){if(this.nodes)return this.nodes.get(e)},r.nodeTreeInfoLite=function(){this.nodes=new Map,g.nodeTreeInfoLite(this.node,this.nodes)},r.createPrefabNode=function(e,t){return void 0===t&&(t=v.res.defaultBundleName),g.createPrefabNode(e,t)},r.createPrefabNodeAsync=function(e,t){return void 0===t&&(t=v.res.defaultBundleName),g.createPrefabNodeAsync(e,t)},r.getRes=function(e,t,n){return v.res.get(e,t,n)},r.addPathToRecord=function(e,t,n,s){null==this.resPaths&&(this.resPaths=new Map);var o=this.resPaths.get(e);if(null==o&&(o=new Map,this.resPaths.set(e,o)),n instanceof Array)for(var i=t,r=0;r<n.length;r++){var a=n[r],u=this.getResKey(i,a,s);o.has(u)||o.set(u,{path:a,bundle:i,resId:s})}else if("string"==typeof n){var h=t,c=n,f=this.getResKey(h,c,s);o.has(f)||o.set(f,{path:c,bundle:h,resId:s})}else{var d=v.res.defaultBundleName,l=t,p=this.getResKey(d,l,s);o.has(p)||o.set(p,{path:l,bundle:d,resId:s})}},r.getResKey=function(e,t,n){var s=e+":"+t;return null!=n&&(s+=":"+n),s},r.load=function(e,t,n,s,o){this.addPathToRecord(R.Load,e,t),v.res.load(e,t,n,s,o)},r.loadAsync=function(e,t,n){return this.addPathToRecord(R.Load,e,t),v.res.loadAsync(e,t,n)},r.loadDir=function(e,t,n,s,o){var i,r;"string"==typeof t?(i=t,r=e):(i=e,r=v.res.defaultBundleName),this.addPathToRecord(R.LoadDir,r,i),v.res.loadDir(e,t,n,s,o)},r.release=function(){if(this.resPaths){var e=this.resPaths.get(R.Load);e&&(e.forEach((function(e){v.res.release(e.path,e.bundle)})),e.clear())}},r.releaseDir=function(){if(this.resPaths){var e=this.resPaths.get(R.LoadDir);e&&e.forEach((function(e){v.res.releaseDir(e.path,e.bundle)}))}},r.releaseAudioEffect=function(){if(this.resPaths){var e=this.resPaths.get(R.Audio);e&&e.forEach((function(e){v.audio.putEffect(e.resId,e.path,e.bundle)}))}},r.setSprite=function(){var e=s(o().mark((function e(t,n,s){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=m.defaultBundleName),e.next=3,this.loadAsync(s,n,p);case 3:if((i=e.sent)&&l(t)){e.next=8;break}return(r=this.resPaths.get(R.Load))&&(a=this.getResKey(s,n),r.delete(a),v.res.release(n,s)),e.abrupt("return");case 8:t.spriteFrame=i;case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,s){return e.apply(this,arguments)}}(),r.playMusic=function(e,t,n){v.audio.playMusic(e,t,n)},r.playMusicLoop=function(e,t){v.audio.stopMusic(),v.audio.playMusicLoop(e,t)},r.playEffect=function(){var e=s(o().mark((function e(t,n){var s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==n&&(n=v.res.defaultBundleName),e.next=3,v.audio.playEffect(t,n,(function(){var e=s.resPaths.get(R.Audio);if(e){var o=s.getResKey(n,t);e.delete(o)}}));case 3:this.addPathToRecord(R.Audio,n,t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.setButton=function(e){var t=this;void 0===e&&(e=!0),e&&this.node.on(a.EventType.TOUCH_END,(function(e){var n=t[e.target.name];n&&n.call(t,e)}),this);var n=/<([^>]+)>/;this.node.getComponentsInChildren(u).forEach((function(e){var s=e.node;if(t[s.name]){var o=new h;o.target=t.node,o.handler=e.node.name,o.component=t.name.match(n)[1],e.clickEvents.push(o)}}))},r.setEvent=function(){for(var e=this,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];for(var o=0,i=n;o<i.length;o++){var r=i[o],a=e[r];a?this.on(r,a,this):console.error("名为【"+r+"】的全局事方法不存在")}},r.setKeyboard=function(e){e?(c.on(f.EventType.KEY_DOWN,this.onKeyDown,this),c.on(f.EventType.KEY_UP,this.onKeyUp,this),c.on(f.EventType.KEY_PRESSING,this.onKeyPressing,this)):(c.off(f.EventType.KEY_DOWN,this.onKeyDown,this),c.off(f.EventType.KEY_UP,this.onKeyUp,this),c.off(f.EventType.KEY_PRESSING,this.onKeyPressing,this))},r.onKeyDown=function(e){},r.onKeyUp=function(e){},r.onKeyPressing=function(e){},r.setGameShow=function(){this.on(E.GAME_SHOW,this.onGameShow,this)},r.setGameHide=function(){this.on(E.GAME_HIDE,this.onGameHide,this)},r.setGameResize=function(){this.on(E.GAME_RESIZE,this.onGameResize,this)},r.setGameFullScreen=function(){this.on(E.GAME_FULL_SCREEN,this.onGameFullScreen,this)},r.setGameOrientation=function(){this.on(E.GAME_ORIENTATION,this.onGameOrientation,this)},r.onGameShow=function(){},r.onGameHide=function(){},r.onGameResize=function(){},r.onGameFullScreen=function(){},r.onGameOrientation=function(){},r.onDestroy=function(){this._event&&(this._event.destroy(),this._event=null),this.nodes&&(this.nodes.clear(),this.nodes=null),this.resPaths&&(this.releaseAudioEffect(),this.release(),this.releaseDir(),this.resPaths.clear(),this.resPaths=null)},n(i,[{key:"event",get:function(){return null==this._event&&(this._event=new y),this._event}}]),i}(d))||P);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.oops}],execute:function(){n._RF.push({},"54585zBsmtGfZEDczLG3SH5","GameConfig",void 0);t("GameConfig",function(){function t(t){this._data=null,this._data=Object.freeze(t.json),a.log.logConfig(this._data,"游戏配置")}return e(t,[{key:"version",get:function(){return this._data.config.version}},{key:"package",get:function(){return this._data.config.package}},{key:"frameRate",get:function(){return this._data.config.frameRate}},{key:"localDataKey",get:function(){return this._data.config.localDataKey}},{key:"localDataIv",get:function(){return this._data.config.localDataIv}},{key:"httpServer",get:function(){return this._data.config.httpServer}},{key:"httpTimeout",get:function(){return this._data.config.httpTimeout}},{key:"language",get:function(){return this._data.language.type||["zh"]}},{key:"languagePathJson",get:function(){return this._data.language.path.json||"language/json"}},{key:"languagePathTexture",get:function(){return this._data.language.path.texture||"language/texture"}},{key:"languageDefault",get:function(){return this._data.language.default||"zh"}},{key:"bundleEnable",get:function(){return this._data.bundle.enable}},{key:"bundleServer",get:function(){return this._data.bundle.server}},{key:"bundleDefault",get:function(){return this._data.bundle.default}},{key:"bundlePackages",get:function(){return this._data.bundle.packages}},{key:"loadingTimeoutGui",get:function(){return this._data.config.loadingTimeoutGui||1e3}},{key:"mobileSafeArea",get:function(){return this._data.config.mobileSafeArea||!1}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(E){var N;return{setters:[function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"d6f78B5Sk1O1KJLT0kSN06A","GameEvent",void 0);E("GameEvent",function(E){return E.CONNECT="CONNECT",E.LOGIN_SUCCESS="LOGIN_SUCCESS",E.LOGIN_FAIL="LOGIN_FAIL",E.LOGOUT="LOGOUT",E.ENTER_GAME="ENTER_GAME",E.EXIT_GAME="EXIT_GAME",E.LOSS_CONNECTION="LOSS_CONNECTION",E.RECONNECT="RECONNECT",E.RECONNECT_SUCCESS="RECONNECT_SUCCESS",E.RECONNECT_FAIL="RECONNECT_FAIL",E.RECONNECTING="RECONNECTING",E.RECONNECT_TIMEOUT="RECONNECT_TIMEOUT",E.CLOSE_DROPDOWN="CLOSE_DROPDOWN",E.UPDATE_PLAYER_LIST="UPDATE_PLAYER_LIST",E}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e.director}],execute:function(){t._RF.push({},"73fa0CEfOhMdJUoZwoFIIZV","GameManager",void 0);e("GameManager",function(){function e(e){this.root=void 0,this.root=e}var t=e.prototype;return t.setTimeScale=function(e){a.globalGameTimeScale=e},t.getTimeScale=function(){return a.globalGameTimeScale},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./StringUtil.ts"],(function(t){var n,e,r,i,o;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,r=t.sys},function(t){i=t.oops},function(t){o=t.StringUtil}],execute:function(){e._RF.push({},"d09acUxcU5Hg4kUjKxVEWLy","GameQueryConfig",void 0);t("GameQueryConfig",function(){function t(){this._data=null,r.isBrowser?(this._data=this.parseUrl(),this._data.username||(this._data.username=o.guid()),i.log.logConfig(this._data,"查询参数")):this._data={}}return t.prototype.parseUrl=function(){if("object"!=typeof window)return{};if(!window.document)return{};var t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){for(var n={},e=0,r=(t=t[1].split("&")).length;e<r;++e){var i=t[e],o=i.indexOf("=");if(!(o<0)){var a=i.substring(0,o),u=i.substring(o+1);n[decodeURIComponent(a)]=u&&decodeURIComponent(u)}}return n}return{}},n(t,[{key:"debug",get:function(){return this._data.debug}},{key:"username",get:function(){return this._data.username}},{key:"lang",get:function(){return this._data.lang||"zh"}},{key:"data",get:function(){return this._data}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameResPath.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"c9e13aLH0hCdaFegch169jf","GameResPath",void 0);e("GameResPath",{config:"config/"});c._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIConfig.ts",["cc","./LayerManager.ts"],(function(a){var e,r;return{setters:[function(a){e=a.cclegacy},function(a){r=a.LayerType}],execute:function(){var o;e._RF.push({},"ebf1euXeBRJTpW1ZHZ8vJKI","GameUIConfig",void 0);var n=a("UIID",function(a){return a[a.Loading=1]="Loading",a[a.Alert=2]="Alert",a[a.Confirm=3]="Confirm",a[a.Background=4]="Background",a[a.Login=5]="Login",a[a.Register=6]="Register",a[a.Layout=7]="Layout",a[a.Home=8]="Home",a[a.Table=9]="Table",a[a.Room=10]="Room",a[a.Match=11]="Match",a[a.Table_Confirm=100]="Table_Confirm",a}({}));a("UIConfigData",((o={})[n.Loading]={layer:r.UI,prefab:"loading/prefab/loading"},o[n.Alert]={layer:r.Dialog,prefab:"common/prefab/alert",mask:!0},o[n.Confirm]={layer:r.Dialog,prefab:"common/prefab/confirm",mask:!0},o[n.Background]={layer:r.UI,prefab:"common/prefab/background"},o[n.Login]={layer:r.UI,prefab:"gui/auth/login"},o[n.Register]={layer:r.UI,prefab:"gui/auth/register"},o[n.Layout]={layer:r.UI,prefab:"game/layout"},o[n.Home]={layer:r.UI,prefab:"game/home"},o[n.Table]={layer:r.UI,prefab:"game/table"},o[n.Room]={layer:r.UI,prefab:"game/room"},o[n.Match]={layer:r.UI,prefab:"game/match"},o[n.Table_Confirm]={layer:r.Dialog,prefab:"gui/prefab/confirm"},o));e._RF.pop()}}}));

System.register("chunks:///_virtual/HeaderViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts","./GameEvent.ts"],(function(e){var t,n,i,o,s,r,a,c,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.view,s=e.UITransform,r=e.Layout},function(e){a=e.ecs},function(e){c=e.CCComp},function(e){p=e.GameEvent}],execute:function(){var u;n._RF.push({},"0b10fgc4QlCvJ/+R6LvmJnM","HeaderViewComp",void 0);var d=i.ccclass;i.property,e("HeaderViewComp",d("HeaderViewComp")(u=a.register("HeaderView",!1)(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.start=function(){var e=o.getVisibleSize();this.node.getComponent(s).width=e.width,this.node.getComponent(r).spacingX=e.width-798,this.on(p.ENTER_GAME,this.onHandler,this),this.on(p.EXIT_GAME,this.onHandler,this)},i.onHandler=function(e){var t=this.node.getComponent(r);switch(e){case p.ENTER_GAME:t.spacingX=t.spacingX+110;break;case p.EXIT_GAME:t.spacingX=t.spacingX-110}},i.reset=function(){this.node.destroy()},n}(c))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/HomeViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts"],(function(e){var o,t,n,r,i;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator},function(e){r=e.ecs},function(e){i=e.CCComp}],execute:function(){var s;t._RF.push({},"f56e4YwT+9CJ5KELyGeyLsz","HomeViewComp",void 0);var c=n.ccclass;n.property,e("HomeViewComp",c("HomeViewComp")(s=r.register("HomeView",!1)(s=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.start=function(){},n.reset=function(){this.node.destroy()},t}(i))||s)||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,s;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.error,s=e.warn}],execute:function(){n._RF.push({},"806e5t8UetFy4spn89dnuan","HttpRequest",void 0);var u={},i={},o=e("HttpEvent",function(e){return e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout",e}({})),a=e("HttpReturn",(function(){this.isSucc=!1,this.res=void 0,this.err=void 0,this.status=void 0,this.message=void 0}));e("HttpRequest",function(){function e(){this.server="http://127.0.0.1/",this.timeout=1e4,this.header=new Map}var n=e.prototype;return n.addHeader=function(e,t){this.header.set(e,t)},n.get=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!1,t)},n.getAsync=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(r,s){n.sendRequest(e,t,!1,(function(e){r(e)}))}))},n.getByArraybuffer=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!1,t,"arraybuffer",!1)},n.getAsyncByArraybuffer=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(r,s){n.sendRequest(e,t,!1,(function(e){r(e)}),"arraybuffer",!1)}))},n.post=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!0,t)},n.postAsync=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(r,s){n.sendRequest(e,t,!0,(function(e){r(e)}))}))},n.abort=function(e){var t=u[this.server+e];t&&t.abort()},n.getParamString=function(e){var t="";for(var n in e){var r=e[n];if(r instanceof Object)for(var s in r)t+=s+"="+r[s]+"&";else t+=n+"="+r+"&"}return t.substring(0,t.length-1)},n.sendRequest=function(e,n,c,f,d,l){var h=this;if(void 0===l&&(l=!0),null!=e&&""!=e){var v,p,R="";if(v=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,n?(R=this.getParamString(n),p=v.indexOf("?")>-1?v+"&"+R:v+"?"+R):p=v,null==u[p]||i[p]!=R){var y=new XMLHttpRequest;u[p]=y,i[p]=R,c?y.open("POST",v):y.open("GET",p);for(var O,_=t(this.header);!(O=_()).done;){var g=O.value,q=g[0],m=g[1];y.setRequestHeader(q,m)}var N={};N.url=v,N.params=n,l&&(y.timeout=this.timeout,y.ontimeout=function(){h.deleteCache(p),S.isSucc=!1,S.err=o.TIMEOUT,f(N)});var S=new a;y.onloadend=function(){500==y.status&&(h.deleteCache(p),S.isSucc=!1,S.err=o.NO_NETWORK,f(S))},y.onerror=function(){h.deleteCache(p),S.isSucc=!1,0==y.readyState||1==y.readyState||0==y.status?S.err=o.NO_NETWORK:S.err=o.UNKNOWN_ERROR,f(S)},y.onreadystatechange=function(){4==y.readyState&&(h.deleteCache(p),200==y.status&&f&&(S.isSucc=!0,"arraybuffer"==d?(y.responseType=d,S.res=y.response):S.res=JSON.parse(y.response),f(S)))},null==n||""==n?y.send():y.send(R)}else s("地址【"+v+"】已正在请求中，不能重复请求")}else r("请求地址不能为空")},n.deleteCache=function(e){delete u[e],delete i[e]},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/IControl.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"58450TyE3JB069KO8P5+hl4","IControl",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.Color,r=e.Texture2D}],execute:function(){t._RF.push({},"ebdf3rRnEdIYpKgGdW8gSmZ","ImageUtil",void 0);e("ImageUtil",function(){function e(){}return e.getPixelColor=function(e,t,r){var a,i=document.createElement("canvas"),o=i.getContext("2d");i.width=e.width,i.height=e.height;var g=null==(a=e.image)?void 0:a.data;o.drawImage(g,0,0,e.width,e.height);var c=o.getImageData(0,0,e.width,e.height),u=(r-1)*e.width*4+4*(t-1),l=c.data.slice(u,u+4),m=new n(l[0],l[1],l[2],l[3]);return g.remove(),i.remove(),m},e.imageToBase64=function(e,t){return new Promise((function(n){var r,a=null==(r=/\.png|\.jpg|\.jpeg/.exec(e))?void 0:r[0];if([".png",".jpg",".jpeg"].includes(a)){var i=document.createElement("canvas"),o=i.getContext("2d"),g=new Image;g.src=e,g.onload=function(){i.height=g.height,i.width=g.width,o.drawImage(g,0,0),a=".jpg"===a?"jpeg":a.replace(".","");var e=i.toDataURL("image/"+a);t&&t(e),n(e),g.remove(),i.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(""),n("")}))},e.base64ToTexture=function(e){var t=document.createElement("img");t.src=e;var n=new r;return n.initWithElement(t),t.remove(),n},e.base64ToBlob=function(e){for(var t=e.split(","),n=/image\/\w+|;/.exec(t[0])[0],r=window.atob(t[1]),a=new ArrayBuffer(r.length),i=new Uint8Array(a),o=0;o<r.length;o++)i[o]=255&r.charCodeAt(o);return new Blob([i],{type:n})},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./BehaviorTree.ts","./BranchNode.ts","./Decorator.ts","./BTreeNode.ts","./Priority.ts","./Sequence.ts","./Task.ts","./Selector.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("BehaviorTree",t.BehaviorTree)},function(t){e("BranchNode",t.BranchNode)},function(t){e("Decorator",t.Decorator)},function(t){e("BTreeNode",t.BTreeNode)},function(t){e("Priority",t.Priority)},function(t){e("Sequence",t.Sequence)},function(t){e("Task",t.Task)},function(t){e("Selector",t.Selector)}],execute:function(){t._RF.push({},"96257XYurdITbWhyEf7Qlbn","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Initialize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./Account.ts","./InitRes.ts","./Player2.ts","./Match.ts"],(function(t){var i,n,c,e,o,s,a;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){c=t.ecs},function(t){e=t.Account},function(t){o=t.InitResComp},function(t){s=t.Player},function(t){a=t.Match}],execute:function(){var r;n._RF.push({},"44242oFxmNGuKRq25/3LVZL","Initialize",void 0);t("Initialize",c.register("Initialize")(r=function(t){function n(){for(var i,n=arguments.length,c=new Array(n),e=0;e<n;e++)c[e]=arguments[e];return(i=t.call.apply(t,[this].concat(c))||this).account=void 0,i.player=void 0,i.match=void 0,i}return i(n,t),n.prototype.init=function(){this.account=c.getEntity(e),this.addChild(this.account),this.player=c.getEntity(s),this.addChild(this.player),this.match=c.getEntity(a),this.addChild(this.match),this.add(o)},n}(c.Entity))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/InitRes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./AsyncQueue.ts","./ECS.ts","./ModuleUtil.ts","./GameUIConfig.ts","./LoadingViewComp.ts"],(function(n){var t,e,o,i,u,r,s,a,c,l;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){i=n.cclegacy},function(n){u=n.oops},function(n){r=n.AsyncQueue},function(n){s=n.ecs},function(n){a=n.ModuleUtil},function(n){c=n.UIID},function(n){l=n.LoadingViewComp}],execute:function(){var f,p;i._RF.push({},"25db4MGgYpL/I3W8W1bG/Yo","InitRes",void 0);var g=n("InitResComp",s.register("InitRes")(f=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.reset=function(){},e}(s.Comp))||f);n("InitResSystem",s.register("Initialize")(p=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var f=i.prototype;return f.filter=function(){return s.allOf(g)},f.entityEnter=function(n){var t=new r;this.loadLanguage(t),this.loadCustom(t),this.loadCommon(t),this.onComplete(t,n),t.play()},f.loadCustom=function(n){n.push(e(o().mark((function n(t){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u.res.load("language/font/"+u.language.current,t);case 1:case"end":return n.stop()}}),n)}))))},f.loadLanguage=function(n){n.push((function(n){var t=u.storage.get("language");u.storage.set("language",t||"en"),u.language.setLanguage(t,n)}))},f.loadCommon=function(n){n.push((function(n){u.res.loadDir("common",n)}))},f.onComplete=function(n,t){n.complete=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.addViewUi(t,l,c.Loading),t.remove(g);case 2:case"end":return n.stop()}}),n)})))},i}(s.ComblockSystem))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/JsonOb.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"000b00Lx19Ke4hAFc9/Qlnh","JsonOb",void 0);var e=Object.prototype,o="[object Object]",c="[object Array]",i=["push","pop","shift","unshift","sort","reverse","splice"];t("JsonOb",function(){function t(t,r){this._callback=void 0,e.toString.call(t)!==o&&e.toString.call(t)!==c&&console.error("请传入一个对象或数组"),this._callback=r,this.observe(t)}var r=t.prototype;return r.observe=function(t,r){var i=this;e.toString.call(t)===c&&this.overrideArrayProto(t,r),Object.keys(t).forEach((function(n){var s=i,a=t[n],l=r&&r.slice();l?l.push(n):l=[n],Object.defineProperty(t,n,{get:function(){return a},set:function(t){if(a!==t){"[object Object]"===e.toString.call(t)&&s.observe(t,l);var r=a;a=t,s._callback(t,r,l)}}}),e.toString.call(t[n])!==o&&e.toString.call(t[n])!==c||i.observe(t[n],l)}),this)},r.overrideArrayProto=function(t,r){var e,o=Array.prototype,c=Object.create(Array.prototype),n=this;i.forEach((function(t){Object.defineProperty(c,t,{value:function(){var c=this.slice();return e=o[t].apply(this,arguments),n.observe(this,r),n._callback(this,c,r),e}})})),t.__proto__=c},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(n){var e,o,s;return{setters:[function(n){e=n.cclegacy,o=n.JsonAsset},function(n){s=n.resLoader}],execute:function(){e._RF.push({},"1a24ank4nRC46jfzaIfOmtQ","JsonUtil",void 0);var t="config/game/",a=new Map;n("JsonUtil",function(){function n(){}return n.get=function(n){if(a.has(n))return a.get(n)},n.load=function(n,e){if(a.has(n))e(a.get(n));else{var r=t+n;s.load(r,o,(function(o,t){o?(console.warn(o.message),e(null)):(a.set(n,t.json),s.release(r),e(t.json))}))}},n.loadAsync=function(n){return new Promise((function(e,r){if(a.has(n))e(a.get(n));else{var c=t+n;s.load(c,o,(function(o,t){o?(console.warn(o.message),e(null)):(a.set(n,t.json),s.release(c),e(t.json))}))}}))},n.loadDirAsync=function(){return new Promise((function(n,e){s.loadDir(t,(function(e,o){e?(console.warn(e.message),n(!1)):(o.forEach((function(n){a.set(n.name,n.json)})),s.releaseDir(t),n(!0))}))}))},n.release=function(n){a.delete(n)},n.clear=function(){a.clear()},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LabelChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LabelNumber.ts"],(function(i){var t,e,n,s,a,r,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){a=i.cclegacy,r=i._decorator},function(i){h=i.default}],execute:function(){var c,l,o;a._RF.push({},"fff0fLwVNhNe59VirWTCPFJ","LabelChange",void 0);var u=r.ccclass,p=r.property,d=r.menu;i("LabelChange",u("LabelChange")(c=d("OopsFramework/Label/LabelChange （数值变化动画标签）")((o=t((l=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=i.call.apply(i,[this].concat(a))||this,n(t,"isInteger",o,s(t)),t.duration=0,t.callback=void 0,t.isBegin=!1,t.speed=0,t.end=0,t}e(t,i);var a=t.prototype;return a.changeTo=function(i,t,e){0!=i?this.playAnim(i,this.num,t,e):e&&e()},a.changeBy=function(i,t,e){0!=i?this.playAnim(i,this.num,this.num+t,e):e&&e()},a.stop=function(i){void 0===i&&(i=!0),this.num=this.end,this.isBegin=!1,i&&this.callback&&this.callback()},a.playAnim=function(i,t,e,n){this.duration=i,this.end=e,this.callback=n,this.speed=(e-t)/i,this.num=t,this.isBegin=!0},a.isEnd=function(i){return this.speed>0?i>=this.end:i<=this.end},a.update=function(i){if(this.isBegin){if(this.num==this.end)return this.isBegin=!1,void(this.callback&&this.callback());var t=this.num+i*this.speed;this.isInteger&&(t=this.end<this.num?Math.floor(t):Math.ceil(t)),this.isEnd(t)&&(t=this.end,this.isBegin=!1,this.callback&&this.callback()),this.num=t}},t}(h)).prototype,"isInteger",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/LabelNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,u,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){u=t.cclegacy,a=t._decorator,l=t.Label}],execute:function(){var s,p,c,b,m,f,y,h,L;u._RF.push({},"f7b43F70BhPlrz4IPhZGmsL","LabelNumber",void 0);var g=a.ccclass,d=a.property,_=a.menu;t("default",(s=g("LabelNumber"),p=_("OopsFramework/Label/LabelNumber （只显示数字的标签）"),c=d({tooltip:"数字"}),b=d({tooltip:"数字"}),m=d({tooltip:"货币符号"}),s(f=p((h=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,n(e,"_num",h,i(e)),n(e,"symbol",L,i(e)),e}r(e,t);var u=e.prototype;return u.start=function(){this.updateLabel()},u.updateLabel=function(){this.string=this.num.toString()+this.symbol},o(e,[{key:"num",get:function(){return this._num},set:function(t){this._num=t,this.updateLabel()}}]),e}(l)).prototype,"_num",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(y.prototype,"num",[b],Object.getOwnPropertyDescriptor(y.prototype,"num"),y.prototype),L=e(y.prototype,"symbol",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=y))||f)||f));u._RF.pop()}}}));

System.register("chunks:///_virtual/LabelTime.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./EventMessage.ts","./TimeUtils.ts"],(function(t){var e,i,n,o,r,s,a,l,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label},function(t){l=t.oops},function(t){c=t.EventMessage},function(t){h=t.TimeUtil}],execute:function(){var u,m,f,d,p,g,b,S,v,y,D,w;r._RF.push({},"57786GMN6RPbaAT9b9RmX18","LabelTime",void 0);var T=s.ccclass,_=s.property,z=s.menu;t("default",(u=T("LabelTime"),m=z("OopsFramework/Label/LabelTime （倒计时标签）"),f=_({tooltip:"到计时间总时间（单位秒）"}),d=_({tooltip:"天数数据格式化"}),p=_({tooltip:"时间格式化"}),g=_({tooltip:"是否有00"}),u(b=m((v=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"countDown",v,o(e)),n(e,"dayFormat",y,o(e)),n(e,"timeFormat",D,o(e)),n(e,"zeroize",w,o(e)),e.backStartTime=0,e.dateDisable=void 0,e.result=void 0,e.onSecond=null,e.onComplete=null,e}i(e,t);var r=e.prototype;return r.replace=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t.replace(/\{(\d+)\}/g,(function(t,e){return i[e]}))},r.format=function(){var t=this.countDown,e=Math.floor(t/86400);t-=86400*e;var i=Math.floor(t/3600);t-=3600*i;var n=Math.floor(t/60),o=t-=60*n;if(this.dateDisable=this.dateDisable||!1,0==e&&0==i&&0==n&&0==o)this.zeroize?this.result=this.replace(this.timeFormat,"00","00","00"):this.result=this.replace(this.timeFormat,"0","0","0");else if(e>0&&!this.dateDisable){var r=this.dayFormat,s=r.indexOf("{1}");0==i&&s>-1&&(r=r.substring(0,s-1));var a=r;e>1&&r.indexOf("days")<0&&(a=a.replace("day","days")),e<2&&(a=a.replace("days","day")),this.result=this.replace(a,e,i)}else i+=24*e,this.zeroize?this.result=this.replace(this.timeFormat,this.coverString(i),this.coverString(n),this.coverString(o)):this.result=this.replace(this.timeFormat,i,n,o);this.string=this.result},r.coverString=function(t){return t<10?"0"+t:t.toString()},r.setDateDisable=function(t){this.dateDisable=t},r.setTime=function(t){this.countDown=t,this.timing_end(),this.timing_start(),this.format()},r.setTimeStamp=function(t){this.countDown=h.secsBetween(l.timer.getServerTime(),t),this.timing_end(),this.timing_start(),this.format()},r.start=function(){l.message.on(c.GAME_SHOW,this.onGameShow,this),l.message.on(c.GAME_HIDE,this.onGameHide,this),this.timing_start(),this.format()},r.onDestroy=function(){l.message.off(c.GAME_SHOW,this.onGameShow,this),l.message.off(c.GAME_HIDE,this.onGameHide,this)},r.onGameShow=function(){var t=Math.floor((l.timer.getTime()-(this.backStartTime||l.timer.getTime()))/1e3);this.countDown-=t,this.countDown<0&&(this.countDown=0,this.onScheduleComplete())},r.onGameHide=function(){this.backStartTime=l.timer.getTime()},r.onScheduleSecond=function(){this.countDown--,this.format(),this.onSecond&&this.onSecond(this.node),0==this.countDown&&this.onScheduleComplete()},r.onScheduleComplete=function(){this.timing_end(),this.format(),this.onComplete&&this.onComplete(this.node)},r.timing_start=function(){this.schedule(this.onScheduleSecond,1)},r.timing_end=function(){this.unscheduleAllCallbacks()},e}(a)).prototype,"countDown",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),y=e(S.prototype,"dayFormat",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0} day"}}),D=e(S.prototype,"timeFormat",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0}:{1}:{2}"}}),w=e(S.prototype,"zeroize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=S))||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./LanguageData.ts","./LanguagePack.ts"],(function(a){var e,n,g,t,u,s;return{setters:[function(a){e=a.createClass},function(a){n=a.cclegacy,g=a.sys},function(a){t=a.Logger},function(a){u=a.LanguageData},function(a){s=a.LanguagePack}],execute:function(){n._RF.push({},"3757cxZqLZObIdvP/gQ6Yuj","Language",void 0);a("LanguageManager",function(){function a(){this._languages=[g.Language.CHINESE,g.Language.ENGLISH],this._languagePack=new s,this._defaultLanguage=g.Language.CHINESE}var n=a.prototype;return n.isExist=function(a){return this.languages.indexOf(a)>-1},n.getNextLang=function(){var a=this.languages,e=a.indexOf(u.current);return a[(e+1)%a.length]},n.setLanguage=function(a,e){var n=this;a=null==a||""==a?this._defaultLanguage:a.toLowerCase(),this.languages.indexOf(a)<0&&(console.log("当前不支持【"+a+"】语言，将自动切换到【"+this._defaultLanguage+"】语言"),a=this._defaultLanguage),a!==u.current?this.loadLanguageAssets(a,(function(g){t.logConfig("当前语言为【"+a+"】");var s=u.current;u.current=a,n._languagePack.updateLanguage(a),n._languagePack.releaseLanguageAssets(s),e&&e(!0)})):e&&e(!1)},n.getLangByID=function(a){return u.getLangByID(a)},n.loadLanguageAssets=function(a,e){return a=a.toLowerCase(),this._languagePack.loadLanguageAssets(a,e)},n.releaseLanguageAssets=function(a){a=a.toLowerCase(),this._languagePack.releaseLanguageAssets(a)},e(a,[{key:"languages",get:function(){return this._languages},set:function(a){this._languages=a}},{key:"default",set:function(a){this._defaultLanguage=a||g.Language.CHINESE}},{key:"current",get:function(){return u.current}},{key:"pack",get:function(){return this._languagePack}}]),a}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"27fb3sjD81JlIP2KFTSWUp4","LanguageData",void 0);var a=e("LanguageData",function(){function e(){}return e.getLangByID=function(e){var n=this.json[e];if(n)return n;if(this.excel){var a=this.excel[e];if(a)return a[this.current]}return e},e}());a.path_json="language/json",a.path_texture="language/texture",a.path_spine="language/spine",a.current="",a.json={},a.excel=null,a.font=null;e("LanguageType",["LanguageLabel","LanguageSprite","LanguageSpine"]);n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){var e,a,n,i,r,o,s,p,u,l,c,g,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,p=t.CCString,u=t.Label,l=t.RichText,c=t.warn,g=t.Component},function(t){h=t.LanguageData}],execute:function(){var d,f,y,m,b,L,_,v,D,I,z,k,w,C;o._RF.push({},"110c8vEd5NEPL/N9meGQnaX","LanguageLabel",void 0);var U=s.ccclass,P=s.property,S=s.menu,F=t("LangLabelParamsItem",U("LangLabelParamsItem")((y=e((f=function(){a(this,"key",y,this),a(this,"value",m,this)}).prototype,"key",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=e(f.prototype,"value",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=f))||d);t("LanguageLabel",(b=U("LanguageLabel"),L=S("OopsFramework/Language/LanguageLabel （文本多语言）"),_=P({type:F,displayName:"params"}),v=P({type:F,displayName:"params"}),D=P({serializable:!0}),I=P({type:p,serializable:!0}),b(z=L((w=e((k=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"_params",w,i(e)),a(e,"_dataID",C,i(e)),e.initFontSize=0,e._needUpdate=!1,e}n(e,t);var o=e.prototype;return o.language=function(){this._needUpdate=!0},o.onLoad=function(){this._needUpdate=!0},o.setVars=function(t,e){for(var a=!1,n=0;n<this._params.length;n++){var i=this._params[n];i.key===t&&(i.value=e,a=!0)}if(!a){var r=new F;r.key=t,r.value=e,this._params.push(r)}this._needUpdate=!0},o.update=function(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)},o.updateContent=function(){var t=this.getComponent(u),e=this.getComponent(l),a=h.font;t?(a&&(t.font=a),t.string=this.string,this.initFontSize=t.fontSize):e?(a&&(e.font=a),e.string=this.string,this.initFontSize=e.fontSize):c("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")},r(e,[{key:"params",get:function(){return this._params||[]},set:function(t){this._params=t,this._needUpdate=!0}},{key:"dataID",get:function(){return this._dataID||""},set:function(t){this._dataID=t,this._needUpdate=!0}},{key:"string",get:function(){var t=h.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((function(e){t=t.replace("%{"+e.key+"}",e.value)})),t||(c("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}}]),e}(g)).prototype,"_params",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(k.prototype,"params",[v],Object.getOwnPropertyDescriptor(k.prototype,"params"),k.prototype),C=e(k.prototype,"_dataID",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(k.prototype,"dataID",[I],Object.getOwnPropertyDescriptor(k.prototype,"dataID"),k.prototype),z=k))||z)||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./Logger.ts","./JsonUtil.ts","./LanguageData.ts"],(function(n){var e,t,r,a,o,u,s,c,i,l,f,g;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,a=n.director,o=n.error,u=n.TTFFont,s=n.JsonAsset},function(n){c=n.resLoader},function(n){i=n.Logger},function(n){l=n.JsonUtil},function(n){f=n.LanguageData,g=n.LanguageType}],execute:function(){r._RF.push({},"2ffebyj59xIc4v4BZty8SDm","LanguagePack",void 0);n("LanguagePack",function(){function n(){}var r=n.prototype;return r.updateLanguage=function(n){for(var e=a.getScene().children,t=function(n){g.forEach((function(t){for(var r=e[n].getComponentsInChildren(t),a=0;a<r.length;a++)r[a].language()}))},r=0;r<e.length;++r)t(r)},r.loadLanguageAssets=function(){var n=e(t().mark((function n(e,r){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadTexture(e);case 2:return n.next=4,this.loadSpine(e);case 4:return n.next=6,this.loadJson(e);case 6:return n.next=8,this.loadTable(e);case 8:r(e);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),r.loadTable=function(n){return new Promise(e(t().mark((function n(e,r){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.loadAsync("Language");case 2:f.excel=n.sent,f.excel&&i.logConfig("config/game/Language","下载语言包 table 资源"),e(null);case 5:case"end":return n.stop()}}),n)}))))},r.loadTexture=function(n){return new Promise((function(e,t){var r=f.path_texture+"/"+n;c.loadDir(r,(function(n,t){if(n)return o(n),void e(null);i.logConfig(r,"下载语言包 textures 资源"),e(null)}))}))},r.loadJson=function(n){return new Promise(e(t().mark((function e(r,a){var o,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.path_json+"/"+n,e.next=3,c.loadAsync(o,s);case 3:if(!(l=e.sent)){e.next=9;break}f.json=l.json,i.logConfig(o,"下载语言包 json 资源"),e.next=11;break;case 9:return r(null),e.abrupt("return");case 11:c.load(o,u,(function(n,e){null==n&&i.logConfig(o,"下载语言包 ttf 资源"),f.font=e,r(null)}));case 12:case"end":return e.stop()}}),e)}))))},r.loadSpine=function(n){return new Promise(e(t().mark((function e(r,a){var u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=f.path_spine+"/"+n,c.loadDir(u,(function(n,e){if(n)return o(n),void r(null);i.logConfig(u,"下载语言包 spine 资源"),r(null)}));case 2:case"end":return e.stop()}}),e)}))))},r.releaseLanguageAssets=function(n){var e=f.path_texture+"/"+n;c.releaseDir(e);var t=f.path_json+"/"+n,r=c.get(t,s);r&&r.decRef();var a=c.get(t,u);a&&a.decRef();var o=f.path_spine+"/"+n;c.release(o)},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,n,i,o,r,u,p,s,c,l,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,u=e._decorator,p=e.CCString,s=e.sp,c=e.Component},function(e){l=e.resLoader},function(e){g=e.LanguageData}],execute:function(){var d,f,h,y,D,S,L;r._RF.push({},"53e25hqV6VEJqayXfz6Qam2","LanguageSpine",void 0);var m=u.ccclass,_=u.property,v=u.menu;e("LanguageSpine",(d=m("LanguageSpine"),f=v("OopsFramework/Language/LanguageSpine （Spine 动画多语言）"),h=_({serializable:!0}),y=_({type:p,serializable:!0}),d(D=f((L=t((S=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_dataID",L,i(t)),t._defaultAnimation="",t}a(t,e);var r=t.prototype;return r.onLoad=function(){var e=this.getComponent(s.Skeleton);this._defaultAnimation=e.animation},r.start=function(){this.updateSpine()},r.language=function(){this.updateSpine()},r.updateSpine=function(){var e="language/spine/"+g.current+"/"+this.dataID,t=l.get(e,s.SkeletonData);if(t){var a=this.getComponent(s.Skeleton);a.skeletonData=t,a.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+e)},o(t,[{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this.updateSpine()}}]),t}(c)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(S.prototype,"dataID",[y],Object.getOwnPropertyDescriptor(S.prototype,"dataID"),S.prototype),D=S))||D)||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,r,a,i,n,o,p,u,s,c,l,g,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,p=e._decorator,u=e.CCString,s=e.SpriteFrame,c=e.Sprite,l=e.UITransform,g=e.Component},function(e){f=e.resLoader},function(e){d=e.LanguageData}],execute:function(){var S,y,h,D,L,m,b,z,I;o._RF.push({},"11b96k/RIZF57Loehxyl6Hs","LanguageSprite",void 0);var v=p.ccclass,_=p.property,w=p.menu;e("LanguageSprite",(S=v("LanguageSprite"),y=w("OopsFramework/Language/LanguageSprite （图片多语言）"),h=_({serializable:!0}),D=_({type:u,serializable:!0}),L=_({tooltip:"是否设置为图片原始资源大小"}),S(m=y((z=t((b=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_dataID",z,i(t)),a(t,"isRawSize",I,i(t)),t}r(t,e);var o=t.prototype;return o.start=function(){this.updateSprite()},o.language=function(){this.updateSprite()},o.updateSprite=function(){var e="language/texture/"+d.current+"/"+this.dataID+"/spriteFrame",t=f.get(e,s);if(t){var r=this.getComponent(c);if(r.spriteFrame=t,this.isRawSize){var a,i=t._originalSize;null==(a=r.getComponent(l))||a.setContentSize(i)}}else console.error("[LanguageSprite] 资源不存在 "+e)},n(t,[{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this.updateSprite()}}]),t}(g)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(b.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(b.prototype,"dataID"),b.prototype),I=t(b.prototype,"isRawSize",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=b))||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./LayerPopup.ts"],(function(s){var a,t,i,n;return{setters:[function(s){a=s.inheritsLoose},function(s){t=s.cclegacy},function(s){i=s.ViewParams},function(s){n=s.LayerPopUp}],execute:function(){t._RF.push({},"dcad5w8wHlEDJpIKJ4gUxEP","LayerDialog",void 0);s("LayerDialog",function(s){function t(){for(var a,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(a=s.call.apply(s,[this].concat(i))||this).params=[],a}a(t,s);var n=t.prototype;return n.add=function(s,a,t){this.ui_nodes.size>0?this.params.push({config:s,params:a,callbacks:t}):(this.black.enabled=!0,this.show(s,a,t))},n.show=function(s,a,t){var n=this.ui_cache.get(s.prefab);null==n&&((n=new i).valid=!0,n.config=s),n.params=a||{},n.callbacks=null!=t?t:{},this.ui_nodes.set(n.config.prefab,n),this.load(n,s.bundle)},n.onCloseWindow=function(a){s.prototype.onCloseWindow.call(this,a),setTimeout(this.next.bind(this),0)},n.setBlackDisable=function(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())},n.next=function(){if(this.params.length>0){var s=this.params.shift();this.show(s.config,s.params,s.callbacks)}},t}(n));t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts"],(function(e){var i,t,o,a,n,s,r,c,p,h,u,l,d,f,g,y,v,m;return{setters:[function(e){i=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.Camera,n=e.view,s=e.screen,r=e.ResolutionPolicy,c=e.SafeArea,p=e.warn,h=e.Node,u=e.Layers,l=e.Widget},function(e){d=e.oops},function(e){f=e.DelegateComponent},function(e){g=e.LayerDialog},function(e){y=e.LayerNotify},function(e){v=e.LayerPopUp},function(e){m=e.LayerUI}],execute:function(){o._RF.push({},"7ba675xFGdHqIOykTysNzEu","LayerManager",void 0);e("ScreenAdapterType",function(e){return e[e.Auto=0]="Auto",e[e.Landscape=1]="Landscape",e[e.Portrait=2]="Portrait",e}({}));var b=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",function(){function e(){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.windowAspectRatio=0,this.designAspectRatio=0,this.mobileSafeArea=!1,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={}}var o=e.prototype;return o.initLayer=function(e){this.root=e,this.initScreenAdapter(),this.camera=this.root.getComponentInChildren(a),this.game=this.create_node(b.Game),this.ui=new m(b.UI),this.popup=new v(b.PopUp),this.dialog=new g(b.Dialog),this.system=new g(b.System),this.notify=new y(b.Notify),this.guide=this.create_node(b.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)},o.initScreenAdapter=function(){var e=n.getDesignResolutionSize(),i=s.windowSize;this.windowAspectRatio=i.width/i.height,this.designAspectRatio=e.width/e.height;var t=0,o=0;this.windowAspectRatio>this.designAspectRatio?(t=(o=e.height)*i.width/i.height,d.log.logView("适配屏幕高度","【横屏】")):(o=(t=e.width)*i.height/i.width,d.log.logView("适配屏幕宽度","【竖屏】")),n.setDesignResolutionSize(t,o,r.UNKNOWN),this.mobileSafeArea&&(this.root.addComponent(c),d.log.logView("开启移动设备安全区域适配"))},o.init=function(e){this.configs=e},o.setOpenFailure=function(e){this.ui.onOpenFailure=this.popup.onOpenFailure=this.dialog.onOpenFailure=this.system.onOpenFailure=e},o.toast=function(e,i){void 0===i&&(i=!1),this.notify.toast(e,i)},o.waitOpen=function(){this.notify.waitOpen()},o.waitClose=function(){this.notify.waitClose()},o.setConfig=function(e,i){this.configs[e]=i},o.open=function(e,i,t){void 0===i&&(i=null);var o=this.configs[e];if(null!=o)switch(o.layer){case b.UI:this.ui.add(o,i,t);break;case b.PopUp:this.popup.add(o,i,t);break;case b.Dialog:this.dialog.add(o,i,t);break;case b.System:this.system.add(o,i,t)}else p("打开编号为【"+e+"】的界面失败，配置信息不存在")},o.openAsync=function(){var e=i(t().mark((function e(i,o){var a=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===o&&(o=null),e.abrupt("return",new Promise((function(e,t){var n={onAdded:function(i,t){e(i)},onLoadFailure:function(){e(null)}};a.open(i,o,n)})));case 2:case"end":return e.stop()}}),e)})));return function(i,t){return e.apply(this,arguments)}}(),o.replace=function(e,i,t){var o=this;void 0===t&&(t=null);var a={onAdded:function(i,t){o.remove(e)}};this.open(i,t,a)},o.replaceAsync=function(e,o,a){var n=this;return void 0===a&&(a=null),new Promise(i(t().mark((function i(s,r){var c;return t().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.openAsync(o,a);case 2:(c=i.sent)?(n.remove(e),s(c)):s(null);case 4:case"end":return i.stop()}}),i)}))))},o.has=function(e){var i=this.configs[e];if(null==i)return p("编号为【"+e+"】的界面配置不存在，配置信息不存在"),!1;var t=!1;switch(i.layer){case b.UI:t=this.ui.has(i.prefab);break;case b.PopUp:t=this.popup.has(i.prefab);break;case b.Dialog:t=this.dialog.has(i.prefab);break;case b.System:t=this.system.has(i.prefab)}return t},o.get=function(e){var i=this.configs[e];if(null==i)return p("编号为【"+e+"】的界面配置不存在，配置信息不存在"),null;var t=null;switch(i.layer){case b.UI:t=this.ui.get(i.prefab);break;case b.PopUp:t=this.popup.get(i.prefab);break;case b.Dialog:t=this.dialog.get(i.prefab);break;case b.System:t=this.system.get(i.prefab)}return t},o.remove=function(e,i){var t=this.configs[e];if(null!=t)switch(t.layer){case b.UI:this.ui.remove(t.prefab,i);break;case b.PopUp:this.popup.remove(t.prefab,i);break;case b.Dialog:this.dialog.remove(t.prefab,i);break;case b.System:this.system.remove(t.prefab,i)}else p("删除编号为【"+e+"】的界面失败，配置信息不存在")},o.removeByNode=function(e,i){if(e instanceof h){var t=e.getComponent(f);if(t&&t.vp){if(e.parent)e.parent.remove(t.vp.config.prefab,i);else if(i)switch(t.vp.config.layer){case b.UI:this.ui.removeCache(t.vp.config.prefab);break;case b.PopUp:this.popup.removeCache(t.vp.config.prefab);break;case b.Dialog:this.dialog.removeCache(t.vp.config.prefab);break;case b.System:this.system.removeCache(t.vp.config.prefab)}}else p("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}},o.clear=function(e){void 0===e&&(e=!1),this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)},o.create_node=function(e){var i=new h(e);i.layer=u.Enum.UI_2D;var t=i.addComponent(l);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewUtil.ts","./Notify.ts"],(function(t){var i,n,e,o,a,l,s,r,h;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Layers,o=t.BlockInputEvents,a=t.instantiate,l=t.Widget,s=t.Node},function(t){r=t.ViewUtil},function(t){h=t.Notify}],execute:function(){n._RF.push({},"da14ax+B2xNsL2taQFOh7we","LayerNotify",void 0);t("LayerNotify",function(t){function n(i){var n;(n=t.call(this,i)||this).black=void 0,n.wait=null,n.notify=null,n.notifyItem=null;var e=n.addComponent(l);return e.isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0,e.alignMode=2,e.enabled=!0,n.init(),n}i(n,t);var s=n.prototype;return s.init=function(){this.layer=e.Enum.UI_2D,this.black=this.addComponent(o),this.black.enabled=!1},s.waitOpen=function(){null==this.wait&&(this.wait=r.createPrefabNode("common/prefab/wait")),null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0)},s.waitClose=function(){this.wait&&this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)},s.toast=function(t,i){var n=this;null==this.notify&&(this.notify=r.createPrefabNode("common/prefab/notify"),this.notifyItem=this.notify.children[0],this.notifyItem.parent=null),this.notify.parent=this;var e=a(this.notifyItem),o=e.getChildByName("prompt").getComponent(h);e.parent=this.notify,o.onComplete=function(){0==n.notify.children.length&&(n.notify.parent=null)},o.toast(t,i),this.notify.children.length>3&&this.notify.children[0].destroy()},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewUtil.ts","./LayerUI.ts"],(function(e){var t,n,s,i,o,a,c,r,h,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,s=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.Layers,c=e.BlockInputEvents,r=e.Node},function(e){h=e.ViewUtil},function(e){u=e.LayerUI}],execute:function(){o._RF.push({},"25d07BQBCFADaSsh/I3GrTX","LayerPopup",void 0);e("LayerPopUp",function(e){function o(t){var n;return(n=e.call(this,t)||this).black=void 0,n.mask=void 0,n.init(),n}t(o,e);var u=o.prototype;return u.init=function(){this.layer=a.Enum.UI_2D,this.black=this.addComponent(c),this.black.enabled=!1},u.showUi=function(){var t=s(i().mark((function t(n){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.prototype.showUi.call(this,n);case 2:return(s=t.sent)&&(this.openVacancyRemove(n.config),this.black.enabled=!0),t.abrupt("return",s);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.onCloseWindow=function(t){e.prototype.onCloseWindow.call(this,t),this.setBlackDisable()},u.setBlackDisable=function(){0==this.ui_nodes.size&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())},u.closeMask=function(){if(null!=this.mask){for(var e,t=!0,s=n(this.ui_nodes.values());!(e=s()).done;){if(e.value.config.mask){t=!1;break}}t&&(this.mask.parent=null)}},u.openVacancyRemove=function(e){this.hasEventListener(r.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(r.EventType.TOUCH_END,this.onTouchEnd,this),null==this.mask&&(this.mask=h.createPrefabNode("common/prefab/mask")),e.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0))},u.closeVacancyRemove=function(){for(var e,t=!0,s=n(this.ui_nodes.values());!(e=s()).done;){if(e.value.config.vacancy){t=!1;break}}t&&this.hasEventListener(r.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(r.EventType.TOUCH_END,this.onTouchEnd,this)},u.onTouchEnd=function(e){var t=this;e.target===this&&this.ui_nodes.forEach((function(e){e.valid&&e.config.vacancy&&t.remove(e.config.prefab,e.config.destroy)}))},u.clear=function(t){e.prototype.clear.call(this,t),this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask()},o}(u));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./Defines.ts","./DelegateComponent.ts"],(function(e){var n,t,i,o,a,r,s,u,c,l,d;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.Widget,r=e.Node,s=e.instantiate,u=e.Prefab},function(e){c=e.oops},function(e){l=e.ViewParams},function(e){d=e.DelegateComponent}],execute:function(){o._RF.push({},"bc8b86Br9dGeKxeLijkyJKE","LayerUI",void 0);e("LayerUI",function(e){function o(n){var t;(t=e.call(this,n)||this).onOpenFailure=null,t.ui_nodes=new Map,t.ui_cache=new Map;var i=t.addComponent(a);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,t}n(o,e);var r=o.prototype;return r.add=function(e,n,t){if(this.ui_nodes.has(e.prefab))console.warn("路径为【"+e.prefab+"】的预制重复加载");else{var i=this.ui_cache.get(e.prefab);null==i&&((i=new l).config=e),this.ui_nodes.set(e.prefab,i),i.params=null!=n?n:{},i.callbacks=null!=t?t:{},i.valid=!0,this.load(i,e.bundle)}},r.load=function(){var e=t(i().mark((function e(n,t){var o,a,r,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=setTimeout(this.onLoadingTimeoutGui,c.config.game.loadingTimeoutGui),!n||!n.node){e.next=6;break}return e.next=4,this.showUi(n);case 4:e.next=22;break;case 6:return t=t||c.res.defaultBundleName,e.next=9,c.res.loadAsync(t,n.config.prefab,u);case 9:if(!(a=e.sent)){e.next=20;break}return r=s(a),n.node=r,(l=r.addComponent(d)).vp=n,l.onCloseWindow=this.onCloseWindow.bind(this),e.next=18,this.showUi(n);case 18:e.next=22;break;case 20:console.warn("路径为【"+n.config.prefab+"】的预制加载失败"),this.failure(n);case 22:c.gui.waitClose(),clearTimeout(o);case 24:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),r.onLoadingTimeoutGui=function(){c.gui.waitOpen()},r.onCloseWindow=function(e){this.ui_nodes.delete(e.config.prefab)},r.showUi=function(){var e=t(i().mark((function e(n){var t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.node.getComponent(d),e.next=3,t.add();case 3:return(o=e.sent)?(n.node.parent=this,n.valid=!0):(console.warn("路径为【"+n.config.prefab+"】的自定义预处理逻辑异常.检查预制上绑定的组件中 onAdded 方法,返回true才能正确完成窗口显示流程"),this.failure(n)),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),r.failure=function(e){this.onCloseWindow(e),e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure(),this.onOpenFailure&&this.onOpenFailure()},r.remove=function(e,n){var t=void 0;void 0!==n&&(t=n);var i=this.ui_nodes.get(e);i&&(void 0===t&&(t=void 0===i.config.destroy||i.config.destroy),!1===t&&this.ui_cache.set(i.config.prefab,i),i.node.getComponent(d).remove(t));!0===t&&this.removeCache(e)},r.removeCache=function(e){var n=this.ui_cache.get(e);n&&(this.onCloseWindow(n),this.ui_cache.delete(e),n.node.destroy())},r.get=function(e){var n=this.ui_nodes.get(e);return n?n.node:null},r.has=function(e){return this.ui_nodes.has(e)},r.clear=function(e){var n=this;this.ui_nodes.forEach((function(t,i){n.remove(t.config.prefab,e),t.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach((function(e,t){n.removeCache(t)}))},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b7a864Zpb5N4Zm7onWE1i9D","LayerUtil",void 0);var i=e("LayerItem",function(){function e(e,n){this._value=void 0,this._name=void 0,this._value=e,this._name=n}return n(e,[{key:"value",get:function(){return this._value}},{key:"name",get:function(){return this._name}},{key:"mask",get:function(){return 1<<this._value}}]),e}()),r=e("LayerUtil",function(){function e(){}return e.setNodeLayer=function(n,t){t.layer=n.mask,t.children.forEach((function(t){t.layer=n.mask,e.setNodeLayer(n,t)}))},e}());r.MAP=new i(0,"MAP"),r.AVATAR=new i(1,"AVATAR"),r.IGNORE_RAYCAST=new i(20,"IGNORE_RAYCAST"),r.GIZMOS=new i(21,"GIZMOS"),r.EDITOR=new i(22,"EDITOR"),r.UI_3D=new i(23,"UI_3D"),r.SCENE_GIZMO=new i(24,"SCENE_GIZMO"),r.UI_2D=new i(25,"UI_2D"),r.PROFILTER=new i(28,"PROFILTER"),r.DEFAULT=new i(30,"DEFAULT"),t._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts"],(function(t){var o,e,r,n,i;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator},function(t){n=t.ecs},function(t){i=t.CCComp}],execute:function(){var u;e._RF.push({},"654339gru9LwY58qZb9wJXE","LayoutViewComp",void 0);var s=r.ccclass;r.property,t("LayoutViewComp",s("LayoutViewComp")(u=n.register("LayoutView",!1)(u=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var r=e.prototype;return r.start=function(){},r.reset=function(){this.node.destroy()},e}(i))||u)||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f4d36IVkDZEFYGJyOy6wiZw","List",void 0);e("List",function(){function e(e){void 0===e&&(e=!0),this.element=void 0,this.only=!1,this.count=0,this.only=e,this.element=[]}var n=e.prototype;return n.push=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.push(e),this.count=this.element.length,!0},n.unshift=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.unshift(e),this.count=this.element.length,!0},n.pop=function(){if(this.element.length>0){var e=this.element.pop();return this.count=this.element.length,e}return null},n.shift=function(){if(this.element.length>0){var e=this.element.shift();return this.count=this.element.length,e}return null},n.removeAt=function(e){if(e>=this.element.length)throw new Error("删除索引超出范围！");var t=this.element[e];return this.element.splice(e,1),this.count=this.element.length,t},n.remove=function(e){var t=this.element.indexOf(e);if(t<0)throw new Error("要删除的内容不在列表中！"+e);this.element[t];this.element.splice(t,1),this.count=this.element.length},n.clear=function(){this.count=0,this.element.length=0},n.has=function(e){return this.find(e)>=0},n.find=function(e){return this.element.indexOf(e)},n.findIndex=function(e){return this.element.findIndex(e)},n.get=function(e){if(e>=this.element.length)throw new Error("超出索引范围:"+e+"/"+this.element.length);return this.element[e]},t(e,[{key:"elements",get:function(){return this.element}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,n,r,e,a,l,c;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,l=t.Node,c=t.Component}],execute:function(){var s,d,u,p,g;e._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);var h=a.ccclass,f=a.property;t("LoadingIndicator",(s=h("LoadingIndicator"),d=f(l),s((g=o((p=function(t){function o(){for(var o,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return o=t.call.apply(t,[this].concat(e))||this,n(o,"loading",g,r(o)),o.loading_rotate=0,o}return i(o,t),o.prototype.update=function(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)},o}(c)).prototype,"loading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts","./GameUIConfig.ts","./SingletonModuleComp.ts","./ModuleUtil.ts","./BackgroundViewComp.ts","./LayoutViewComp.ts","./ViewModel.ts","./HomeViewComp.ts","./formatCurrency.ts"],(function(t){var e,n,o,a,r,s,i,u,c,l,p,d,g,h,f,m,C;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,s=t.sys},function(t){i=t.oops},function(t){u=t.ecs},function(t){c=t.CCVMParentComp},function(t){l=t.UIID},function(t){p=t.smc},function(t){d=t.ModuleUtil},function(t){g=t.BackgroundViewComp},function(t){h=t.LayoutViewComp},function(t){f=t.VM},function(t){m=t.HomeViewComp},function(t){C=t.format}],execute:function(){var w;a._RF.push({},"529aa6rvWtEsoenGUjDbZg7","LoadingViewComp",void 0);var y=r.ccclass;r.property,t("LoadingViewComp",y("LoadingViewComp")(w=u.register("LoadingView",!1)(w=function(t){function a(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).data={finished:0,total:0,progress:"0",prompt:""},e.progress=0,e}e(a,t);var r=a.prototype;return r.start=function(){s.isNative||this.enter()},r.reset=function(){},r.enter=function(){this.loadRes()},r.loadRes=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.data.progress="0",t.next=3,this.loadCustom();case 3:return t.next=5,this.loadGameRes();case 5:return t.next=7,this.loadGameBundle();case 7:return t.next=9,this.loadGameAudio();case 9:return t.next=11,this.loadTextures();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.loadCustom=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.data.prompt=i.language.getLangByID("로드 중...");case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.loadGameBundle=function(){this.data.prompt=i.language.getLangByID("로드 중..."),i.res.load("game",this.onProgressCallback.bind(this))},r.loadGameRes=function(){this.data.prompt=i.language.getLangByID("로드 중..."),i.res.loadDir("game",this.onProgressCallback.bind(this))},r.loadGameAudio=function(){this.data.prompt=i.language.getLangByID("로드 중..."),i.res.loadDir("audios",this.onProgressCallback.bind(this))},r.loadTextures=function(){this.data.prompt=i.language.getLangByID("로드 중..."),i.res.loadDir("textures",this.onProgressCallback.bind(this),this.onCompleteCallback.bind(this))},r.onProgressCallback=function(t,e){this.data.finished=t,this.data.total=e;var n=t/e;n>this.progress&&(this.progress=n,this.data.progress=(100*n).toFixed(2))},r.onCompleteCallback=function(){var t=n(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.data.prompt=i.language.getLangByID("로드 중..."),d.addViewUi(this.ent,g,l.Background),!(e=i.storage.get("userId"))){t.next=25;break}return t.prev=4,i.gui.waitOpen(),t.next=8,p.account.getUserInfo(e);case 8:if(n=t.sent){t.next=11;break}throw new Error("Account not found");case 11:return f.setValue("Account.data",n),f.setValue("Account.balance",C(n.chipsAmount,!0)),d.addViewUi(this.ent,h,l.Layout),d.addViewUi(this.ent,m,l.Home),t.abrupt("return");case 18:t.prev=18,t.t0=t.catch(4),i.storage.remove("userId"),console.log(t.t0);case 22:return t.prev=22,i.gui.waitClose(),t.finish(22);case 25:return t.next=27,i.gui.openAsync(l.Login);case 27:case"end":return t.stop()}}),t,this,[[4,18,22,25]])})));return function(){return t.apply(this,arguments)}}(),a}(c))||w)||w);a._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy,i=t.log}],execute:function(){n._RF.push({},"479cdJANP5KaJgU+8z0DdSE","Logger",void 0);var e=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({})),o={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"},s=t("Logger",function(){function t(){}return t.init=function(){this.tags=e.Net|e.Model|e.Business|e.View|e.Config|e.Trace},t.setTags=function(t){void 0===t&&(t=null),t&&(this.tags=t)},t.start=function(t){void 0===t&&(t="Time"),console.time(t)},t.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},t.table=function(t,n){this.isOpen(e.Trace)&&console.table(t)},t.trace=function(t,n){(void 0===n&&(n="color:#ffffff;"),this.isOpen(e.Trace))&&(console.log||i).call(null,"%c%s%s",n,this.getDateString(),t)},t.logNet=function(t,n){this.orange(e.Net,t,n)},t.logModel=function(t,n){this.violet(e.Model,t,n)},t.logBusiness=function(t,n){this.blue(e.Business,t,n)},t.logView=function(t,n){this.green(e.View,t,n)},t.logConfig=function(t,n){this.gray(e.Config,t,n)},t.orange=function(t,n,i){this.print(t,n,"color:#ee7700;",i)},t.violet=function(t,n,i){this.print(t,n,"color:Violet;",i)},t.blue=function(t,n,i){this.print(t,n,"color:#3a5fcd;",i)},t.green=function(t,n,i){this.print(t,n,"color:green;",i)},t.gray=function(t,n,i){this.print(t,n,"color:gray;",i)},t.isOpen=function(t){return 0!=(this.tags&t)},t.print=function(t,n,e,s){if(this.isOpen(t)){var r=console.log||i,c=o[t];s?r.call(null,"%c%s%s%s:%s%o",e,this.getDateString(),"["+c+"]",this.stack(5),s,n):r.call(null,"%c%s%s%s:%o",e,this.getDateString(),"["+c+"]",this.stack(5),n)}},t.stack=function(t){var n=(new Error).stack.split("\n"),i=[];n.forEach((function(t){var n,e=(t=t.substring(7)).split(" ");e.length<2?i.push(e[0]):i.push(((n={})[e[0]]=e[1],n))}));var e,o=[],s=[];if(t<i.length-1)for(var r in i[t])if(2==(s=r.split(".")).length)o=s.concat();else{var c=(e=i[t][r]).lastIndexOf("/"),l=e.lastIndexOf(".");if(c>-1&&l>-1){var g=e.substring(c+1,l);o.push(g)}else o.push(e)}return 1==o.length?"["+o[0]+".ts]":2==o.length?"["+o[0]+".ts->"+o[1]+"]":""},t.getDateString=function(){var t=new Date,n=t.getHours().toString(),i="";return i+=(1==n.length?"0"+n:n)+":",i+=(1==(n=t.getMinutes().toString()).length?"0"+n:n)+":",i+=(1==(n=t.getSeconds().toString()).length?"0"+n:n)+":",1==(n=t.getMilliseconds().toString()).length&&(n="00"+n),2==n.length&&(n="0"+n),i="["+(i+=n)+"]"},t}());s.tags=0,s.init(),n._RF.pop()}}}));

System.register("chunks:///_virtual/LoginViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCComp.ts","./GameUIConfig.ts","./SingletonModuleComp.ts"],(function(n){var e,t,r,o,i,s,a,u,c,p,l,f,g,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,o=n.assertThisInitialized,i=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){a=n.cclegacy,u=n._decorator,c=n.EditBox},function(n){p=n.oops},function(n){l=n.ecs},function(n){f=n.CCComp},function(n){g=n.UIID},function(n){m=n.smc}],execute:function(){var d,h,w,y,C,v,b,L;a._RF.push({},"55f12Lv8ChAHZYEntivE3wV","LoginViewComp",void 0);var V=u.ccclass,_=u.property;n("LoginViewComp",(d=V("LoginViewComp"),h=l.register("LoginView",!1),w=_(c),y=_(c),d(C=h((b=e((v=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e=n.call.apply(n,[this].concat(i))||this,r(e,"username",b,o(e)),r(e,"password",L,o(e)),e}t(e,n);var a=e.prototype;return a.btn_register=function(n){p.gui.remove(g.Login,!0),p.gui.openAsync(g.Register),n.propagationStopped=!0},a.btn_login=function(){var n=i(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=m.account,n.next=3,t.login(this.username.string,this.password.string);case 3:e.propagationStopped=!0;case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.reset=function(){this.node.destroy()},e}(f)).prototype,"username",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"password",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./formatCurrency.ts","./CardUtils.ts","./Main.ts","./NetworkManager.ts","./PositionUtils.ts","./SpriteHelper.ts","./Toast.ts","./WebWorker.ts","./Account.ts","./AccountNetData.ts","./AccountModelComp.ts","./AccountViewComp.ts","./LoginViewComp.ts","./GameEvent.ts","./GameResPath.ts","./GameUIConfig.ts","./SingletonModuleComp.ts","./Initialize.ts","./InitRes.ts","./BackgroundViewComp.ts","./HomeViewComp.ts","./LayoutViewComp.ts","./LoadingViewComp.ts","./Match.ts","./matchInit.ts","./MatchModelComp.ts","./RebuyModelComp.ts","./BoardViewComp.ts","./CardViewComp.ts","./MathViewComp.ts","./PlayerViewComp.ts","./SpinViewComp.ts","./StatusViewComp.ts","./ToolsViewComp.ts","./Player2.ts","./PlayerEvent.ts","./TableEvent.ts","./PlayerInit.ts","./RoomModelComp.ts","./TableModelComp.ts","./RoomViewComp.ts","./TableViewComp.ts","./AccountDropdownViewComp.ts","./ButtonPlayViewComp.ts","./HeaderViewComp.ts","./MaskViewComp.ts","./RoomItemViewComp.ts","./TableConfirmViewComp.ts","./TableItemViewComp.ts","./VolumeViewComp.ts","./displayobjectView.ts","./Default.ts","./DefaultComp.ts","./ecsmodule.ts","./DefaultViewComp2.ts","./DefaultViewComp.ts","./player.ts","./Oops.ts","./Root.ts","./AudioEffect.ts","./AudioEffectPool.ts","./AudioManager.ts","./AudioMusic.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./RandomManager.ts","./SeedRandom.ts","./StorageManager.ts","./StorageSecurityCrypto.ts","./StorageSecuritySimple.ts","./Timer.ts","./TimerManager.ts","./GameManager.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./ArrayUtil.ts","./CameraUtil.ts","./DeviceUtil.ts","./EncryptUtil.ts","./ImageUtil.ts","./JsonUtil.ts","./LayerUtil.ts","./MathUtil.ts","./ObjectUtil.ts","./PhysicsUtil.ts","./PlatformUtil.ts","./RegexUtil.ts","./RotateUtil.ts","./StringUtil.ts","./TimeUtils.ts","./Vec3Util.ts","./ViewUtil.ts","./Ambilight.ts","./FlashSpine.ts","./FlashSprite.ts","./SpineFinishedRelease.ts","./Effect2DFollow3D.ts","./EffectDelayRelease.ts","./EffectEvent.ts","./EffectFinishedRelease.ts","./EffectSingleCase.ts","./MoveRigidBody.ts","./MoveTo.ts","./MoveTranslate.ts","./AnimatorAnimation.ts","./AnimatorCustomization.ts","./AnimatorDragonBones.ts","./AnimatorSkeletal.ts","./AnimatorSpine.ts","./AnimatorSpineSecondary.ts","./AnimatorBase.ts","./AnimatorCondition.ts","./AnimatorController.ts","./AnimatorParams.ts","./AnimatorState.ts","./AnimatorStateLogic.ts","./AnimatorTransition.ts","./BTreeNode.ts","./BehaviorTree.ts","./BranchNode.ts","./Decorator.ts","./IControl.ts","./Priority.ts","./Selector.ts","./Sequence.ts","./Task.ts","./index.ts","./FreeFlightCamera.ts","./OrbitCamera.ts","./AsyncQueue.ts","./Collection.ts","./List.ts","./ECS.ts","./ECSComp.ts","./ECSEntity.ts","./ECSGroup.ts","./ECSMask.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts","./ArrayExt.ts","./DateExt.ts","./DirectorExt.ts","./NodeDragExt.ts","./NodeExt.ts","./ButtonEffect.ts","./ButtonSimple.ts","./ButtonTouchLong.ts","./UIButton.ts","./LabelChange.ts","./LabelNumber.ts","./LabelTime.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./JsonOb.ts","./StringFormat.ts","./VMBase.ts","./VMCompsEdit.ts","./VMCustom.ts","./VMEnv.ts","./VMEvent.ts","./VMLabel.ts","./VMModify.ts","./VMParent.ts","./VMProgress.ts","./VMState.ts","./ViewModel.ts","./BhvButtonGroup.ts","./BhvFrameIndex.ts","./BhvRollNumber.ts","./BhvSwitchPage.ts","./HttpRequest.ts","./NetInterface.ts","./NetManager.ts","./NetNode.ts","./NetProtocolPako.ts","./WebSock.ts","./RtToModel.ts","./RtToSprite.ts","./CCComp.ts","./CCVMParentComp.ts","./GameCollision.ts","./GameComponent.ts","./ModuleUtil.ts","./BuildTimeConstants.ts","./Config.ts","./GameConfig.ts","./GameQueryConfig.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./Root.ts","./ECS.ts","./SingletonModuleComp.ts","./Initialize.ts","./GameUIConfig.ts","./NetworkManager.ts","./WebWorker.ts"],(function(t){var n,i,o,e,u,r,c,s,a,f,p;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){e=t.oops},function(t){u=t.Root},function(t){r=t.ecs},function(t){c=t.smc},function(t){s=t.Initialize},function(t){a=t.UIConfigData},function(t){f=t.NetworkManager},function(t){p=t.WebWorker}],execute:function(){var l;i._RF.push({},"49583MQq+pKX4/X8i+MmLu9","Main",void 0);var g=o.ccclass;o.property,t("Main",g("Main")(l=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var o=i.prototype;return o.start=function(){},o.run=function(){c.initialize=r.getEntity(s),c.network=r.getEntity(f),c.worker=r.getEntity(p)},o.initGui=function(){e.gui.init(a),e.audio.volumeMusic=.5,e.audio.playMusicLoop("audios/sound_home")},i}(u))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/MaskViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts"],(function(e){var t,i,o,n,s,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,n=e.view,s=e.UITransform},function(e){r=e.ecs},function(e){c=e.CCComp}],execute:function(){var u;i._RF.push({},"844e7FoV6VPhK4akGx5wvHd","MaskViewComp",void 0);var a=o.ccclass;o.property,e("MaskViewComp",a("MaskViewComp")(u=r.register("MaskView",!1)(u=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var o=i.prototype;return o.start=function(){this.updateDemission()},o.updateDemission=function(){var e=n.getVisibleSize(),t=this.node.getComponent(s);t&&t.setContentSize(e.width,e.height)},o.reset=function(){this.node.destroy()},i}(c))||u)||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/Match.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./MatchModelComp.ts","./Oops.ts","./ViewModel.ts","./GameUIConfig.ts","./SingletonModuleComp.ts","./matchInit.ts","./GameEvent.ts","./RebuyModelComp.ts","./ViewUtil.ts","./formatCurrency.ts"],(function(t){var e,n,r,a,u,i,c,o,s,l,p,f,d,h,v;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy},function(t){u=t.ecs},function(t){i=t.MatchModelComp},function(t){c=t.oops},function(t){o=t.VM},function(t){s=t.UIID},function(t){l=t.smc},function(t){p=t.MatchInitComp},function(t){f=t.GameEvent},function(t){d=t.RebuyModelComp},function(t){h=t.ViewUtil},function(t){v=t.format}],execute:function(){var g;a._RF.push({},"6140fwWWmRLy70bRzjitR1X","Match",void 0);t("Match",u.register("Match")(g=function(t){function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).MatchModel=void 0,e.RebuyModel=void 0,e.MatchView=void 0,e.PlayerView=void 0,e.ToolsView=void 0,e}e(a,t);var u=a.prototype;return u.init=function(){this.addComponents(i,d),this.add(p)},u.exitMatch=function(){var t=n(r().mark((function t(){var e,n,a,u,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.getValue("Account.data"),n=o.getValue("Match.table"),a=o.getValue("Match.player"),t.prev=3,c.gui.waitOpen(),e&&n&&a){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,l.player.getTable(n.id);case 9:if(i=t.sent){t.next=13;break}return c.gui.toast("Success: Ширээнээс гарахад алдаа гарлаа"),t.abrupt("return");case 13:if(null==(u=i.players)?void 0:u.find((function(t){return t.userId===e.id}))){t.next=17;break}return c.gui.toast("Success: Ширээнээс гарахад алдаа гарлаа"),t.abrupt("return");case 17:return t.next=19,l.player.deletePlayer(n.id,a.id);case 19:c.message.dispatchEvent(f.EXIT_GAME),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),c.gui.toast(""+t.t0);case 25:return t.prev=25,c.gui.waitClose(),c.gui.remove(s.Match,!0),c.gui.openAsync(s.Table,null==n?void 0:n.roomId),t.finish(25);case 30:case"end":return t.stop()}}),t,null,[[3,22,25,30]])})));return function(){return t.apply(this,arguments)}}(),u.loadPlayers=function(){var t=n(r().mark((function t(){var e,n,a,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.getValue("Match.table"),t.prev=1,c.gui.waitOpen(),t.next=5,fetch(c.http.server+"/players/table/"+e.id,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:return n=t.sent,t.next=8,n.json();case 8:if(!(a=t.sent).status){t.next=11;break}throw new Error(a.message);case 11:return(u=a.find((function(t){return t.userId===o.getValue("Account.data.id")})))&&o.setValue("Account.balance",v(u.user.chipsAmount,!0)),c.message.dispatchEvent(f.UPDATE_PLAYER_LIST,a),t.abrupt("return",a);case 17:t.prev=17,t.t0=t.catch(1),c.gui.toast(""+t.t0);case 20:return t.prev=20,c.gui.waitClose(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[1,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),u.createEmptyCard=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.createPrefabNodeAsync("gui/prefab/card","bundle");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u.getLastBetParticipant=function(){var t=o.getValue("Match.player"),e=o.getValue("Match.players"),n=o.getValue("Match.match");if(!n||!e.length||!t)return null;var r;if(-1===(r=e.findIndex((function(e){return e.id===t.id}))))return null;var a=r-1<0?e.length-1:r-1,u=null==n?void 0:n.participants.find((function(t){return t.playerId===e[a].id}));return u||null},u.destroy=function(){t.prototype.destroy.call(this)},a}(u.Entity))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/matchInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(t){var n,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.ecs}],execute:function(){var i,o;e._RF.push({},"6497dHcfmRIn4B9BIbzKNp8","matchInit",void 0);var c=t("MatchInitComp",r.register("MatchInit")(i=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.reset=function(){},e}(r.Comp))||i);t("MatchInitSystem",r.register("Match")(o=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.filter=function(){return r.allOf(c)},i.entityEnter=function(t){t.MatchModel.vmAdd(),t.RebuyModel.vmAdd(),t.remove(c)},e}(r.ComblockSystem))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/MatchModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(t){var i,e,n,s,h;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy},function(t){s=t.ecs},function(t){h=t.VM}],execute:function(){var r;n._RF.push({},"5614d5yESxAKpiaHYGLZmTC","MatchModelComp",void 0);t("MatchModelComp",s.register("MatchModel")(r=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).vm=new o,i}i(n,t);var s=n.prototype;return s.vmAdd=function(){h.add(this.vm,"Match")},s.vmRemove=function(){this.vm.reset(),h.remove("Match")},s.reset=function(){this.vmRemove()},e(n,[{key:"roomId",get:function(){return this.vm.roomId},set:function(t){this.vm.roomId=t}},{key:"table",get:function(){return this.vm.table},set:function(t){this.vm.table=t}},{key:"participants",get:function(){return this.vm.participants},set:function(t){this.vm.participants=t}},{key:"match",get:function(){return this.vm.match},set:function(t){this.vm.match=t}},{key:"highlightCards",get:function(){return this.vm.highlightCards},set:function(t){this.vm.highlightCards=t}},{key:"players",get:function(){return this.vm.players},set:function(t){console.log("set players",t),this.vm.players=t}},{key:"player",get:function(){return this.vm.player},set:function(t){this.vm.player=t}},{key:"isShuffle",get:function(){return this.vm.isShuffle},set:function(t){this.vm.isShuffle=t}},{key:"isNextMatchComing",get:function(){return this.vm.isNextMatchComing},set:function(t){this.vm.isNextMatchComing=t}},{key:"isHandVisible",get:function(){return this.vm.isHandVisible},set:function(t){this.vm.isHandVisible=t}}]),n}(s.Comp))||r);var o=function(){function t(){this.roomId=null,this.table=null,this.match=null,this.participants=[],this.players=[],this.player=null,this.highlightCards=[],this.isShuffle=!1,this.isNextMatchComing=!1,this.isHandVisible=!1}return t.prototype.reset=function(){this.table=null,this.match=null,this.participants=[],this.players=[],this.highlightCards=[],this.player=null,this.isShuffle=!1,this.isNextMatchComing=!1,this.isHandVisible=!1},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8c615ZS4PRMPKPA9ZqKjiJC","MathUtil",void 0);var r=t("MathUtil",function(){function t(){}return t.sign=function(t){return t>0?1:t<0?-1:0},t.progress=function(t,n,r){return t+(n-t)*r},t.lerp=function(t,n,r){return r>1?r=1:r<0&&(r=0),t*(1-r)+n*r},t.lerpAngle=function(n,r,e){var u=(r%=360)-(n%=360);return u>180?r=n-(360-u):u<-180&&(r=n+(360+u)),(t.lerp(n,r,e)%360+360)%360},t.angleTowards=function(t,n,r){var e=(n%=360)-(t%=360);e>180?n=t-(360-e):e<-180&&(n=t+(360+e));var u=n-t;return r>Math.abs(u)?n:((t+r*Math.sign(u))%360+360)%360},t.clamp=function(t,n,r){return t<n?n:t>r?r:t},t.probability=function(t){return Math.random()<t},t}());r.deg2Rad=Math.PI/180,r.rad2Deg=180/Math.PI,n._RF.pop()}}}));

System.register("chunks:///_virtual/MathViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCComp.ts","./SingletonModuleComp.ts","./ViewModel.ts","./TableEvent.ts","./PlayerViewComp.ts","./Oops.ts","./PlayerEvent.ts","./formatCurrency.ts"],(function(t){var e,a,i,n,o,r,s,c,l,u,h,p,d,f,M,y,m,g,A,T,v,E,V;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.extends,r=t.createForOfIteratorHelperLoose,s=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,h=t.v3,p=t.Node,d=t.Prefab,f=t.instantiate},function(t){M=t.ecs},function(t){y=t.CCComp},function(t){m=t.smc},function(t){g=t.VM},function(t){A=t.TableEvent},function(t){T=t.PlayerViewComp},function(t){v=t.oops},function(t){E=t.PlayerEvent},function(t){V=t.format}],execute:function(){var C,I,_,S,P,b,D,k;l._RF.push({},"79ebadLV3xAa4d9Y0nNNpja","MathViewComp",void 0);var N=u.ccclass,L=u.property,R={1:[h(0,210,0)],2:[h(-140,210,0),h(165,210,0)],3:[h(-310,210,0),h(10,210,0),h(330,210,0)],4:[h(-488,210,0),h(-140,210,0),h(165,210,0),h(453,210,0)],5:[h(-622,-130,0),h(-488,210,0),h(-140,210,0),h(165,210,0),h(453,210,0)],6:[h(-622,-130,0),h(-620,24,0),h(-488,210,0),h(-140,210,0),h(165,210,0),h(453,210,0)],7:[h(-622,-130,0),h(-620,24,0),h(-488,210,0),h(-140,210,0),h(165,210,0),h(453,210,0),h(615,31,0)],8:[h(-622,-130,0),h(-620,24,0),h(-488,210,0),h(-140,210,0),h(165,210,0),h(453,210,0),h(615,31,0),h(615,-130,0)]};t("MatchViewComp",(C=N("MatchViewComp"),I=M.register("MatchView",!1),_=L(p),S=L(d),C(P=I((D=e((b=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"playersNode",D,n(e)),i(e,"playerPrefab",k,n(e)),e.initMatchTimeout=void 0,e.socket=void 0,e}a(e,t);var l=e.prototype;return l.onAdded=function(t){g.setValue("Match.table",t)},l.onLoad=function(){var t=this;this.loadPlayers(),this.socket=m.network.io,this.socket.on(A.MATCH_STARTED,(function(t){console.log("MATCH_STARTED",g),g.setValue("Match.match",null),g.setValue("Match.participants",[]),g.setValue("Match.highlightCards",null),g.setValue("Match.isHandVisible",!1);var e=t.match;if(e){g.setValue("Match.isShuffle",!0),g.setValue("Match.match",e),g.setValue("Match.isNextMatchComing",!1),g.setValue("Match.participants",e.participants);var a=g.getValue("Match.players").map((function(e){return o({},e,{isTurn:e.id===t.playerId})}));g.setValue("Match.players",a),v.message.dispatchEvent(A.MATCH_STARTED,t)}})),this.socket.on(A.TABLE_MESSAGE,(function(t){v.gui.toast("Success: "+t.message),v.message.dispatchEvent(A.TABLE_MESSAGE,t)})),this.socket.on(A.JOIN_TABLE,(function(e){if(e.tableId===g.getValue("Match.table").id){var a=g.getValue("Match.players").filter((function(t){return t.id!==e.player.id}));g.setValue("Match.players",[].concat(a,[e.player])),t.loadPlayerNode(t,e.player),t.socket.emit(A.TABLE_JOINED,{tableId:e.tableId,player:e.player}),v.message.dispatchEvent(A.JOIN_TABLE,e),t.updatePlayersContent(t)}})),this.socket.on(A.LEAVE_TABLE,(function(e){var a=g.getValue("Match.table");if((null==a?void 0:a.id)===e.tableId){var i=g.getValue("Match.players").filter((function(t){return t.id!==e.playerId}));g.setValue("Match.players",i),t.socket.emit(A.TABLE_LEFT,{tableId:e.tableId,playerId:e.playerId}),v.message.dispatchEvent(A.LEAVE_TABLE,e),t.updatePlayersContent(t)}})),this.socket.on(E.CHANGE_TURN,(function(e){v.message.dispatchEvent(E.CHANGE_TURN,e),t.changeTurn(t,e)})),this.socket.on(E.PLAYERS_UPDATED,(function(t){var e=g.getValue("Match.players").map((function(t){return o({},t,{isTurn:!1})}));g.setValue("Match.players",e),t.match&&(g.setValue("Rebuy.canAutoRebuy",!0),v.message.dispatchEvent(E.PLAYERS_UPDATED,t))})),this.socket.on(E.PARTICIPANTS_UPDATED,(function(t){var e=g.getValue("Match.participants").map((function(e){return t.participant.id===e.id?t.participant:e}));g.setValue("Match.participants",e),v.message.dispatchEvent(E.PARTICIPANTS_UPDATED,t)})),this.socket.on(E.REBUY,(function(e){var a=g.getValue("Match.players").map((function(t){return t.id===e.player.id?e.player:t}));g.setValue("Match.players",a),t.socket.emit(E.REBOUGHT,{tableId:e.tableId,player:e.player}),v.message.dispatchEvent(E.REBUY,e)})),this.socket.on(E.HIGHLIGHT_CARDS,(function(t){var e=decodeURIComponent(Array.from(atob(t)).map((function(t){return"%"+t.charCodeAt(0).toString(16).padStart(2,"0")})).join("")),a=JSON.parse(e);if(a){var i=a.playerHighlightSet,n=g.getValue("Match.players");if(!g.getValue("Match.player")||!n)return;g.setValue("Match.highlightCards",i)}})),this.socket.on(E.NEXT_MATCH_IS_COMING,(function(t){var e=g.getValue("Match.players");if(t.isComing){if(e.length<=1)return void g.setValue("Match.isNextMatchComing",!1);g.setValue("Match.isNextMatchComing",!0)}else g.setValue("Match.isNextMatchComing",!1)})),this.socket.on(E.UPDATE_MISSING_PLAYER_STACK,(function(t){var e=g.getValue("Match.players").map((function(e){return e.id===t.player.id?o({},e,{stack:t.player.stack}):e}));g.setValue("Match.players",e),v.message.dispatchEvent(E.UPDATE_MISSING_PLAYER_STACK,t)}))},l.loadPlayers=function(){var t=s(c().mark((function t(){var e,a,i,n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.match.loadPlayers();case 2:if(e=t.sent){t.next=6;break}return g.setValue("Match.players",[]),t.abrupt("return");case 6:for(g.setValue("Match.players",e),a=r(e);!(i=a()).done;)n=i.value,this.loadPlayerNode(this,n);o=g.getValue("Match.table"),e.length>=o.minPlayers&&this.initMatch();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.loadPlayerNode=function(t,e){var a=g.getValue("Account.data");if(e.userId===a.id)return g.setValue("Match.player",e),void g.setValue("Account.balance",V(e.user.chipsAmount,!0));var i=f(t.playerPrefab);i.getComponent(T).onAdded(e),t.playersNode.addChild(i),t.updatePlayersContent(t)},l.updatePlayersContent=function(t){var e=g.getValue("Match.players"),a=g.getValue("Match.player");if(e.length&&a){for(var i=e.findIndex((function(t){return t.id===a.id})),n=[].concat(e.slice(i+1),e.slice(0,i+1)),o=0;o<n.length-1;o++)for(var s,c=r(t.playersNode.children);!(s=c()).done;){var l=s.value;if(l){var u=l.getComponent(T).data;u&&u.id===n[o].id&&l.setSiblingIndex(o)}}for(var h=0;h<n.length-1;h++)for(var p=0;p<=h;p++){var d=t.playersNode.children[p];d&&d.setPosition(R[h+1][p])}}},l.exit=function(){var t=s(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.match.exitMatch();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l.initMatch=function(t,e){void 0===t&&(t=6e3),void 0===e&&(e=0),this.initMatchTimeout=setTimeout((function(){m.network.io.emit(A.START_INIT_MATCH,{tableId:g.getValue("Match.table").id,delay:e})}),t)},l.changeTurn=function(t,e){var a=g.getValue("Match.player");if(e.matchData&&a){var i,n,o=(null==(i=e.matchData.winners)?void 0:i.length)>0,r=g.getValue("Match.players")||[];if(e.matchData.isShowdown&&!e.matchData.isAllAllIn)a.id===(null==(n=r[0])?void 0:n.id)&&(console.log("initMatch1"),t.initMatch(3e3,8e3));var s,c=g.getValue("Match.match");if(c){var l,u,h,p;if(!e.matchData.isShowdown&&o)a.id===(null==(l=r[0])?void 0:l.id)&&(console.log("initMatch2"),t.initMatch(3e3,8e3));if(e.matchData.isShowdown&&e.matchData.isAllAllIn)a.id===(null==(u=r[0])?void 0:u.id)&&(console.log("initMatch3"),t.initMatch(3e3,9e3));if(!o&&!e.playerId)console.log("initMatch4"),null==(h=this.socket)||h.emit(E.FOLD,{tableId:g.getValue("Match.table").id,participantId:null==(p=c.participants[c.participants.length-1])?void 0:p.id})}if(o)null==(s=e.matchData.winMessages)||s.map((function(t){v.gui.toast("Success: You won "+t.content)}));g.setValue("Match.match",e.matchData),g.setValue("Match.participants",e.matchData.participants)}},l.onDestroy=function(){this.socket.off(A.JOIN_TABLE),this.socket.off(A.LEAVE_TABLE),this.socket.off(A.MATCH_STARTED),this.socket.off(A.TABLE_MESSAGE),this.socket.off(E.UPDATE_MISSING_PLAYER_STACK),this.socket.off(E.NEXT_MATCH_IS_COMING),this.socket.off(E.PARTICIPANTS_UPDATED),this.socket.off(E.PLAYERS_UPDATED),this.socket.off(E.REBUY),this.socket.off(E.HIGHLIGHT_CARDS),this.initMatchTimeout&&clearTimeout(this.initMatchTimeout)},l.resetCards=function(){},l.reset=function(){this.node.destroy()},e}(y)).prototype,"playersNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(b.prototype,"playerPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=b))||P)||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,s;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.warn,s=e.log}],execute:function(){n._RF.push({},"a401fY+wj9NsqOACoZ7Zy/R","MessageManager",void 0);var o=function(){this.event=void 0,this.listener=void 0,this.object=void 0},a=(e("MessageEventData",function(){function e(){this.events=new Map}var n=e.prototype;return n.on=function(e,t,n){var r=this.events.get(e);null==r&&(r=[],this.events.set(e,r));var s=new o;s.event=e,s.listener=t,s.object=n,r.push(s),i.on(e,t,n)},n.off=function(e){var n=this.events.get(e);if(n){for(var r,s=t(n);!(r=s()).done;){var o=r.value;i.off(e,o.listener,o.object)}this.events.delete(e)}},n.dispatchEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.dispatchEvent.apply(i,[e].concat(n))},n.clear=function(){for(var e=0,t=Array.from(this.events.keys());e<t.length;e++){var n=t[e];this.off(n)}},e}()),e("MessageManager",function(){function e(){this.events=new Map}var t=e.prototype;return t.on=function(e,t,n){if(e&&t){var s=this.events.get(e);null==s&&(s=[],this.events.set(e,s));for(var a=s.length,i=0;i<a;i++){var v=s[i];v.listener==t&&v.object==n&&r("名为【"+e+"】的事件重复注册侦听器")}var c=new o;c.event=e,c.listener=t,c.object=n,s.push(c)}else r("注册【"+e+"】事件的侦听器函数为空")},t.once=function(e,t,n){var r=this,s=function(o){r.off(e,s,n),s=null;for(var a=arguments.length,i=new Array(a>1?a-1:0),v=1;v<a;v++)i[v-1]=arguments[v];t.call(n,o,i)};this.on(e,s,n)},t.off=function(e,t,n){var r=this.events.get(e);if(r){for(var o=r.length,a=0;a<o;a++){var i=r[a];if(i.listener==t&&i.object==n){r.splice(a,1);break}}0==r.length&&this.events.delete(e)}else s("名为【"+e+"】的事件不存在")},t.dispatchEvent=function(e){var t=this.events.get(e);if(null!=t){for(var n=t.concat(),r=n.length,s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];for(var i=0;i<r;i++){var v,c=n[i];(v=c.listener).call.apply(v,[c.object,e].concat(o))}}},e}())),i=e("message",new a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ModuleUtil.ts",["cc","./Oops.ts","./ViewUtil.ts"],(function(n){var e,o,t;return{setters:[function(n){e=n.cclegacy},function(n){o=n.oops},function(n){t=n.ViewUtil}],execute:function(){e._RF.push({},"52a6cdAO5tGxaeE1TprZ5VK","ModuleUtil",void 0);n("ModuleUtil",function(){function n(){}return n.addViewUi=function(n,e,t,i){void 0===i&&(i=null);var u={onAdded:function(o,t){var i=o.getComponent(e);n.add(i)}};o.gui.open(t,i,u)},n.addViewUiAsync=function(n,e,t,i){return void 0===i&&(i=null),new Promise((function(u,d){var c={onAdded:function(o,t){var i=o.getComponent(e);n.add(i),u(o)},onLoadFailure:function(){u(null)}};o.gui.open(t,i,c)}))},n.addView=function(n,e,o,i){var u=t.createPrefabNode(i),d=u.getComponent(e);n.add(d),u.parent=o},n.removeViewUi=function(n,e,t,i){void 0===i&&(i=!0),n.remove(e,i),o.gui.remove(t,i)},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MoveRigidBody.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,n,s,a,p,l,c,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,p=t.Vec3,l=t.RigidBody,c=t.EPSILON,y=t.Component}],execute:function(){var d,u,h,g,_,f,v,m,b,B,M;s._RF.push({},"4e8cedkWeJDEZoUMtauac/M","MoveRigidBody",void 0);var w=a.ccclass,A=a.property,S=new p,z=new p;t("MoveRigidBody",(d=w("MoveRigidBody"),u=A({tooltip:"阻尼"}),h=A({tooltip:"重力"}),g=A({tooltip:"移动速度"}),_=A({tooltip:"速度比率"}),d((m=e((v=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"damping",m,o(e)),r(e,"gravity",b,o(e)),r(e,"_speed",B,o(e)),r(e,"_ratio",M,o(e)),e._rigidBody=null,e._grounded=!0,e._curMaxSpeed=0,e._prevAngleY=0,e._stateX=0,e._stateZ=0,e._velocity=new p,e}i(e,t);var s=e.prototype;return s.start=function(){this._rigidBody=this.getComponent(l),this._prevAngleY=this.node.eulerAngles.y},s.stop=function(){this._stateX=0,this._stateZ=0,this._rigidBody.clearVelocity()},s.update=function(t){this.applyGravity(),this.applyDamping(t),this.grounded&&this.applyLinearVelocity(S,1)},s.applyGravity=function(){var t=this.gravity,e=this._rigidBody.mass;z.set(0,e*t,0),this._rigidBody.applyForce(z)},s.applyDamping=function(t){this._rigidBody.getLinearVelocity(z),z.lengthSqr()>c&&(z.multiplyScalar(Math.pow(1-this.damping,t)),this._rigidBody.setLinearVelocity(z))},s.applyLinearVelocity=function(t,e){if(this._stateX||this._stateZ){S.set(this._stateX,0,this._stateZ),S.normalize(),this._rigidBody.getLinearVelocity(z),p.scaleAndAdd(z,z,t,e);var i=this._curMaxSpeed,r=1;z.lengthSqr()>i&&(Math.abs(this.node.eulerAngles.y-this._prevAngleY)>=10&&(r=2),this._prevAngleY=this.node.eulerAngles.y,z.normalize(),z.multiplyScalar(i/r)),this._rigidBody.setLinearVelocity(z)}},n(e,[{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t,this._curMaxSpeed=t*this.ratio}},{key:"ratio",get:function(){return this._ratio},set:function(t){this._ratio=t,this._curMaxSpeed=this.speed*t}},{key:"grounded",get:function(){return this._grounded}},{key:"velocity",get:function(){return this._velocity},set:function(t){this._velocity=t;var e=t.x,i=t.z;(e>0&&this._stateX<0||e<0&&this._stateX>0||i>0&&this._stateZ<0||i<0&&this._stateZ>0)&&this._rigidBody.clearVelocity(),this._stateX=e,this._stateZ=i}}]),e}(y)).prototype,"damping",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),b=e(v.prototype,"gravity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-10}}),B=e(v.prototype,"_speed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),e(v.prototype,"speed",[g],Object.getOwnPropertyDescriptor(v.prototype,"speed"),v.prototype),M=e(v.prototype,"_ratio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(v.prototype,"ratio",[_],Object.getOwnPropertyDescriptor(v.prototype,"ratio"),v.prototype),f=v))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Timer.ts","./Vec3Util.ts"],(function(t){var e,i,s,o,n,l,h,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,o=t.Node,n=t.Vec3,l=t.Component},function(t){h=t.Timer},function(t){r=t.Vec3Util}],execute:function(){var a;i._RF.push({},"5e22a+qWUpI6ZHSVRRj2DYT","MoveTo",void 0);var c=s.ccclass;s.property,t("MoveTo",c("MoveTo")(a=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).target=null,e.velocity=r.zero,e.speed=0,e.hasYAxis=!0,e.ns=o.NodeSpace.LOCAL,e.offset=0,e.offsetVector=null,e.onStart=null,e.onComplete=null,e.onChange=null,e.timer=new h,e.end=null,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this.enabled=!1},s.move=function(){this.enabled=!0},s.update=function(t){var e;if(console.assert(this.speed>0,"移动速度必须要大于零"),null!=(e=this.target instanceof o?this.ns==o.NodeSpace.WORLD?this.target.worldPosition:this.target.position:this.target)){if(null==this.end||!this.end.strictEquals(e)){var i,s=e.clone();this.offsetVector&&(s=s.add(this.offsetVector)),0==this.hasYAxis&&(s.y=0);var l=this.ns==o.NodeSpace.WORLD?this.node.worldPosition:this.node.position;this.velocity=r.sub(s,l).normalize();var h,a=n.distance(l,s)-this.offset;if(null==(i=this.onChange)||i.call(this),a<=0)return void this.exit();null==(h=this.onStart)||h.call(this),this.timer.step=a/this.speed,this.end=e.clone()}if(this.speed>0){var c=r.mul(this.velocity,this.speed*t);this.ns==o.NodeSpace.WORLD?this.node.worldPosition=r.add(this.node.worldPosition,c):this.node.position=r.add(this.node.position,c)}this.timer.update(t)&&(0==this.offset&&(this.ns==o.NodeSpace.WORLD?this.node.worldPosition=this.end:this.node.position=this.end),this.exit())}else this.exit()},s.exit=function(){var t;null==(t=this.onComplete)||t.call(this),this.enabled=!1,this.target=null,this.velocity=r.zero,this.speed=0,this.hasYAxis=!0,this.ns=o.NodeSpace.LOCAL,this.offset=0,this.offsetVector=null,this.onStart=null,this.onComplete=null,this.onChange=null,this.timer.reset(),this.end=null},i}(l))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTranslate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts"],(function(e){var t,o,r,n,c,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.Vec3,c=e.Node,s=e.Component},function(e){a=e.Vec3Util}],execute:function(){var i;o._RF.push({},"e626612zClLO4OZDEWvT+fr","MoveTranslate",void 0);var l=r.ccclass;r.property,e("MoveTranslate",l("MoveTranslate")(i=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).velocity=a.zero,t.speed=0,t.vector=new n,t}return t(o,e),o.prototype.update=function(e){this.speed>0&&(n.multiplyScalar(this.vector,this.velocity,this.speed*e),this.node.translate(this.vector,c.NodeSpace.WORLD))},o}(s))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d9f8b+CV69FyKwnUdCjOtad","NetInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"d8cd5el6GBGTYTW+N8b8EuJ","NetManager",void 0),n("NetManager",function(){function n(){this._channels={}}n.getInstance=function(){return this._instance||(this._instance=new n),this._instance};var e=n.prototype;return e.setNetNode=function(n,e){void 0===e&&(e=0),this._channels[e]=n},e.removeNetNode=function(n){delete this._channels[n]},e.connect=function(n,e){return void 0===e&&(e=0),!!this._channels[e]&&this._channels[e].connect(n)},e.send=function(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var i=this._channels[t];return i?i.send(n,e):-1},e.request=function(n,e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===s&&(s=0);var c=this._channels[s];c&&c.request(n,e,t,i)},e.requestUnique=function(n,e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===s&&(s=0);var c=this._channels[s];return!!c&&c.requestUnique(n,e,t,i)},e.close=function(n,e,t){if(void 0===t&&(t=0),this._channels[t])return this._channels[t].closeSocket(n,e)},n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/NetNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){var t,s,i,n,o;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,i=e.error,n=e.warn},function(e){o=e.Logger}],execute:function(){s._RF.push({},"57f0fB90kNBUJ98yyu+jxjx","NetNode",void 0);var r=["已关闭","连接中","验证中","可传输数据"],c=e("NetTipsType",function(e){return e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e}({})),l=e("NetNodeState",function(e){return e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working",e}({}));e("NetNode",function(){function e(){this._connectOptions=null,this._autoReconnect=0,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=l.Closed,this._socket=null,this._networkTips=null,this._protocolHelper=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=1e4,this._receiveTime=6e6,this._reconnetTimeOut=8e6,this._requests=Array(),this._listener={}}var s=e.prototype;return s.init=function(e,t,s,i){void 0===s&&(s=null),void 0===i&&(i=null),o.logNet("网络初始化"),this._socket=e,this._protocolHelper=t,this._networkTips=s,this._callbackExecuter=i||function(e,t){e.callback.call(e.target,t)}},s.connect=function(e){return!(!this._socket||this._state!=l.Closed)&&(this._isSocketInit||this.initSocket(),this._state=l.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(c.Connecting,!0),!0):(this.updateNetTips(c.Connecting,!1),!1))},s.initSocket=function(){var e=this;this._socket&&(this._socket.onConnected=function(t){e.onConnected(t)},this._socket.onMessage=function(t){e.onMessage(t)},this._socket.onError=function(t){e.onError(t)},this._socket.onClosed=function(t){e.onClosed(t)},this._isSocketInit=!0)},s.updateNetTips=function(e,t){this._networkTips&&(e==c.Requesting?this._networkTips.requestTips(t):e==c.Connecting?this._networkTips.connectTips(t):e==c.ReConnecting&&this._networkTips.reconnectTips(t))},s.onConnected=function(e){var t=this;o.logNet("网络已连接"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=l.Checking,this._connectedCallback((function(){t.onChecked()}))):this.onChecked(),o.logNet("网络已连接当前状态为【"+r[this._state]+"】")},s.onChecked=function(){o.logNet("连接验证成功，进入工作状态"),this._state=l.Working,this.updateNetTips(c.Connecting,!1),this.updateNetTips(c.ReConnecting,!1);var e=this._requests.concat();if(e.length>0){o.logNet("请求【"+this._requests.length+"】个待发送的信息");for(var t=0;t<e.length;){var s=e[t];this._socket.send(s.buffer),null==s.rspObject||""!=s.rspCmd?e.splice(t,1):++t}this.updateNetTips(c.Requesting,this._requests.length>0)}},s.onMessage=function(e){var s=JSON.parse(e);if(this._protocolHelper.checkResponsePackage(s)){this._protocolHelper.handlerResponsePackage(s)||this._networkTips&&this._networkTips.responseErrorCode(s.code),this.resetReceiveMsgTimer(),this.resetHearbeatTimer();var n=this._protocolHelper.getPackageId(s);if(o.logNet("接受到命令【"+n+"】的消息"),this._requests.length>0){for(var r in this._requests){var l=this._requests[r];if(l.rspCmd==n&&l.rspObject){o.logNet("触发请求命令【"+n+"】的回调"),this._callbackExecuter(l.rspObject,s.data),this._requests.splice(parseInt(r),1);break}}0==this._requests.length?this.updateNetTips(c.Requesting,!1):o.logNet("请求队列中还有【"+this._requests.length+"】个请求在等待")}var h=this._listener[n];if(null!=h)for(var u,a=t(h);!(u=a()).done;){var _=u.value;o.logNet("触发监听命令【"+n+"】的回调"),this._callbackExecuter(_,s.data)}}else i("校验接受消息数据异常")},s.onError=function(e){i(e)},s.onClosed=function(e){var t=this;this.clearTimer(),!this._disconnectCallback||this._disconnectCallback()?this.isAutoReconnect()?(this.updateNetTips(c.ReConnecting,!0),this._reconnectTimer=setTimeout((function(){t._socket.close(),t._state=l.Closed,t.connect(t._connectOptions),t._autoReconnect>0&&(t._autoReconnect-=1)}),this._reconnetTimeOut)):this._state=l.Closed:o.logNet("断开连接")},s.close=function(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=l.Closed},s.closeSocket=function(e,t){this._socket&&this._socket.close(e,t)},s.send=function(e,t){return void 0===t&&(t=!1),this._state==l.Working||t?this._socket.send(e):this._state==l.Checking||this._state==l.Connecting?(this._requests.push({buffer:e,rspCmd:"",rspObject:null}),o.logNet("当前状态为【"+r[this._state]+"】,繁忙并缓冲发送数据"),0):(i("当前状态为【"+r[this._state]+"】,请求错误"),-1)},s.request=function(e,t,s,i){void 0===s&&(s=!0),void 0===i&&(i=!1);var n=this._protocolHelper.handlerRequestPackage(e);this.base_request(e,n,t,s,i)},s.requestUnique=function(e,t,s,i){void 0===s&&(s=!0),void 0===i&&(i=!1);for(var n=this._protocolHelper.handlerRequestPackage(e),r=0;r<this._requests.length;++r)if(this._requests[r].rspCmd==n)return o.logNet("命令【"+n+"】重复请求"),!1;return this.base_request(e,n,t,s,i),!0},s.base_request=function(e,t,s,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=JSON.stringify(e);(this._state==l.Working||n)&&this._socket.send(r),o.logNet("队列命令为【"+t+"】的请求，等待请求数据的回调"),this._requests.push({buffer:r,rspCmd:t,rspObject:s}),i&&this.updateNetTips(c.Requesting,!0)},s.setResponeHandler=function(e,t,s){return null==t?(i("命令为【"+e+"】设置响应处理程序错误"),!1):(this._listener[e]=[{target:s,callback:t}],!0)},s.addResponeHandler=function(e,t,s){if(null==t)return i("命令为【"+e+"】添加响应处理程序错误"),!1;var n={target:s,callback:t};null==this._listener[e]?this._listener[e]=[n]:-1==this.getNetListenersIndex(e,n)&&this._listener[e].push(n);return!0},s.removeResponeHandler=function(e,t,s){if(null!=this._listener[e]&&null!=t){var i=this.getNetListenersIndex(e,{target:s,callback:t});-1!=i&&this._listener[e].splice(i,1)}},s.cleanListeners=function(e){void 0===e&&(e=""),""==e?this._listener={}:delete this._listener[e]},s.getNetListenersIndex=function(e,t){for(var s=-1,i=0;i<this._listener[e].length;i++){var n=this._listener[e][i];if(n.callback==t.callback&&n.target==t.target){s=i;break}}return s},s.resetReceiveMsgTimer=function(){var e=this;null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((function(){n("接收消息定时器关闭网络连接"),e._socket.close()}),this._receiveTime)},s.resetHearbeatTimer=function(){var e=this;null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((function(){o.logNet("网络节点保持活跃发送心跳信息"),e.send(e._protocolHelper.getHearbeat())}),this._heartTime)},s.clearTimer=function(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)},s.isAutoReconnect=function(){return 0!=this._autoReconnect},s.rejectReconnect=function(){this._autoReconnect=0,this.clearTimer()},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/NetProtocolPako.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"88ae0lIg5BFWb1O1E8/Etwi","NetProtocolPako",void 0);t("NetProtocolPako",function(){function t(){}var e=t.prototype;return e.getHeadlen=function(){return 0},e.getHearbeat=function(){return""},e.getPackageLen=function(t){return t.toString().length},e.checkResponsePackage=function(t){return!0},e.handlerResponsePackage=function(t){return 1==t.code&&(t.isCompress&&(t.data=(e=t.data,n=e.split("").map((function(t){return t.charCodeAt(0)})),a=new Uint8Array(n),pako.inflate(a,{to:"string"}))),t.data=JSON.parse(t.data),!0);var e,n,a},e.handlerRequestPackage=function(t){var e,n=t.cmd;return t.callback=n,t.isCompress&&(t.data=(e=t.data,pako.gzip(e,{to:"string"}))),n},e.getPackageId=function(t){return t.callback},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./Oops.ts","./ECS.ts","./NetNode.ts","./NetProtocolPako.ts"],(function(t){var n,e,o,s,i,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.Logger},function(t){s=t.oops},function(t){i=t.ecs},function(t){r=t.NetNode},function(t){c=t.NetProtocolPako}],execute:function(){var a;e._RF.push({},"9f433sHTGNEOIv3kq0iYGeL","NetworkManager",void 0);var l=t("NetGameTips",function(){function t(){}var n=t.prototype;return n.connectTips=function(t){t?o.logNet("Game server is connecting"):o.logNet("Game server connection successful")},n.reconnectTips=function(t){t?o.logNet("Reconnection starts"):o.logNet("Reconnection successful")},n.requestTips=function(t){t?o.logNet("Start requesting data"):o.logNet("Request data completed")},n.responseErrorCode=function(t){console.log("Game server error code",t)},t}()),u=t("SocketIO",function(){function t(){this.MAX_RECONNECT_ATTEMPTS=5,this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}var n=t.prototype;return n.connect=function(t){var n=this;return window.io?this._ws&&"opening"===this._ws.io._readyState?(o.logNet("websocket connecting, wait for a moment..."),!1):(this._ws=window.io(t.url,{transports:["websocket"],reconnection:!0,reconnectionAttempts:this.MAX_RECONNECT_ATTEMPTS,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),this._ws.on("connect",(function(){var t;null==(t=n.onConnected)||t.call(n._ws,new Event("connect"))})),this._ws.on("error",(function(t){var e;null==(e=n.onError)||e.call(n._ws,t)})),this._ws.on("disconnect",(function(t){var e;null==(e=n.onClosed)||e.call(n._ws,new CloseEvent(t))})),this._ws.on("data",(function(t){var e;null==(e=n.onMessage)||e.call(n._ws,t)})),!0):(o.logNet("socket.io-client not found, please download it from"),!1)},n.send=function(t){return this._ws&&"open"===this._ws.io._readyState?(this._ws.send(t),1):-1},n.close=function(){this._ws&&this._ws.close()},n.io=function(){return this._ws},t}()),f=t("NetProtocol",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(c)),w=t("NetNodeGame",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onMessage=function(n){var e=n.replace(/^\d+/,""),o=JSON.parse(e);if(Array.isArray(o)){var s=o[0],i=o[1];return console.log("event",s,"data",i),void t.prototype.onMessage.call(this,JSON.stringify(i))}t.prototype.onMessage.call(this,JSON.stringify(o))},e}(r));t("NetworkManager",i.register("NetworkManager")(a=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(n=t.call.apply(t,[this].concat(o))||this).net=void 0,n.ws=void 0,n.io=void 0,n}return n(e,t),e.prototype.init=function(){this.net=new w,this.ws=new u,this.net.init(this.ws,new f,new l),this.net.connect({url:""+s.config.game.data.config.webSocketIp+s.config.game.data.config.webSocketPort}),this.io=this.ws.io()},e}(i.Entity))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/NodeDragExt.ts",["cc"],(function(){var t,i,n,e,o;return{setters:[function(s){t=s.cclegacy,i=s.Node,n=s.js,e=s.Vec2,o=s.v3}],execute:function(){if(t._RF.push({},"1a072/udu9MtbdbyL5xB8iR","NodeDragExt",void 0),!i.prototype.__$NodeDragExt$__){i.prototype.__$NodeDragExt$__=!0;n.mixin(i,{DragEvent:{DRAG_START:"drag_start",DRAG_MOVE:"drag_move",DRAG_END:"drag_end"}}),n.mixin(i.prototype,{_draggable:!1,_dragging:!1,_dragTesting:!1,_dragStartPoint:null,initDrag:function(){this._draggable?(this.on(i.EventType.TOUCH_START,this.onTouchBegin_0,this),this.on(i.EventType.TOUCH_MOVE,this.onTouchMove_0,this),this.on(i.EventType.TOUCH_END,this.onTouchEnd_0,this),this.on(i.EventType.TOUCH_CANCEL,this.onTouchCancel_0,this)):(this.off(i.EventType.TOUCH_START,this.onTouchBegin_0,this),this.off(i.EventType.TOUCH_MOVE,this.onTouchMove_0,this),this.off(i.EventType.TOUCH_END,this.onTouchEnd_0,this),this.off(i.EventType.TOUCH_CANCEL,this.onTouchCancel_0,this))},onTouchBegin_0:function(t){null==this._dragStartPoint&&(this._dragStartPoint=new e);var i=t.getUILocation();this._dragStartPoint.set(i),this._dragTesting=!0},onTouchMove_0:function(t){if(!this._dragging&&this._draggable&&this._dragTesting){var n=t.getUILocation();if(Math.abs(this._dragStartPoint.x-n.x)<10&&Math.abs(this._dragStartPoint.y-n.y)<10)return;this._dragging=!0,this._dragTesting=!1,this.emit(i.DragEvent.DRAG_START,t)}if(this._dragging){var e=t.getUIDelta(),s=o(e.x,e.y,0).add(this.position);this.position=s,this.emit(i.DragEvent.DRAG_MOVE,t)}},onTouchEnd_0:function(t){this._dragging&&(this._dragging=!1,this.emit(i.DragEvent.DRAG_END,t))},onTouchCancel_0:function(t){this._dragging&&(this._dragging=!1,this.emit(i.DragEvent.DRAG_END,t))},startDrag:function(){this.activeInHierarchy&&this.dragBegin()},dragBegin:function(){this._dragging=!0,this._dragTesting=!0,this.on(i.EventType.TOUCH_MOVE,this.onTouchMove_0,this),this.on(i.EventType.TOUCH_END,this.onTouchEnd_0,this),this.on(i.EventType.TOUCH_CANCEL,this.onTouchCancel_0,this)},dragEnd:function(){this._dragging&&(this._dragTesting=!1,this._dragging=!1)},stopDrag:function(){this.dragEnd()},removeDragEvent:function(){this.off(i.EventType.TOUCH_START,this.onTouchBegin_0,this),this.off(i.EventType.TOUCH_MOVE,this.onTouchMove_0,this),this.off(i.EventType.TOUCH_END,this.onTouchEnd_0,this),this.off(i.EventType.TOUCH_CANCEL,this.onTouchCancel_0,this)}}),Object.defineProperty(i.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragTesting",{get:function(){return this._dragTesting},set:function(t){this._dragTesting!=t&&(this._dragTesting=t)},enumerable:!0,configurable:!0})}t._RF.pop()}}}));

System.register("chunks:///_virtual/NodeExt.ts",["cc"],(function(){var t,e,n,o,r,i,p,c,s,u,f,g,y,h,l,a,d,m,C,P,b,O,j;return{setters:[function(v){t=v.cclegacy,e=v.Node,n=v.Graphics,o=v.Label,r=v.RichText,i=v.Sprite,p=v.Button,c=v.Canvas,s=v.EditBox,u=v.Layout,f=v.PageView,g=v.ProgressBar,y=v.ScrollView,h=v.Slider,l=v.Toggle,a=v.Widget,d=v.UIOpacity,m=v.UITransform,C=v.Mask,P=v.Size,b=v.UIRenderer,O=v.Color,j=v.v3}],execute:function(){t._RF.push({},"493a6vtAsNCi7/drbKHIAaL","NodeExt",void 0),Object.defineProperty(e.prototype,"uiGraphics",{get:function(){return this.getComponent(n)},set:function(t){}}),Object.defineProperty(e.prototype,"uiLabel",{get:function(){return this.getComponent(o)},set:function(t){}}),Object.defineProperty(e.prototype,"uiRichText",{get:function(){return this.getComponent(r)},set:function(t){}}),Object.defineProperty(e.prototype,"uiSprite",{get:function(){return this.getComponent(i)},set:function(t){}}),Object.defineProperty(e.prototype,"uiButton",{get:function(){return this.getComponent(p)},set:function(t){}}),Object.defineProperty(e.prototype,"uiCanvas",{get:function(){return this.getComponent(c)},set:function(t){}}),Object.defineProperty(e.prototype,"uiEditBox",{get:function(){return this.getComponent(s)},set:function(t){}}),Object.defineProperty(e.prototype,"uiLayout",{get:function(){return this.getComponent(u)},set:function(t){}}),Object.defineProperty(e.prototype,"uiPageView",{get:function(){return this.getComponent(f)},set:function(t){}}),Object.defineProperty(e.prototype,"uiProgressBar",{get:function(){return this.getComponent(g)},set:function(t){}}),Object.defineProperty(e.prototype,"uiScrollView",{get:function(){return this.getComponent(y)},set:function(t){}}),Object.defineProperty(e.prototype,"uiSlider",{get:function(){return this.getComponent(h)},set:function(t){}}),Object.defineProperty(e.prototype,"uiToggle",{get:function(){return this.getComponent(l)},set:function(t){}}),Object.defineProperty(e.prototype,"uiWidget",{get:function(){return this.getComponent(a)},set:function(t){}}),Object.defineProperty(e.prototype,"uiOpacity",{get:function(){return this.getComponent(d)},set:function(t){}}),Object.defineProperty(e.prototype,"uiTransform",{get:function(){return this.getComponent(m)},set:function(t){}}),Object.defineProperty(e.prototype,"uiMask",{get:function(){return this.getComponent(C)},set:function(t){}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.setPosition(t,this.position.y)}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.setPosition(this.position.x,t)}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.position.z},set:function(t){var e=this;e.setPosition(e.position.x,e.position.y,t)}}),Object.defineProperty(e.prototype,"w",{configurable:!0,get:function(){var t,e;return null!=(t=null==(e=this.getComponent(m))?void 0:e.width)?t:0},set:function(t){(this.getComponent(m)||this.addComponent(m)).width=t}}),Object.defineProperty(e.prototype,"h",{configurable:!0,get:function(){var t,e;return null!=(t=null==(e=this.getComponent(m))?void 0:e.height)?t:0},set:function(t){(this.getComponent(m)||this.addComponent(m)).height=t}}),Object.defineProperty(e.prototype,"size",{get:function(){var t=this.getComponent(m);return new P(t.width,t.height)},set:function(t){var e=this.getComponent(m)||this.addComponent(m);e.width=t.width,e.height=t.height}}),Object.defineProperty(e.prototype,"opacity",{get:function(){var t=this.getComponent(d);if(null!=t)return t.opacity;var e=this.getComponent(b);return e?e.color.a:255},set:function(t){var e=this,n=e.getComponent(d);if(null==n){var o=e.getComponent(b);o?(this.$__color__?this.$__color__.a=t:this.$__color__=new O(o.color.r,o.color.g,o.color.b,t),o.color=this.$__color__):e.addComponent(d).opacity=t}else n.opacity=t}}),Object.defineProperty(e.prototype,"color",{get:function(){var t;return null==(t=this.getComponent(b))?void 0:t.color},set:function(t){var e=this.getComponent(b);e&&(e.color=t)}}),Object.defineProperty(e.prototype,"scale_x",{get:function(){return this.scale.x},set:function(t){var e=this;e.scale=j(t,e.scale.y,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_y",{get:function(){return this.scale.y},set:function(t){var e=this;e.scale=j(e.scale.x,t,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_z",{get:function(){return this.scale.z},set:function(t){var e=this;e.scale=j(e.scale.x,e.scale.y,t)}}),Object.defineProperty(e.prototype,"anchor_x",{get:function(){var t,e;return null!=(t=null==(e=this.getComponent(m))?void 0:e.anchorX)?t:.5},set:function(t){(this.getComponent(m)||this.addComponent(m)).anchorX=t}}),Object.defineProperty(e.prototype,"anchor_y",{get:function(){var t,e;return null!=(t=null==(e=this.getComponent(m))?void 0:e.anchorY)?t:.5},set:function(t){(this.getComponent(m)||this.addComponent(m)).anchorY=t}}),Object.defineProperty(e.prototype,"angle_x",{get:function(){return this.eulerAngles.x},set:function(t){var e=this;e.setRotationFromEuler(t,e.eulerAngles.y,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_y",{get:function(){return this.eulerAngles.y},set:function(t){var e=this;e.setRotationFromEuler(e.eulerAngles.x,t,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_z",{get:function(){return this.eulerAngles.y},set:function(t){var e=this;e.setRotationFromEuler(e.eulerAngles.x,e.eulerAngles.y,t)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(n){var t,e,i,o,a,r,l,s,c,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Label,s=n.Animation,c=n.Component},function(n){u=n.LanguageLabel}],execute:function(){var p,f,h,b,y,m,d;a._RF.push({},"01391Mp6X1Gn554rkzavN4K","Notify",void 0);var g=r.ccclass,v=r.property;n("Notify",(p=g("Notify"),f=v(l),h=v(s),p((m=t((y=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"lab_content",m,o(t)),i(t,"animation",d,o(t)),t.onComplete=null,t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.animation&&this.animation.on(s.EventType.FINISHED,this.onFinished,this)},a.onFinished=function(){this.node.destroy(),this.onComplete&&this.onComplete(),this.onComplete=null},a.toast=function(n,t){var e=this.lab_content.getComponent(u);t?(e.enabled=!0,e.dataID=n):(e.enabled=!1,this.lab_content.string=n)},t}(c)).prototype,"lab_content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(y.prototype,"animation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"86827QLFSRM7Zojsx0WqWuQ","ObjectUtil",void 0);t("ObjectUtil",function(){function t(){}return t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=this.deepCopy(t[c]));return e}console.warn("不支持的类型："+e)},t.copy=function(t){return JSON.parse(JSON.stringify(t))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./EffectSingleCase.ts","./ECS.ts","./Language.ts","./ViewModel.ts","./HttpRequest.ts","./NetManager.ts","./Config.ts","./Logger.ts","./RandomManager.ts"],(function(e){var n,t,o,i,s,a,c,g,u,f;return{setters:[function(e){n=e.cclegacy},function(e){t=e.EffectSingleCase},function(e){o=e.ecs},function(e){i=e.LanguageManager},function(e){s=e.VM},function(e){a=e.HttpRequest},function(e){c=e.NetManager},function(e){g=e.Config},function(e){u=e.Logger},function(e){f=e.RandomManager}],execute:function(){n._RF.push({},"cbae5wzfSZGzZMuyeAetSfg","Oops",void 0);e("version","2.0.0.20241118");var r=e("oops",(function(){}));r.log=u,r.config=new g,r.storage=void 0,r.res=void 0,r.message=void 0,r.random=f.instance,r.timer=void 0,r.audio=void 0,r.gui=void 0,r.game=void 0,r.language=new i,r.http=new a,r.tcp=new c,r.ecs=new o.RootSystem,r.mvvm=s,r.pool=t.instance,n._RF.pop()}}}));

System.register("chunks:///_virtual/OrbitCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,a,n,s,u,l,h,c,p,g,R,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator,u=t.Vec3,l=t.Quat,h=t.Node,c=t.input,p=t.Input,g=t.lerp,R=t.Component,_=t.Vec2}],execute:function(){var d,f,b,y,w,m,S,T,v,x,z,O,C,E,D,M,P,Y,k,A,U,j,F,H,W,Q,L,N,V,B,I,X;n._RF.push({},"4e454G/OQ1NB7tjzAUf269U","OrbitCamera",void 0);var G=s.ccclass,q=s.property,J=s.menu,K=new u,Z=new u,$=new l;t("OrbitCamera",(d=G("OrbitCamera"),f=J("OopsFramework/Camera/OrbitCamera （轨道摄影机）"),b=q({tooltip:"是否启动触摸控制"}),y=q({tooltip:"是否开启启用缩放半径（鼠标滚轮控制摄像机与目标距离）"}),w=q({tooltip:"摄像机与目标的半径缩放速度",visible:function(){return!0===this.enableScaleRadius}}),m=q({tooltip:"摄像机与目标的半径最小值",visible:function(){return!0===this.enableScaleRadius}}),S=q({tooltip:"摄像机与目标的半径最大值",visible:function(){return!0===this.enableScaleRadius}}),T=q({tooltip:"自动旋转是否开启"}),v=q({tooltip:"自动旋转速度",visible:function(){return!0===this.autoRotate}}),x=q({tooltip:"旋转速度"}),z=q({tooltip:"跟随速度"}),O=q({tooltip:"X轴旋转范围（人物上下看的角度控制）"}),C=q({tooltip:"摄像机与目标的距离（以玩家为中心环绕球半径）"}),E=q({type:h,tooltip:"跟随目标"}),D=q({type:u,tooltip:"目标旋转偏移量（初始旋转向量）"}),M=q({tooltip:"是否跟随目标 Y 轴旋转"}),d(P=f((k=e((Y=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"enableTouch",k,r(e)),o(e,"enableScaleRadius",A,r(e)),o(e,"radiusScaleSpeed",U,r(e)),o(e,"minRadius",j,r(e)),o(e,"maxRadius",F,r(e)),o(e,"autoRotate",H,r(e)),o(e,"autoRotateSpeed",W,r(e)),o(e,"rotateSpeed",Q,r(e)),o(e,"followSpeed",L,r(e)),o(e,"xRotationRange",N,r(e)),o(e,"_targetRadius",V,r(e)),o(e,"_target",B,r(e)),o(e,"_startRotation",I,r(e)),o(e,"followTargetRotationY",X,r(e)),e._center=new u,e._targetCenter=new u,e._touched=!1,e._targetRotation=new u,e._rotation=new l,e._radius=10,e}i(e,t);var n=e.prototype;return n.start=function(){this.enableTouch&&(c.on(p.EventType.TOUCH_START,this.onTouchStart,this),c.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(p.EventType.TOUCH_END,this.onTouchEnd,this)),this.enableScaleRadius&&c.on(p.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.target&&this.resetTargetRotation(),l.fromEuler(this._rotation,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),this.target&&(this._targetCenter.set(this.target.worldPosition),this._center.set(this._targetCenter)),this._radius=this.radius,this.limitRotation()},n.resetTargetRotation=function(){var t=this._targetRotation.set(this._startRotation);this.followTargetRotationY&&(t=Z.set(t),l.toEuler(K,this.target.worldRotation),t.add(K))},n.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},n.onTouchStart=function(){this._touched=!0},n.onTouchMove=function(t){if(this._touched){var e=t.touch.getDelta();l.fromEuler($,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),l.rotateX($,$,.005*-e.y),l.rotateY($,$,.005*-e.x),l.toEuler(this._targetRotation,$),this.limitRotation()}},n.onTouchEnd=function(){this._touched=!1},n.onMouseWheel=function(t){var e=t.getScrollY();this._targetRadius+=this.radiusScaleSpeed*-Math.sign(e),this._targetRadius=Math.min(this.maxRadius,Math.max(this.minRadius,this._targetRadius))},n.update=function(t){var e=this._targetRotation;this.autoRotate&&!this._touched&&(e.y+=this.autoRotateSpeed*t),this.target&&(this._targetCenter.set(this.target.worldPosition),this.followTargetRotationY&&(e=Z.set(e),l.toEuler(K,this.target.worldRotation),e.y+=K.y)),l.fromEuler($,e.x,e.y,e.z),l.slerp(this._rotation,this._rotation,$,7*t*this.rotateSpeed),u.lerp(this._center,this._center,this._targetCenter,5*t*this.followSpeed),this._radius=g(this._radius,this._targetRadius,5*t),u.transformQuat(K,u.FORWARD,this._rotation),u.multiplyScalar(K,K,this._radius),K.add(this._center),this.node.position=K,this.node.lookAt(this._center)},n.follow=function(){var t=this._targetRotation;this.target&&(this._targetCenter.set(this.target.worldPosition),this.followTargetRotationY&&(t=Z.set(t),l.toEuler(K,this.target.worldRotation),t.y+=K.y)),l.fromEuler($,t.x,t.y,t.z),this._rotation=$,this._center=this._targetCenter,this._radius=this._targetRadius,u.transformQuat(K,u.FORWARD,this._rotation),u.multiplyScalar(K,K,this._radius),K.add(this._center),this.node.position=K,this.node.lookAt(this._center)},a(e,[{key:"radius",get:function(){return this._targetRadius},set:function(t){this._targetRadius=t}},{key:"target",get:function(){return this._target},set:function(t){this._target=t,this._targetRotation.set(this._startRotation),this._targetCenter.set(t.worldPosition)}},{key:"targetRotation",get:function(){return this._startRotation.set(this._targetRotation),this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),e}(R)).prototype,"enableTouch",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=e(Y.prototype,"enableScaleRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=e(Y.prototype,"radiusScaleSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=e(Y.prototype,"minRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),F=e(Y.prototype,"maxRadius",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),H=e(Y.prototype,"autoRotate",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=e(Y.prototype,"autoRotateSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),Q=e(Y.prototype,"rotateSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=e(Y.prototype,"followSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=e(Y.prototype,"xRotationRange",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(5,70)}}),V=e(Y.prototype,"_targetRadius",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(Y.prototype,"radius",[C],Object.getOwnPropertyDescriptor(Y.prototype,"radius"),Y.prototype),B=e(Y.prototype,"_target",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(Y.prototype,"target",[E],Object.getOwnPropertyDescriptor(Y.prototype,"target"),Y.prototype),I=e(Y.prototype,"_startRotation",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),e(Y.prototype,"targetRotation",[D],Object.getOwnPropertyDescriptor(Y.prototype,"targetRotation"),Y.prototype),X=e(Y.prototype,"followTargetRotationY",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Y))||P)||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"c1584nuvI9HtJ5IHcmFEBzR","PhysicsUtil",void 0);var i=e("GroupItem",function(){function e(e,t){this._value=void 0,this._name=void 0,this._value=e,this._name=t}return t(e,[{key:"value",get:function(){return this._value}},{key:"name",get:function(){return this._name}},{key:"mask",get:function(){return 1<<this._value}}]),e}()),u=e("PhysicsUtil",function(){function e(){}return e.setNodeLayer=function(t,n){n.layer=t.mask,n.children.forEach((function(n){n.layer=t.mask,e.setNodeLayer(t,n)}))},e}());u.DEFAULT=new i(0,"DEFAULT"),u.GAME_OBJECT_SELECT=new i(1,"GAME_OBJECT_SELECT"),u.GAME_OWNER=new i(2,"GAME_OWNER"),n._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformUtil.ts",["cc"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.sys,n=t.native}],execute:function(){e._RF.push({},"c08229jnmdPP5vR721N6GG9","PlatformUtil",void 0);t("PlatformUtil",function(){function t(){}t.isNativeAndroid=function(){return void 0!==n&&(i.isNative&&i.platform===i.Platform.ANDROID)},t.isNativeIOS=function(){return void 0!==n&&(i.isNative&&i.os===i.OS.IOS)},t.getPlateform=function(){return this.isNativeAndroid()?"android":this.isNativeIOS()?"ios":"h5"};var e=t.prototype;return e.getNetworkType=function(){return i.getNetworkType()},e.getBatteryLevel=function(){return i.getBatteryLevel()},e.openURL=function(t){i.openURL(t)},e.copyText=function(t){n.copyTextToClipboard(t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"c983brNtZpJ877H01MFVu6e","player",void 0);e("default",(function(){var e=self,r=!1,t=Date.now(),o=null;function a(){if(r)try{var s=Date.now(),n=s-t;t=s,e.postMessage({type:"update",deltaTime:n}),o=setTimeout((function(){a()}),1e3)}catch(t){console.error("Error in game loop:",t),r=!1,e.postMessage({type:"error",error:t})}}e.onmessage=function(s){try{switch(s.data){case"start":r||(r=!0,t=Date.now(),a());break;case"stop":r=!1,o&&clearTimeout(o);break;default:console.warn("Unknown message received:",s.data)}}catch(r){console.error("Error in worker message handler:",r),e.postMessage({type:"error",error:r})}}}));r._RF.pop()}}}));

System.register("chunks:///_virtual/Player2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./RoomModelComp.ts","./TableModelComp.ts","./PlayerInit.ts","./Oops.ts","./SingletonModuleComp.ts","./ViewModel.ts","./GameUIConfig.ts","./GameEvent.ts"],(function(e){var t,n,r,a,s,o,i,u,c,p,l,f,h;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy},function(e){s=e.ecs},function(e){o=e.RoomModelComp},function(e){i=e.TableModelComp},function(e){u=e.PlayerInitComp},function(e){c=e.oops},function(e){p=e.smc},function(e){l=e.VM},function(e){f=e.UIID},function(e){h=e.GameEvent}],execute:function(){var d;a._RF.push({},"0585eUfkGtPwog5MlsG6UzT","Player",void 0);e("Player",s.register("Player")(d=function(e){function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).RoomModel=void 0,t.TableModel=void 0,t}t(a,e);var s=a.prototype;return s.init=function(){this.addComponents(o,i),this.add(u)},s.loadRooms=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.gui.waitOpen(),e.next=4,fetch(c.http.server+"/rooms",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(!(n=e.sent).status){e.next=10;break}throw new Error(n.message);case 10:l.setValue("Room.data",n.rooms),l.setValue("Room.pageCount",n.pageCount),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),c.gui.toast(""+e.t0);case 17:return e.prev=17,c.gui.waitClose(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),s.loadTables=function(){var e=n(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.gui.waitOpen(),e.next=4,fetch(c.http.server+"/tables/active?roomId="+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(!(a=e.sent).status){e.next=10;break}throw new Error(a.message);case 10:l.setValue("Table.data",a.tables),l.setValue("Table.pageCount",a.tables.length),c.gui.remove(f.Room,!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),c.gui.toast(""+e.t0);case 18:return e.prev=18,c.gui.waitClose(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),s.joinTable=function(){var e=n(r().mark((function e(t,n){var a,s,o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.gui.waitOpen(),a=p.network.io,s=l.getValue("Account.data"),e.next=6,fetch(c.http.server+"/players",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyIn:Number(n),socketId:null==a?void 0:a.id,tableId:t.id,userId:s.id})});case 6:return o=e.sent,e.next=9,o.json();case 9:if(!(i=e.sent).status){e.next=12;break}throw new Error(i.message);case 12:return l.setValue("Match.player",i),c.gui.remove(f.Table_Confirm,!0),c.gui.remove(f.Table,!0),e.next=17,c.gui.openAsync(f.Match,t);case 17:c.message.dispatchEvent(h.ENTER_GAME),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),c.gui.toast(""+e.t0);case 23:return e.prev=23,c.gui.waitClose(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}(),s.getTable=function(){var e=n(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.gui.waitOpen(),e.next=4,fetch(c.http.server+"/tables/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(!(a=e.sent).status){e.next=10;break}throw new Error(a.message);case 10:return e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(0),c.gui.toast(""+e.t0);case 16:return e.prev=16,c.gui.waitClose(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),s.deletePlayer=function(){var e=n(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.gui.waitOpen(),e.next=4,fetch(c.http.server+"/players/"+n+"?tableId="+t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tableId:t})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c.gui.toast(""+e.t0);case 9:return e.prev=9,c.gui.waitClose(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),a}(s.Entity))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerEvent.ts",["cc"],(function(T){var E;return{setters:[function(T){E=T.cclegacy}],execute:function(){E._RF.push({},"351feKskFhHGrKZHWrQCbVk","PlayerEvent",void 0);T("PlayerEvent",function(T){return T.FOLD="FOLD",T.CHECK="CHECK",T.CALL="CALL",T.RAISE="RAISE",T.HALF="HALF",T.QUARTER="QUARTER",T.FULL="FULL",T.ALLIN="ALLIN",T.WINNER="WINNER",T.SHOW_HAND="SHOW_HAND",T.HAND_SHOWED="HAND_SHOWED",T.UPDATE_MISSING_PLAYER_STACK="UPDATE_MISSING_PLAYER_STACK",T.NEXT_MATCH_IS_COMING="NEXT_MATCH_IS_COMING",T.FETCH_LOBBY_INFO="FETCH_LOBBY_INFO",T.RECEIVE_LOBBY_INFO="RECEIVE_LOBBY_INFO",T.LEAVE_NEXT_MATCH="LEAVE_NEXT_MATCH",T.PLAYERS_UPDATED="PLAYERS_UPDATED",T.JOIN_TABLE="JOIN_TABLE",T.TABLE_JOINED="TABLE_JOINED",T.LEAVE_TABLE="LEAVE_TABLE",T.TABLE_LEFT="TABLE_LEFT",T.START_INIT_MATCH="START_INIT_MATCH",T.TABLES_UPDATED="TABLES_UPDATED",T.TABLE_UPDATED="TABLE_UPDATED",T.TABLE_MESSAGE="TABLE_MESSAGE",T.UPDATE_STATISTICAL="UPDATE_STATISTICAL",T.PARTICIPANTS_UPDATED="PARTICIPANTS_UPDATED",T.HIGHLIGHT_CARDS="HIGHLIGHT_CARDS",T.REBUY="REBUY",T.SIT_DOWN="SIT_DOWN",T.STAND_UP="STAND_UP",T.SITTING_OUT="SITTING_OUT",T.SITTING_IN="SITTING_IN",T.DISCONNECTED="DISCONNECTED",T.MATCH_STARTED="MATCH_STARTED",T.CHANGE_TURN="CHANGE_TURN",T.REBOUGHT="REBOUGHT",T}({})),T("RaiseType",function(T){return T.RAISE="RAISE",T.QUARTER="QUARTER",T.HALF="HALF",T.FULL="FULL",T.ALLIN="ALLIN",T}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.ecs}],execute:function(){var o,i;n._RF.push({},"f3aedRz9OdA17AGtGVWCR7m","PlayerInit",void 0);var u=t("PlayerInitComp",r.register("PlayerInit")(o=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.reset=function(){},n}(r.Comp))||o);t("PlayerInitSystem",r.register("Player")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.filter=function(){return r.allOf(u)},o.entityEnter=function(t){t.RoomModel.vmAdd(),t.TableModel.vmAdd(),t.remove(u)},n}(r.ComblockSystem))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts","./PlayerEvent.ts","./PositionUtils.ts","./SingletonModuleComp.ts","./CardUtils.ts","./ViewModel.ts","./SpinViewComp.ts","./CardViewComp.ts","./SpriteHelper.ts","./StatusViewComp.ts"],(function(t){var e,i,n,a,r,l,s,o,d,u,c,h,p,v,f,m,g,C,y,w,b,T,A,S,k,P,F,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,l=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,d=t._decorator,u=t.Node,c=t.v3,h=t.UITransform,p=t.Size,v=t.Sprite},function(t){f=t.oops},function(t){m=t.ecs},function(t){g=t.CCVMParentComp},function(t){C=t.PlayerEvent},function(t){y=t.getNodePosition},function(t){w=t.smc},function(t){b=t.tweenCardToNode,T=t.getCardResPath,A=t.flipCardToNode},function(t){S=t.VM},function(t){k=t.SpinViewComp},function(t){P=t.CardViewComp},function(t){F=t.loadResSpriteAtlasToNode},function(t){I=t.StatusViewComp}],execute:function(){var E,V,_,D,N,L,M,H,B,z,R,U,O,x,W,Y,G,j;o._RF.push({},"e2d282kYnpLrqpvAnYoD1ZD","PlayerViewComp",void 0);var q=d.ccclass,Z=d.property;t("PlayerViewComp",(E=q("PlayerViewComp"),V=m.register("PlayerView",!1),_=Z(u),D=Z(u),N=Z(u),L=Z(u),M=Z(u),H=Z(u),B=Z(u),E(z=V((U=e((R=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"cards",U,a(e)),n(e,"turn",O,a(e)),n(e,"slind",x,a(e)),n(e,"fold",W,a(e)),n(e,"winHat",Y,a(e)),n(e,"wait",G,a(e)),n(e,"status",j,a(e)),e.data={isTurn:!1},e}i(e,t);var o=e.prototype;return o.start=function(){f.message.on(C.LEAVE_TABLE,this.handleLeaveTable,this),f.message.on(C.MATCH_STARTED,this.handleMatchStarted,this),f.message.on(C.CHANGE_TURN,this.handleChangeTurn,this),f.message.on(C.PLAYERS_UPDATED,this.handlePlayersUpdated,this),this.turn.getComponent(k).onAdded(this.data.id)},o.onAdded=function(t){this.data=t},o.handleMatchStarted=function(t,e){var i;this.clearCards(),this.dealCard(),this.turn&&(this.turn.active=(null==(i=this.data)?void 0:i.id)===e.playerId),this.winHat&&(this.winHat.active=!1),this.status&&(this.status.active=!1),this.checkTurn(),this.updateSlind(e)},o.handlePlayersUpdated=function(t,e){var i,n=this,a=e.players.find((function(t){var e;return t.id===(null==(e=n.data)?void 0:e.id)}));if(a&&this.data&&(this.data.stack=a.stack),this.checkFold(e),this.checkWinner(e),this.checkWait(e),!(null==(i=e.match)?void 0:i.participants.find((function(t){var e;return t.playerId===(null==(e=S.getValue("Match.player"))?void 0:e.id)})))){var o,d,u;if(null==(o=this.cards)||!o.length)return;if(null!=(d=this.cards[0])&&null!=(d=d.children)&&d.length||this.dealCard(),(null==(u=e.match.winners)?void 0:u.length)>0)for(var c,h=function(){var t,e,i=c.value;i.playerId===(null==(t=n.data)?void 0:t.id)&&(null!=i&&i.isFolded||(f.audio.playMusic("audios/sound_open"),null==(e=n.cards)||e.map((function(t,e){var n,a,r,o;if(t.getChildByName("card")){var d=t.getChildByName("card"),u=0===e?null==i||null==(n=i.cardOne)?void 0:n.rank:null==i||null==(a=i.cardTwo)?void 0:a.rank,c=0===e?null==i||null==(r=i.cardOne)?void 0:r.suit:null==i||null==(o=i.cardTwo)?void 0:o.suit,h=0===e?null==i?void 0:i.cardOneId:null==i?void 0:i.cardTwoId;if(u&&c&&h){var p=T(u,c),v=p.path,f=p.sprite;d.getComponent(P).onAdded(h),A(d,.5+e/2,l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(d,v,f);case 2:case"end":return t.stop()}}),t)}))))}}}))))},p=r(e.match.participants);!(c=p()).done;)h()}},o.clearCards=function(){var t;if(null!=(t=this.cards)&&t.length)for(var e,i=r(this.cards);!(e=i()).done;){var n,a=e.value;if(null!=a&&null!=(n=a.children)&&n.length)for(var l,s=r(a.children);!(l=s()).done;){l.value.destroy()}}},o.dealCard=function(){var t,e=this;this.clearCards(),null==(t=this.cards)||t.map(l(s().mark((function t(i,n){var a,r,l,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(a=i.getChildByName("card"))||!a.active){t.next=2;break}return t.abrupt("return");case 2:return l=y(e.node,i),t.next=5,w.match.createEmptyCard();case 5:(o=t.sent).setPosition(c(500,-300,0)),null==(r=e.node)||r.addChild(o),b(o,l,.5+n/2,(function(){o.removeFromParent(),o.getComponent(h).setContentSize(new p(i.w,i.h)),o.position=c(0,0,0),i.addChild(o)}));case 9:case"end":return t.stop()}}),t)}))))},o.handleLeaveTable=function(t,e){var i;e.playerId===(null==(i=this.data)?void 0:i.id)&&this.reset()},o.handleChangeTurn=function(t,e){var i;this.turn&&(this.turn.active=!1,this.turn.active=(null==(i=this.data)?void 0:i.id)===e.playerId);this.updateCard(e),this.checkTurn(),this.checkStatus(e)},o.updateCard=function(t){var e,i,n=this,a=t.matchData.participants.find((function(t){var e;return t.playerId===(null==(e=n.data)?void 0:e.id)}));a&&((null==(e=t.matchData.winners)?void 0:e.length)>0&&(null==a||!a.isFolded)&&(f.audio.playMusic("audios/sound_open"),null==(i=this.cards)||i.map((function(t,e){var i,n,r,o;if(t.getChildByName("card")){var d=t.getChildByName("card"),u=0===e?null==a||null==(i=a.cardOne)?void 0:i.rank:null==a||null==(n=a.cardTwo)?void 0:n.rank,c=0===e?null==a||null==(r=a.cardOne)?void 0:r.suit:null==a||null==(o=a.cardTwo)?void 0:o.suit,h=0===e?null==a?void 0:a.cardOneId:null==a?void 0:a.cardTwoId;if(u&&c&&h){var p=T(u,c),v=p.path,f=p.sprite;d.getComponent(P).onAdded(h),A(d,.5+e/2,l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(d,v,f);case 2:case"end":return t.stop()}}),t)}))))}}}))))},o.updateSlind=function(t){var e;this.slind.active=!1;var i=t.match,n=null==(e=t.match)?void 0:e.participants;if(i&&n.length&&this.data){var a,r,l;if(n.length>2&&i.buttonId===this.data.id)this.slind.getComponent(v).spriteFrame=null==(a=this.slind.getComponent(v).spriteAtlas)?void 0:a.getSpriteFrame("sl"),this.slind.active=!0;if(i.smallBlindId===this.data.id)this.slind.getComponent(v).spriteFrame=null==(r=this.slind.getComponent(v).spriteAtlas)?void 0:r.getSpriteFrame("sb"),this.slind.active=!0;if(i.bigBlindId===this.data.id)this.slind.getComponent(v).spriteFrame=null==(l=this.slind.getComponent(v).spriteAtlas)?void 0:l.getSpriteFrame("bb"),this.slind.active=!0}},o.checkFold=function(t){var e,i=this,n=null==(e=t.match)?void 0:e.participants.find((function(t){var e;return t.playerId===(null==(e=i.data)?void 0:e.id)}));n&&this.fold&&(this.fold.active=n.isFolded)},o.checkWait=function(t){var e,i,n=this;(null==(e=t.match)?void 0:e.participants.find((function(t){var e;return t.playerId===(null==(e=n.data)?void 0:e.id)})))||null!=(i=t.match)&&null!=(i=i.table)&&i.handOver?this.wait.active=!1:this.wait.active=!0},o.checkTurn=function(){if(this.turn.active){var t,e=this.node.getChildByName("Layout");if(e)e.getComponent(v).spriteFrame=null==(t=e.getComponent(v).spriteAtlas)?void 0:t.getSpriteFrame("player_bg_turn")}else{var i,n=this.node.getChildByName("Layout");if(n)n.getComponent(v).spriteFrame=null==(i=n.getComponent(v).spriteAtlas)?void 0:i.getSpriteFrame("player_bg")}},o.checkStatus=function(t){var e,i=this;if((null==(e=t.matchData.winners)?void 0:e.length)>0||this.turn.active)this.status.active=!1;else{var n,a=null==(n=t.matchData)?void 0:n.participants.find((function(t){var e;return t.playerId===(null==(e=i.data)?void 0:e.id)}));if(!a||!a.lastAction)return void(this.status.active=!1);a&&this.status?(this.status.active=!0,this.status.getComponent(I).onAdded(a.bet,a.lastAction)):this.status.active=!1}},o.checkWinner=function(t){var e,i=this;if((null==(e=t.match.winners)?void 0:e.length)>0&&this.winHat){var n=t.match.winners.find((function(t){var e;return t.id===(null==(e=i.data)?void 0:e.id)}));this.winHat.active=!!n}},o.onDestroy=function(){f.message.off(C.LEAVE_TABLE,this.handleLeaveTable,this),f.message.off(C.MATCH_STARTED,this.handleMatchStarted,this),f.message.off(C.CHANGE_TURN,this.handleChangeTurn,this),f.message.off(C.PLAYERS_UPDATED,this.handlePlayersUpdated,this)},o.reset=function(){this.node.destroy()},e}(g)).prototype,"cards",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(R.prototype,"turn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(R.prototype,"slind",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(R.prototype,"fold",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(R.prototype,"winHat",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(R.prototype,"wait",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(R.prototype,"status",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=R))||z)||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/PositionUtils.ts",["cc"],(function(t){var o,n,e,i;return{setters:[function(t){o=t.cclegacy,n=t.UITransform,e=t.v3,i=t.Layout}],execute:function(){function r(t){var o=t.getPosition(),e=t.parent;if(e){var i=e.getComponent(n);if(i)return i.convertToWorldSpaceAR(o)}return o}t({getCenterPosition:function(t){var o=t.getComponent(n);if(o){var i=o.width,r=o.height,u=t.position.x+.5*i,s=t.position.y+.5*r;return e(u,s,t.position.z)}return t.position},getLayoutPosition:function(t){var o,n=null==(o=t.parent)?void 0:o.getComponent(i);n&&n.updateLayout();return r(t)},getNodeBounds:function(t){var o=t.getComponent(n);if(o){var e=r(t),i=o.width,u=o.height,s=o.anchorPoint;return{top:e.y+u*(1-s.y),bottom:e.y-u*s.y,left:e.x-i*s.x,right:e.x+i*(1-s.x)}}return null},getNodePosition:function(t,o){var e=t.getComponent(n);if(e)return e.convertToNodeSpaceAR(r(o));return o.getPosition()},getRelativePosition:function(t,o){var e=r(t),i=o.getComponent(n);if(i)return i.convertToNodeSpaceAR(e);return e},getWorldPosition:r}),o._RF.push({},"19e39EhiIJL06gwDe90ysUU","PositionUtils",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/Priority.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var i,s,c;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy},function(t){c=t.BranchNode}],execute:function(){s._RF.push({},"f7555DSpj9LbYpRDi8/UKdN","Priority",void 0);t("Priority",function(t){function s(){return t.apply(this,arguments)||this}i(s,t);var c=s.prototype;return c.success=function(){t.prototype.success.call(this),this._control.success()},c.fail=function(){t.prototype.fail.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()},s}(c));s._RF.pop()}}}));

System.register("chunks:///_virtual/RandomManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"3e09eJBwfZBsLPqFszZLvMS","RandomManager",void 0),n("RandomManager",function(){function n(){this.random=null}var e=n.prototype;return e.setRandom=function(n){this.random=n},e.getRandom=function(){return this.random()},e.getRandomFloat=function(n,t){return void 0===n&&(n=0),void 0===t&&(t=1),this.getRandom()*(t-n)+n},e.getRandomInt=function(n,t,e){switch(void 0===e&&(e=2),n=Math.ceil(n),t=Math.floor(t),e){case 1:return Math.floor(this.getRandom()*(t-n))+n;case 2:return Math.floor(this.getRandom()*(t-n+1))+n;case 3:return Math.floor(this.getRandom()*(t-n-1))+n+1}return 0},e.getRandomByMinMaxList=function(n,t,e){for(var o=[],a=0;a<e;a++)o.push(this.getRandomInt(n,t));return o},e.getRandomByObjectList=function(n,t){for(var e=n.slice(),o=[],a=0;a<t;a++){var r=this.getRandomInt(0,e.length,1);o.push(e.splice(r,1)[0])}return o},e.getRandomBySumList=function(n,t){for(var e=t,o=0,a=[],r=0;r<n;r++)o=this.getRandomInt(0,e,3),r==n-1?o=e:e-=o,a.push(o);return a},t(n,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new n,this._instance.setRandom(Math.random)),this._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/RebuyModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(t){var e,u,n,o,i;return{setters:[function(t){e=t.inheritsLoose,u=t.createClass},function(t){n=t.cclegacy},function(t){o=t.ecs},function(t){i=t.VM}],execute:function(){var s;n._RF.push({},"c03193hQjJEnK1vqlt5RHpO","RebuyModelComp",void 0);t("RebuyModelComp",o.register("RebuyModel")(s=function(t){function n(){for(var e,u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).vm=new r,e}e(n,t);var o=n.prototype;return o.setCanAutoRebuy=function(t){this.vm.canAutoRebuy=t},o.setIsAutoRebuy=function(t){this.vm.isAutoRebuy=t},o.setAutoRebuyAmount=function(t){this.vm.autoRebuyAmount=t},o.vmAdd=function(){i.add(this.vm,"Rebuy")},o.vmRemove=function(){this.vm.reset(),i.remove("Rebuy")},o.reset=function(){this.vmRemove()},u(n,[{key:"canAutoRebuy",get:function(){return this.vm.canAutoRebuy}},{key:"isAutoRebuy",get:function(){return this.vm.isAutoRebuy}},{key:"autoRebuyAmount",get:function(){return this.vm.autoRebuyAmount}},{key:"isLeaveNext",get:function(){return this.vm.isLeaveNext}}]),n}(o.Comp))||s);var r=function(){function t(){this.canAutoRebuy=!1,this.isAutoRebuy=!1,this.autoRebuyAmount=0,this.isLeaveNext=!1}return t.prototype.reset=function(){this.canAutoRebuy=!1,this.isAutoRebuy=!1,this.autoRebuyAmount=0,this.isLeaveNext=!1},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/RegexUtil.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dec9bVPigFCmKy5NVk+0y7h","RegexUtil",void 0);e("RegexUtil",function(){function e(){}return e.isDoubleWord=function(e){return/[^\x00-\xff]/.test(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,s,o,a,l,u,d,i;return{setters:[function(e){n=e.createClass,r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){s=e.cclegacy,o=e.assetManager,a=e.error,l=e.warn,u=e.Asset,d=e.js,i=e.resources}],execute:function(){s._RF.push({},"1a2e4jFffpHrYjrpxbnC760","ResLoader",void 0);var c=e("ResLoader",function(){function e(){this.defaultBundleName="resources",this.cdn=!1,this.bundles=new Map}var s=e.prototype;return s.init=function(e){for(var n in this.cdn=e.enable,e.packages)this.bundles.set(n,e.packages[n])},s.loadRemote=function(e){var n=null,r=null;2==(arguments.length<=1?0:arguments.length-1)?(n=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):r=arguments.length<=1?void 0:arguments[1],o.loadRemote(e,n,r)},s.loadBundle=function(e,n){return new Promise((function(r,t){o.loadBundle(e,{version:n},(function(e,n){if(e)return a(e);r(n)}))}))},s.removeBundle=function(e){var n=o.bundles.get(e);n&&(n.releaseAll(),o.removeBundle(n))},s.preload=function(e,n,r,t,s){var o=null;"string"==typeof n||n instanceof Array?(o=this.parseLoadResArgs(n,r,t,s)).bundle=e:(o=this.parseLoadResArgs(e,n,r,t)).bundle=this.defaultBundleName,o.preload=!0,this.loadByArgs(o)},s.preloadAsync=function(e,n,r){var t=this;return new Promise((function(s,o){t.preload(e,n,r,(function(e,n){e&&l(e.message),s(n)}))}))},s.preloadDir=function(e,n,r,t,s){var o=null;"string"==typeof n?(o=this.parseLoadResArgs(n,r,t,s)).bundle=e:(o=this.parseLoadResArgs(e,n,r,t)).bundle=this.defaultBundleName,o.dir=o.paths,o.preload=!0,this.loadByArgs(o)},s.load=function(e,n,r,t,s){var o=null;"string"==typeof n||n instanceof Array?(o=this.parseLoadResArgs(n,r,t,s)).bundle=e:(o=this.parseLoadResArgs(e,n,r,t)).bundle=this.defaultBundleName,this.loadByArgs(o)},s.loadAsync=function(e,n,r){var t=this;return new Promise((function(s,o){t.load(e,n,r,(function(e,n){e&&l(e.message),s(n)}))}))},s.loadDir=function(e,n,r,t,s){var o=null;"string"==typeof n?(o=this.parseLoadResArgs(n,r,t,s)).bundle=e:(o=this.parseLoadResArgs(e,n,r,t)).bundle=this.defaultBundleName,o.dir=o.paths,this.loadByArgs(o)},s.release=function(e,n){void 0===n&&(n=this.defaultBundleName);var r=o.getBundle(n);if(r){var t=r.get(e);t&&this.releasePrefabtDepsRecursively(t)}},s.releaseDir=function(e,n){var r=this;void 0===n&&(n=this.defaultBundleName);var t=o.getBundle(n);if(t){var s=t.getDirWithPath(e);s&&s.map((function(e){r.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=n&&o.removeBundle(t)}},s.releasePrefabtDepsRecursively=function(e){if(e instanceof u)e.decRef();else{var n=o.assets.get(e);n&&n.decRef()}},s.get=function(e,n,r){return void 0===r&&(r=this.defaultBundleName),o.getBundle(r).get(e,n)},s.parseLoadResArgs=function(e,n,r,t){var s=e,o=n,a=r,l=t;if(void 0===t){var i=d.isChildClassOf(n,u);r?(l=r,i&&(a=null)):void 0!==r||i||(l=n,a=null,o=null),void 0===r||i||(a=n,o=null)}return{paths:s,type:o,onProgress:a,onComplete:l}},s.loadByBundleAndArgs=function(e,n){n.dir?n.preload?e.preloadDir(n.paths,n.type,n.onProgress,n.onComplete):e.loadDir(n.paths,n.type,n.onProgress,n.onComplete):n.preload?e.preload(n.paths,n.type,n.onProgress,n.onComplete):e.load(n.paths,n.type,n.onProgress,n.onComplete)},s.loadByArgs=function(){var e=r(t().mark((function e(n){var r,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.bundle){e.next=13;break}if(!(r=o.bundles.get(n.bundle))){e.next=6;break}this.loadByBundleAndArgs(r,n),e.next=11;break;case 6:return s=this.cdn?this.bundles.get(n.bundle):"",e.next=9,this.loadBundle(n.bundle,s);case 9:(r=e.sent)&&this.loadByBundleAndArgs(r,n);case 11:e.next=14;break;case 13:this.loadByBundleAndArgs(i,n);case 14:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.dump=function(){o.assets.forEach((function(e,n){console.log(o.assets.get(n))})),console.log("当前资源总数:"+o.assets.count)},n(e,[{key:"maxConcurrency",get:function(){return o.downloader.maxConcurrency},set:function(e){o.downloader.maxConcurrency=e}},{key:"maxRequestsPerFrame",get:function(){return o.downloader.maxRequestsPerFrame},set:function(e){o.downloader.maxRequestsPerFrame=e}},{key:"maxRetryCount",get:function(){return o.downloader.maxRetryCount},set:function(e){o.downloader.maxRetryCount=e}},{key:"retryInterval",get:function(){return o.downloader.retryInterval},set:function(e){o.downloader.retryInterval=e}}]),e}());e("resLoader",new c);s._RF.pop()}}}));

System.register("chunks:///_virtual/RoomItemViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts","./GameUIConfig.ts"],(function(t){var o,e,n,i,r,c,s;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){i=t.oops},function(t){r=t.ecs},function(t){c=t.CCVMParentComp},function(t){s=t.UIID}],execute:function(){var a;e._RF.push({},"d55e4G1jWtMDLvpqjdm1SOH","RoomItemViewComp",void 0);var u=n.ccclass;n.property,t("RoomItemViewComp",u("RoomItemViewComp")(a=r.register("RoomItemView",!1)(a=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).data=void 0,o}o(e,t);var n=e.prototype;return n.onAdded=function(t){this.data=t},n.start=function(){},n.btn_join=function(t){i.gui.open(s.Table,this.data.id)},n.reset=function(){this.node.destroy()},e}(c))||a)||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/RoomModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(t){var o,e,n,i,r;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.ecs},function(t){r=t.VM}],execute:function(){var u;n._RF.push({},"a6f1a7ZpEtBLbDRkglMr8lY","RoomModelComp",void 0);t("RoomModelComp",i.register("RoomModel")(u=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).vm=new s,o}o(n,t);var i=n.prototype;return i.vmAdd=function(){r.add(this.vm,"Room")},i.vmRemove=function(){this.vm.reset(),r.remove("Room")},i.reset=function(){this.vmRemove()},e(n,[{key:"data",get:function(){return this.vm.data},set:function(t){this.vm.data=t}},{key:"pageCount",get:function(){return this.vm.pageCount},set:function(t){this.vm.pageCount=t}}]),n}(i.Comp))||u);var s=function(){function t(){this.data=null,this.pageCount=0}return t.prototype.reset=function(){this.data=null,this.pageCount=0},t}();n._RF.pop()}}}));

System.register("chunks:///_virtual/RoomViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCComp.ts","./SingletonModuleComp.ts","./RoomItemViewComp.ts","./ViewModel.ts"],(function(e){var o,t,r,n,i,a,c,s,l,m,u,p,f,d,C,g,h,w,R;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,a=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,m=e.ScrollView,u=e.Prefab,p=e.Node,f=e.instantiate},function(e){d=e.oops},function(e){C=e.ecs},function(e){g=e.CCComp},function(e){h=e.smc},function(e){w=e.RoomItemViewComp},function(e){R=e.VM}],execute:function(){var v,y,b,V,I,x,z,L,M,P;s._RF.push({},"d8d6c9gCHNPZIbgEJxg7aLr","RoomViewComp",void 0);var S=l.ccclass,_=l.property;e("RoomViewComp",(v=S("RoomViewComp"),y=C.register("RoomView",!1),b=_(m),V=_(u),I=_(p),v(x=y((L=o((z=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return o=e.call.apply(e,[this].concat(i))||this,r(o,"roomView",L,n(o)),r(o,"roomItem",M,n(o)),r(o,"roomContent",P,n(o)),o}t(o,e);var s=o.prototype;return s.start=function(){this.loadRoomItem()},s.loadRoomItem=function(){var e=a(c().mark((function e(){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.player.loadRooms();case 3:o=R.getValue("Room.data"),this.generateRoomItem(o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.gui.toast(""+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.generateRoomItem=function(e){for(var o,t=i(e);!(o=t()).done;){var r=o.value,n=f(this.roomItem.data);n.getComponent(w).onAdded(r),this.roomContent.addChild(n)}},s.reset=function(){this.node.destroy()},o}(g)).prototype,"roomView",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=o(z.prototype,"roomItem",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=o(z.prototype,"roomContent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=z))||x)||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./GameQueryConfig.ts","./Oops.ts","./AudioManager.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./StorageManager.ts","./StorageSecuritySimple.ts","./TimerManager.ts","./GameManager.ts","./LayerManager.ts"],(function(e){var t,n,i,o,a,r,s,u,c,g,f,l,p,m,d,h,y,E,v,S,M,w,b,A,G,C,R,_,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.Node,g=e.game,f=e.Game,l=e.sys,p=e.screen,m=e.director,d=e.Component,h=e.JsonAsset},function(e){y=e.GameConfig},function(e){E=e.GameQueryConfig},function(e){v=e.version,S=e.oops},function(e){M=e.AudioManager},function(e){w=e.EventMessage},function(e){b=e.message},function(e){A=e.resLoader},function(e){G=e.StorageManager},function(e){C=e.StorageSecuritySimple},function(e){R=e.TimerManager},function(e){_=e.GameManager},function(e){L=e.LayerManager}],execute:function(){var N,T,O,H,D;s._RF.push({},"90b9cOmlmBCnpCpEpgvdrQr","Root",void 0);var I=u.property,z=!1;e("Root",(N=I({type:c,tooltip:"游戏层"}),T=I({type:c,tooltip:"界面层"}),H=t((O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"game",H,o(t)),i(t,"gui",D,o(t)),t.persist=null,t}n(t,e);var s=t.prototype;return s.onLoad=function(){z||(z=!0,console.log("Oops Framework v"+v),this.enabled=!1,this.iniStart(),this.loadConfig().then())},s.loadConfig=function(){var e=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.persist=new c("OopsFrameworkPersistNode"),m.addPersistRootNode(this.persist),S.res=A,t="config",e.next=6,S.res.loadAsync(t,h);case 6:(n=e.sent)?(S.config.query=new E,S.config.game=new y(n),S.res.defaultBundleName=S.config.game.bundleDefault,S.res.init(S.config.game.data.bundle),S.storage=new G,S.storage.init(new C),S.message=b,S.audio=this.persist.addComponent(M),S.audio.load(),S.timer=this.persist.addComponent(R),S.game=new _(this.game),S.gui=new L,S.gui.mobileSafeArea=S.config.game.mobileSafeArea,S.gui.initLayer(this.gui),S.http.server=S.config.game.httpServer,S.http.timeout=S.config.game.httpTimeout,g.frameRate=S.config.game.frameRate,this.enabled=!0,this.init(),this.run(),S.res.release(t)):this.loadConfig().then();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.update=function(e){S.ecs.execute(e)},s.iniStart=function(){},s.initGui=function(){},s.initEcsSystem=function(){},s.run=function(){},s.init=function(){this.initGui(),this.initEcsSystem(),S.ecs.init(),g.on(f.EVENT_SHOW,this.onShow,this),g.on(f.EVENT_HIDE,this.onHide,this),l.isMobile||(p.on("window-resize",(function(){S.message.dispatchEvent(w.GAME_RESIZE)}),this),p.on("fullscreen-change",(function(){S.message.dispatchEvent(w.GAME_FULL_SCREEN)}),this)),p.on("orientation-change",(function(){S.message.dispatchEvent(w.GAME_ORIENTATION)}),this)},s.onShow=function(){S.timer.load(),S.audio.resumeAll(),m.resume(),g.resume(),S.message.dispatchEvent(w.GAME_SHOW)},s.onHide=function(){S.timer.save(),S.audio.pauseAll(),m.pause(),g.pause(),S.message.dispatchEvent(w.GAME_HIDE)},t}(d)).prototype,"game",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(O.prototype,"gui",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O));s._RF.pop()}}}));

System.register("chunks:///_virtual/RotateUtil.ts",["cc","./Vec3Util.ts"],(function(t){var o,n,r,e,i;return{setters:[function(t){o=t.cclegacy,n=t.Quat,r=t.Vec3,e=t.toRadian},function(t){i=t.Vec3Util}],execute:function(){o._RF.push({},"103324kr75Hi5d7RZCcRt3P","RotateUtil",void 0);t("RotateUtil",function(){function t(){}return t.rotateAround=function(t,o,r){var e=new n;n.rotateAround(e,t.getRotation(),o.normalize(),r),t.setRotation(e)},t.rotateAroundTarget=function(t,o,e,i){var a=t.worldPosition,u=o.worldPosition,c=new n,s=new r;n.fromAxisAngle(c,e,i),r.subtract(s,u,a),r.transformQuat(s,s,c),r.add(s,a,s),o.setWorldPosition(s),n.rotateAround(c,o.worldRotation,e,i),n.normalize(c,c),o.setWorldRotation(c)},t.circularEdgePosition=function(t,o,a){var u=i.z.multiplyScalar(o),c=i.sub(u,t),s=new r,l=new n;return n.fromAxisAngle(l,r.UP,e(a)),r.transformQuat(s,c,l),r.add(s,t,s),s},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/RtToModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,l,s,c,u,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Camera,s=e.MeshRenderer,c=e.RenderTexture,u=e.view,h=e.gfx,p=e.Component}],execute:function(){var d,f,m,y,g,w,b;o._RF.push({},"dbd7dMQYutDs7I7uj+3zIiU","RtToModel",void 0);var v=a.ccclass,R=a.property;e("RtToModel",(d=v("RtToModel"),f=R(l),m=R(s),d((w=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"camara",w,n(t)),i(t,"model",b,n(t)),t.rt=new c,t}r(t,e);var o=t.prototype;return o.start=function(){var e=u.getVisibleSize(),t=new h.ColorAttachment,r=new h.DepthStencilAttachment,i=new h.RenderPassInfo([t],r);this.rt.reset({width:e.width,height:e.height,passInfo:i}),this.camara.targetTexture=this.rt,this.model.material.setProperty("mainTexture",this.rt)},o.onDestroy=function(){this.rt.destroy()},t}(p)).prototype,"camara",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/RtToSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n,s,h,a,p,u,c,l,f,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,h=t.Camera,a=t.Sprite,p=t.Node,u=t.RenderTexture,c=t.UITransform,l=t.gfx,f=t.SpriteFrame,T=t.Component}],execute:function(){var d,y,v,m,g,E,b,C,R,S,w;n._RF.push({},"f608cdDWBNEKLILVNBcQYvf","RtToSprite",void 0);var _=s.ccclass,O=s.property;t("RtToSprite",(d=_("RtToSprite"),y=O({type:h,tooltip:"渲染模型的三维摄像机"}),v=O({type:a,tooltip:"显示模型的二维精灵组件"}),m=O({tooltip:"是否触摸控制旋转"}),g=O({type:p,tooltip:"三维模型",visible:function(){return!0===this.rotation}}),d((C=e((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"camera",C,r(e)),o(e,"sprite",R,r(e)),o(e,"rotation",S,r(e)),o(e,"model",w,r(e)),e.rt=new u,e.touched=!1,e}i(e,t);var n=e.prototype;return n.start=function(){var t=this.sprite.getComponent(c);this.refreshRenderTexture(t.width,t.height),this.rotation&&(this.sprite.node.on(p.EventType.TOUCH_START,this.onTouchStart,this),this.sprite.node.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.on(p.EventType.TOUCH_END,this.onTouchEnd,this),this.sprite.node.on(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this))},n.onTouchStart=function(t){this.touched=!0},n.onTouchMove=function(t){if(this.touched){var e=this.model.eulerAngles,i=t.touch.getDelta().x;e.y+=-i,this.model.eulerAngles=e}},n.onTouchEnd=function(t){this.touched=!1},n.refreshRenderTexture=function(t,e){var i=new l.ColorAttachment,o=new l.DepthStencilAttachment,r=new l.RenderPassInfo([i],o);this.rt.reset({width:t,height:e,passInfo:r});var n=this.sprite.spriteFrame,s=new f;s.reset({originalSize:n.originalSize,rect:n.rect,offset:n.offset,isRotate:n.rotated,borderTop:n.insetTop,borderLeft:n.insetLeft,borderBottom:n.insetBottom,borderRight:n.insetRight}),this.camera.targetTexture=this.rt,s.texture=this.rt,this.sprite.spriteFrame=s},n.onDestroy=function(){this.rotation&&(this.sprite.node.off(p.EventType.TOUCH_START,this.onTouchStart,this),this.sprite.node.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.off(p.EventType.TOUCH_END,this.onTouchEnd,this),this.sprite.node.off(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this)),this.rt.destroy()},e}(T)).prototype,"camera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(b.prototype,"sprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(b.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(b.prototype,"model",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/SeedRandom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomManager.ts"],(function(n){var t,e,r;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){r=n.RandomManager}],execute:function(){e._RF.push({},"9b02bnNwwZEWq9Ft59BRCIB","SeedRandom",void 0);n("SeedRandom",function(){function n(n){this.rm=void 0,this.sr=void 0,this.sr=new Math.seedrandom(n),this.rm=new r,this.rm.setRandom(this.sr)}return n.prototype.destroy=function(){this.rm=null,this.sr=null},t(n,[{key:"random",get:function(){return this.rm}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Selector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var n,c,o;return{setters:[function(t){n=t.inheritsLoose},function(t){c=t.cclegacy},function(t){o=t.BranchNode}],execute:function(){c._RF.push({},"90470XqT/FGHo/PRQktLcYy","Selector",void 0);t("Selector",function(t){function c(){return t.apply(this,arguments)||this}n(c,t);var o=c.prototype;return o.success=function(){t.prototype.success.call(this),this._control.success()},o.fail=function(){t.prototype.fail.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()},o._run=function(n){this._nodeRunning?this._nodeRunning.run(this._blackboard):t.prototype._run.call(this)},c}(o));c._RF.pop()}}}));

System.register("chunks:///_virtual/Sequence.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var n,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){c=t.BranchNode}],execute:function(){e._RF.push({},"1ef80bgYZBPXqCDIpzHpbBJ","Sequence",void 0);t("Sequence",function(t){function e(n){return t.call(this,n)||this}n(e,t);var c=e.prototype;return c.success=function(){t.prototype.success.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.success()},c.fail=function(){t.prototype.fail.call(this),this._control.fail()},c._run=function(n){this._nodeRunning?this._nodeRunning.run(this._blackboard):t.prototype._run.call(this)},e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonModuleComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(e){var t,n,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy},function(e){o=e.ecs}],execute:function(){var r;i._RF.push({},"806caCrAl1Ga6MabA6H52zR","SingletonModuleComp",void 0);var c=e("SingletonModuleComp",o.register("SingletonModule")(r=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).initialize=void 0,t.network=void 0,t.worker=void 0,t}return t(i,e),i.prototype.reset=function(){},n(i,[{key:"account",get:function(){return this.initialize.account}},{key:"player",get:function(){return this.initialize.player}},{key:"match",get:function(){return this.initialize.match}},{key:"networkManager",get:function(){return this.network}},{key:"webWorker",get:function(){return this.worker}}]),i}(o.Comp))||r);e("smc",o.getSingleton(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/SpineFinishedRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var t,i,n,s,o,r,a,p,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.sp,p=e.Component},function(e){l=e.oops}],execute:function(){var h,c,u;o._RF.push({},"9589eKB/RZKXpxoYhz5SyC7","SpineFinishedRelease",void 0);var d=r.ccclass,f=r.property;e("SpineFinishedRelease",d("SpineFinishedRelease")((u=t((c=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"isDestroy",u,s(t)),t.spine=void 0,t.resPath=null,t}i(t,e);var o=t.prototype;return o.setResPath=function(e){this.resPath=e},o.onLoad=function(){var e=this;this.spine=this.getComponent(a.Skeleton),this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.resPath?l.res.load(this.resPath,a.SkeletonData,(function(t,i){t?console.error("加载【"+e.resPath+"】的 SPINE 资源不存在"):(e.spine.skeletonData=i,e.spine.setAnimation(0,"animation",!1))})):this.spine.setAnimation(0,"animation",!1)},o.onSpineComplete=function(){this.isDestroy?this.node.destroy():this.node.removeFromParent()},t}(p)).prototype,"isDestroy",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=c))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/SpinViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./TableEvent.ts"],(function(t){var e,n,i,o,r,s,a,c,u,p,l,h,d,f,w,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator,u=t.ProgressBar,p=t.Label,l=t.CCInteger,h=t.Node,d=t.tween,f=t.Component},function(t){w=t.oops},function(t){v=t.TableEvent}],execute:function(){var C,y,g,T,b,m,E,I,A;a._RF.push({},"579e00HkOpEGqvotGJbKWdW","SpinViewComp",void 0);var _=c.ccclass,B=c.property;t("SpinViewComp",(C=_("SpinViewComp"),y=B(u),g=B(p),T=B({type:l}),C((E=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"progressBar",E,o(e)),i(e,"label",I,o(e)),i(e,"countdownTime",A,o(e)),e.currentCount=0,e.activeTween=void 0,e.playerId=void 0,e.audioPlay=!1,e}n(e,t);var a=e.prototype;return a.onAdded=function(t){this.playerId=t},a.start=function(){},a.onLoad=function(){this.node.on(h.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.onActiveChanged,this)},a.onActiveChanged=function(){this.node.activeInHierarchy?(this.audioPlay=!1,this.startCountdown(this.countdownTime)):this.activeTween&&this.activeTween.stop()},a.startCountdown=function(t){var e=this;this.progressBar&&(this.activeTween&&this.activeTween.stop(),this.currentCount=t,this.updateLabel(this.currentCount),this.drawCircle(0),this.activeTween=d(this.progressBar).to(t,{progress:1},{progress:function(t,e,n,i){return i},onUpdate:function(n,i){var o=Math.ceil(t*(1-(i||0)));e.updateLabel(o)}}).call((function(){w.audio.stopMusic(),e.onCountdownComplete()})).start())},a.resetCountdown=function(){this.progressBar&&(this.progressBar.progress=0)},a.setCountdownTime=function(t){this.countdownTime=t,this.node.activeInHierarchy&&this.startCountdown(t)},a.updateLabel=function(t){this.label&&(this.label.string=(t-2>0?t-2:0)+"s"),t-2<=4&&!this.audioPlay&&(this.audioPlay=!0,w.audio.playMusic("audios/sound_countdown"))},a.drawCircle=function(t){this.progressBar&&(this.progressBar.progress=t)},a.onCountdownComplete=function(){var t=r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.audioPlay=!1,w.message.dispatchEvent(v.UPDATE_FOLD,this.playerId);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.reset=function(){this.activeTween&&this.activeTween.stop(),this.node.destroy()},a.onDestroy=function(){this.activeTween&&this.activeTween.stop(),this.node.off(h.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.onActiveChanged,this)},e}(f)).prototype,"progressBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(m.prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(m.prototype,"countdownTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9}}),b=m))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteHelper.ts",["cc","./Oops.ts"],(function(e){var t,r,n,o,i,a;return{setters:[function(e){t=e.cclegacy,r=e.SpriteFrame,n=e.Sprite,o=e.Texture2D,i=e.SpriteAtlas},function(e){a=e.oops}],execute:function(){t._RF.push({},"baa901qgClFi7AitnPJoYNq","SpriteHelper",void 0);e("loadResImageSpriteToNode",(function(e,t){var i=a.res.get(t,r);if(i){var s=e.getComponent(n);s&&(s.spriteFrame=i)}else a.res.loadAsync("bundle",t).then((function(t){var i=new o;i.image=t;var a=new r;a.texture=i;var s=e.getComponent(n);s&&(s.spriteFrame=a)}))})),e("loadResSpriteAtlasToNode",(function(e,t,r){var o=a.res.get(t,i);if(o){var s=e.getComponent(n);s&&(s.spriteFrame=o.getSpriteFrame(r))}else a.res.loadAsync("bundle",t).then((function(t){var o=t.getSpriteFrame(r),i=e.getComponent(n);i&&(i.spriteFrame=o)}))}));t._RF.pop()}}}));

System.register("chunks:///_virtual/StatusViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,s,a,i,o,r,n,u,l,p,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,n=t.Label,u=t.Node,l=t.Sprite,p=t.Component},function(t){c=t.oops}],execute:function(){var d,m,g,h,y,b,F;o._RF.push({},"99029uF5QVFb7FOHTHt95FW","StatusViewComp",void 0);var C=r.ccclass,f=r.property;t("StatusViewComp",(d=C("StatusViewComp"),m=f(n),g=f(u),d((b=e((y=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"label",b,i(e)),a(e,"status",F,i(e)),e}s(e,t);var o=e.prototype;return o.start=function(){},o.onAdded=function(t,e){t&&("RAISE"===e||"FULL"===e||"HALF"===e||"QUARTER"===e||"ALLIN"===e)&&(this.label.string=t+" $"),this.loadStatus(e)},o.onLoad=function(){},o.loadStatus=function(t){var e,s,a,i,o,r,n,u;switch(t){case"QUARTER":this.status.getComponent(l).spriteFrame=null==(e=this.status.getComponent(l).spriteAtlas)?void 0:e.getSpriteFrame("quarter"),c.audio.playMusic("audios/quarter_boy");break;case"HALF":this.status.getComponent(l).spriteFrame=null==(s=this.status.getComponent(l).spriteAtlas)?void 0:s.getSpriteFrame("half"),c.audio.playMusic("audios/half_boy");break;case"FULL":this.status.getComponent(l).spriteFrame=null==(a=this.status.getComponent(l).spriteAtlas)?void 0:a.getSpriteFrame("full"),c.audio.playMusic("audios/full_boy");break;case"ALLIN":this.status.getComponent(l).spriteFrame=null==(i=this.status.getComponent(l).spriteAtlas)?void 0:i.getSpriteFrame("allin"),c.audio.playMusic("audios/all_boy");break;case"FOLD":this.status.getComponent(l).spriteFrame=null==(o=this.status.getComponent(l).spriteAtlas)?void 0:o.getSpriteFrame("fold"),c.audio.playMusic("audios/fold_boy");break;case"RAISE":this.status.getComponent(l).spriteFrame=null==(r=this.status.getComponent(l).spriteAtlas)?void 0:r.getSpriteFrame("raise"),c.audio.playMusic("audios/raise_boy");break;case"CHECK":this.status.getComponent(l).spriteFrame=null==(n=this.status.getComponent(l).spriteAtlas)?void 0:n.getSpriteFrame("check"),c.audio.playMusic("audios/check_boy");break;case"CALL":this.status.getComponent(l).spriteFrame=null==(u=this.status.getComponent(l).spriteAtlas)?void 0:u.getSpriteFrame("call"),c.audio.playMusic("audios/call_boy")}},o.reset=function(){this.node.destroy()},o.onDestroy=function(){},e}(p)).prototype,"label",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(y.prototype,"status",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,r,n,i;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e.sys},function(e){i=e.PREVIEW}],execute:function(){r._RF.push({},"ed226gLF85Oyr+WhA9TJZLX","StorageManager",void 0);e("StorageManager",function(){function e(){this.id=null,this.iss=null}var r=e.prototype;return r.init=function(e){this.iss=e},r.setUser=function(e){this.id=e},r.set=function(e,t){var r=this.getKey(e);if(null!=e){if(this.encrypted&&(r=this.iss.encryptKey(r)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error("解析失败，str = "+t)}else"number"==typeof t&&(t+="");this.encrypted&&(t=this.iss.encrypt(t)),n.localStorage.setItem(r,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},r.get=function(e,t){if(void 0===t&&(t=""),null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=this.iss.encryptKey(e));var r=n.localStorage.getItem(e);return null!=r&&""!==r&&this.encrypted&&(r=this.iss.decrypt(r)),null===r?t:r},r.getNumber=function(e,t){void 0===t&&(t=0);var r=this.get(e);return"0"==r?Number(r):Number(r)||t},r.getBoolean=function(e){return"true"===this.get(e).toLowerCase()},r.getJson=function(e,t){var r=this.get(e);return r&&JSON.parse(r)||t},r.remove=function(e){if(null!=e){var t=this.getKey(e);this.encrypted&&(t=this.iss.encryptKey(t)),n.localStorage.removeItem(t)}else console.error("存储的key不能为空")},r.clear=function(){n.localStorage.clear()},r.getKey=function(e){return null==this.id||""==this.id?e:this.id+"_"+e},t(e,[{key:"encrypted",get:function(){return!i}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/StorageSecurityCrypto.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fbbbdioMCNOmI7KMEU46FfN","StorageSecurityCrypto",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/StorageSecuritySimple.ts",["cc","./Oops.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.oops}],execute:function(){t._RF.push({},"386e3+fu+RJB5VSgow0kwS4","StorageSecuritySimple",void 0);e("StorageSecuritySimple",function(){function e(){this.secretkey=null;var e=r.config.game.localDataKey,t=r.config.game.localDataIv;this.secretkey=e+t}var t=e.prototype;return t.encrypt=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t},t.decrypt=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t},t.encryptKey=function(e){return this.encrypt(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/StringFormat.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"85fe8Gc6h5Ava+JsdbBs8cR","StringFormat",void 0);t("StringFormatFunction",new(function(){function t(){}var e=t.prototype;return e.deal=function(t,e){if(""===e)return t;var n=(e=e.toLowerCase().trim()).match(/^[a-z|A-Z]+/gi),i=e.match(/\d+$/gi),r="",o=0,c="";if(n&&(r=n[0]),i&&(o=parseInt(i[0])),"number"==typeof t)switch(r){case"int":c=this.int(t);break;case"fix":c=this.fix(t,o);break;case"kmbt":c=this.KMBT(t);break;case"per":c=this.per(t,o);break;case"sep":c=this.sep(t)}else{switch(r){case"limit":c=this.limit(t,o)}c=t}return c},e.sep=function(t){return Math.round(t).toString().replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,")},e.time_m=function(t){},e.time_s=function(t){},e.time_ms=function(t){},e.timeStamp=function(t){return new Date(t).toString()},e.per=function(t,e){return Math.round(100*t).toFixed(e)},e.int=function(t){return Math.round(t)},e.fix=function(t,e){return t.toFixed(e)},e.limit=function(t,e){return t.substring(0,e)},e.KMBT=function(t,e){return this.compressUnit(t,[1e3,1e6,1e9,1e12],["","K","M","B","T"],2)},e.compressUnit=function(t,e,n,i){void 0===i&&(i=2);var r,o=e,c=n,u="";for(r=0;r<o.length;r++){if(t<o[r]){u=r>0?(t/o[r-1]).toFixed(i):t.toFixed(0);break}}return u+c[r]},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"aa8435LSBtAR5HPsje6IJ2w","StringUtil",void 0);r("StringUtil",function(){function r(){}return r.guid=function(){for(var r="",t=1;t<=32;t++){r+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(r+="-")}return r},r.numberTotPermil=function(r){return r.toLocaleString()},r.numberToThousand=function(r,t){void 0===t&&(t=2);var n=1e3;if(r<n)return r.toString();var e=Math.floor(Math.log(r)/Math.log(n));return(r/Math.pow(n,e)).toFixed(t)+["","K","M","G"][e]},r.numberToTenThousand=function(r,t){void 0===t&&(t=2);var n=1e4;if(r<n)return r.toString();var e=Math.floor(Math.log(r)/Math.log(n));return(r/Math.pow(n,e)).toFixed(t)+["","万","亿","万亿"][e]},r.stringToArray1=function(r){return""==r?[]:r.split(",")},r.stringToArray2=function(r){return""==r?[]:r.split("|")},r.stringToArray3=function(r){return""==r?[]:r.split(":")},r.stringToArray4=function(r){return""==r?[]:r.split(";")},r.sub=function(r,t,n){void 0===n&&(n=!1);var e=/[^\x00-\xff]/g;if(r.replace(e,"mm").length<=t)return r;for(var o=Math.floor(t/2);o<r.length;o++)if(r.substr(0,o).replace(e,"mm").length>=t)return n?r.substr(0,o)+"...":r.substr(0,o);return r},r.stringLen=function(r){for(var t=0,n=r.length,e=-1,o=0;o<n;o++)t+=(e=r.charCodeAt(o))>=0&&e<=128?1:2;return t},r.IsEmpty=function(r){return null==r||null==r||0==r.length},r.substitute=function(r){if(null==r)return"";for(var t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];var o,u=n.length;1==u&&n[0]instanceof Array?u=(o=n[0]).length:o=n;for(var i=0;i<u;i++)r=r.replace(new RegExp("\\{"+i+"\\}","g"),o[i]);return r},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TableConfirmViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./SingletonModuleComp.ts","./GameUIConfig.ts","./CCVMParentComp.ts"],(function(t){var e,n,r,o,i,a,s,c,u,p,l,f,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.EditBox},function(t){p=t.oops},function(t){l=t.ecs},function(t){f=t.smc},function(t){m=t.UIID},function(t){C=t.CCVMParentComp}],execute:function(){var b,d,y,h,v,g;s._RF.push({},"381d9Pp/6RFJLQbFnSQ0Vm2","TableConfirmViewComp",void 0);var w=c.ccclass,T=c.property;t("TableConfirmViewComp",(b=w("TableConfirmViewComp"),d=l.register("TableConfirmView",!1),y=T(u),b(h=d((g=e((v=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"buy",g,o(e)),e.data=void 0,e}n(e,t);var s=e.prototype;return s.onAdded=function(t){this.data=t},s.start=function(){},s.btn_start=function(){var t=i(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.buy.string,t.next=4,f.player.joinTable(this.data,n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),p.gui.toast(""+t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),s.btn_close=function(t){p.gui.remove(m.Table_Confirm,!0)},s.reset=function(){this.node.destroy()},e}(C)).prototype,"buy",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h)||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/TableEvent.ts",["cc"],(function(T){var E;return{setters:[function(T){E=T.cclegacy}],execute:function(){E._RF.push({},"b9f37Q8i2hGLq8wZgX8TX1S","TableEvent",void 0);T("TableEvent",function(T){return T.JOIN_TABLE="JOIN_TABLE",T.LEAVE_TABLE="LEAVE_TABLE",T.CHANGE_TABLE="CHANGE_TABLE",T.TABLE_LEFT="TABLE_LEFT",T.TABLE_JOINED="TABLE_JOINED",T.TABLE_MESSAGE="TABLE_MESSAGE",T.NEXT_MATCH_IS_COMING="NEXT_MATCH_IS_COMING",T.PLAYERS_UPDATED="PLAYERS_UPDATED",T.MATCH_STARTED="MATCH_STARTED",T.START_INIT_MATCH="START_INIT_MATCH",T.UPDATE_TURN="UPDATE_TURN",T.UPDATE_FOLD="UPDATE_FOLD",T}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/TableItemViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./GameUIConfig.ts","./CCVMParentComp.ts"],(function(t){var e,n,o,i,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.oops},function(t){r=t.ecs},function(t){a=t.UIID},function(t){c=t.CCVMParentComp}],execute:function(){var s;n._RF.push({},"fc633xcE3ZM6pNOvTAYP5bO","TableItemViewComp",void 0);var u=o.ccclass;o.property,t("TableItemViewComp",u("TableItemViewComp")(s=r.register("TableItemView",!1)(s=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).data=void 0,e}e(n,t);var o=n.prototype;return o.onAdded=function(t){this.data=t},o.start=function(){},o.btn_join=function(t){i.gui.has(a.Table_Confirm)&&i.gui.remove(a.Table_Confirm,!0),i.gui.open(a.Table_Confirm,this.data)},o.reset=function(){this.node.destroy()},n}(c))||s)||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/TableModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(t){var e,n,o,i,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy},function(t){i=t.ecs},function(t){u=t.VM}],execute:function(){var a;o._RF.push({},"682dfonUW9JAJwDwHO4bZVW","TableModelComp",void 0);t("TableModelComp",i.register("TableModel")(a=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).vm=new r,e}e(o,t);var i=o.prototype;return i.vmAdd=function(){u.add(this.vm,"Table")},i.vmRemove=function(){this.vm.reset(),u.remove("Table")},i.reset=function(){this.vmRemove()},n(o,[{key:"data",get:function(){return this.vm.data},set:function(t){this.vm.data=t}},{key:"pageCount",get:function(){return this.vm.pageCount},set:function(t){this.vm.pageCount=t}}]),o}(i.Comp))||a);var r=function(){function t(){this.data=null,this.pageCount=0}return t.prototype.reset=function(){this.data=null,this.pageCount=0},t}();o._RF.pop()}}}));

System.register("chunks:///_virtual/TableViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCComp.ts","./TableItemViewComp.ts","./SingletonModuleComp.ts","./ViewModel.ts"],(function(e){var t,o,n,r,a,i,l,s,u,c,p,b,d,f,m,h,w,C,V,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,i=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.ScrollView,p=e.Prefab,b=e.Node,d=e.instantiate,f=e.UITransform},function(e){m=e.oops},function(e){h=e.ecs},function(e){w=e.CCComp},function(e){C=e.TableItemViewComp},function(e){V=e.smc},function(e){g=e.VM}],execute:function(){var v,T,I,y,S,k,x,z,M,_;s._RF.push({},"7ad01kf3dBHCJ/S7uUselgo","TableViewComp",void 0);var A=u.ccclass,B=u.property;e("TableViewViewComp",(v=A("TableViewViewComp"),T=h.register("TableViewView",!1),I=B(c),y=B(p),S=B(b),v(k=T((z=t((x=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"tableView",z,r(t)),n(t,"tableItem",M,r(t)),n(t,"tableContent",_,r(t)),t.roomId=void 0,t}o(t,e);var s=t.prototype;return s.onAdded=function(e){this.roomId=e,g.setValue("Match.roomId",e)},s.start=function(){this.loadTableItems()},s.loadTableItems=function(){var e=i(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.roomId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,V.player.loadTables(this.roomId);case 5:t=g.getValue("Table.data"),this.generateTableItem(t),this.updateScrollView(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),m.gui.toast(""+e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),s.generateTableItem=function(e){for(var t,o=a(e);!(t=o()).done;){var n=t.value,r=d(this.tableItem);r.getComponent(C).onAdded(n),this.tableContent.addChild(r)}},s.updateScrollView=function(){var e;if(null!=(e=this.tableView)&&e.view){var t,o=g.getValue("Table.pageCount");this.tableView.view.node.getChildByName("content").getComponent(f).height=o/2*200+100,null==(t=this.tableView)||t.scrollToTop()}},s.reset=function(){this.node.destroy()},t}(w)).prototype,"tableView",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(x.prototype,"tableItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(x.prototype,"tableContent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=x))||k)||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/Task.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BTreeNode.ts"],(function(e){var n,t,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.BTreeNode}],execute:function(){t._RF.push({},"95087QhEU1G1LWnM2D7haTQ","Task",void 0);e("Task",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.run=function(e){},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6021fct1uhJsImEuhdFWC0f","Timer",void 0);e("Timer",function(){function e(e){void 0===e&&(e=0),this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}var s=e.prototype;return s.update=function(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null==(t=this.callback)||t.call(this),!0));var t},s.reset=function(){this._elapsedTime=0},s.stop=function(){this._elapsedTime=0,this.step=-1},t(e,[{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"step",get:function(){return this._step},set:function(e){this._step=e,this._elapsedTime=0}},{key:"progress",get:function(){return this._elapsedTime/this._step}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,n,s,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.game,s=e.Component},function(e){r=e.StringUtil},function(e){o=e.Timer}],execute:function(){i._RF.push({},"73600VLsIBLOKhOhd7td4P8","TimerManager",void 0);e("TimerManager",function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).times={},t.date_s=new Date,t.date_s_start=new Date,t.polymeric_s=0,t.date_c=new Date,t}t(i,e);var s=i.prototype;return s.update=function(e){for(var t in this.times){var i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}},s.onTimerComplete=function(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]},s.register=function(e,t,i,n){var s=new o;s.step=1;var a={};return a.id=r.guid(),a.timer=s,a.object=e,a.field=t,a.onSecond=i,a.onComplete=n,this.times[a.id]=a,a.id},s.unRegister=function(e){this.times[e]&&delete this.times[e]},s.setServerTime=function(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)},s.getServerTime=function(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s},s.getServerDate=function(){return this.date_s.setTime(this.getServerTime()),this.date_s},s.getClientTime=function(){return Date.now()},s.getClientDate=function(){return this.date_c.setTime(this.getClientTime()),this.date_c},s.getTime=function(){return n.totalTime},s.save=function(){for(var e in this.times)this.times[e].startTime=this.getTime()},s.load=function(){for(var e in this.times){var t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"c2070jsq0FDcaTrFhyA8yzm","TimeUtils",void 0);e("TimeUtil",function(){function e(){}return e.daysBetween=function(e,t){null==t&&(t=+new Date);var n=new Date(e).toLocaleDateString(),r=new Date(t).toLocaleDateString(),u=new Date(n).getTime(),a=new Date(r).getTime();return Math.abs(u-a)/864e5},e.secsBetween=function(e,t){var n=Math.abs(t-e)/1e3;return n=Math.floor(n)+1},e.sleep=function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Notify.ts","./LanguageLabel.ts"],(function(t){var e,n,r,i,a,o,s,l,c,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.Node,l=t.Label,c=t.Sprite},function(t){u=t.Notify},function(t){p=t.LanguageLabel}],execute:function(){var b,g,d,f,h,v,y;a._RF.push({},"f1572QdEjtLuYHTNQ/NCrVP","Toast",void 0);var C=o.ccclass,m=o.property;t("Toast",(b=C("Toast"),g=m(s),d=m(l),b((v=e((h=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"close",v,i(e)),r(e,"labContent",y,i(e)),e}n(e,t);var a=e.prototype;return a.start=function(){var t=this;this.close.on(s.EventType.TOUCH_END,(function(){t.node.destroy()}),this)},a.error=function(t,e){var n,r=this.node.getComponent(c);r&&(r.spriteFrame=null==(n=r.spriteAtlas)?void 0:n.getSpriteFrame("notify_error"));var i=this.labContent.getComponent(p);i&&(e?(i.enabled=!0,i.dataID=t):(i.enabled=!1,this.labContent.string=t))},a.success=function(t,e){var n,r=this.node.getComponent(c);r&&(r.spriteFrame=null==(n=r.spriteAtlas)?void 0:n.getSpriteFrame("notify_success"));var i=this.labContent.getComponent(p);i&&(e?(i.enabled=!0,i.dataID=t):(i.enabled=!1,this.labContent.string=t))},a.warning=function(t,e){var n,r=this.node.getComponent(c);r&&(r.spriteFrame=null==(n=r.spriteAtlas)?void 0:n.getSpriteFrame("notify_warning"));var i=this.labContent.getComponent(p);i&&(e?(i.enabled=!0,i.dataID=t):(i.enabled=!1,this.labContent.string=t))},a.toast=function(t,e){var n=t.split(":")[0],r=t.split(":")[1].trim();switch(n){case"Error":this.error(r,e);break;case"Success":this.success(r,e);break;case"Warning":this.warning(r,e);break;default:this.labContent.string=t}},e}(u)).prototype,"close",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(h.prototype,"labContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/ToolsViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./ViewModel.ts","./PlayerEvent.ts","./PositionUtils.ts","./SingletonModuleComp.ts","./CardUtils.ts","./CardViewComp.ts","./SpriteHelper.ts","./CCVMParentComp.ts","./TableEvent.ts","./SpinViewComp.ts","./WebWorker.ts"],(function(t){var a,i,e,n,l,r,s,o,u,d,c,h,p,f,m,C,v,y,b,g,T,k,w,M,A,S,V,I,E,F;return{setters:[function(t){a=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized,l=t.createForOfIteratorHelperLoose,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,u=t._decorator,d=t.Node,c=t.v3,h=t.UITransform,p=t.Size,f=t.Sprite},function(t){m=t.oops},function(t){C=t.ecs},function(t){v=t.VM},function(t){y=t.PlayerEvent,b=t.RaiseType},function(t){g=t.getNodePosition},function(t){T=t.smc},function(t){k=t.tweenCardToNode,w=t.getCardResPath,M=t.flipCardToNode},function(t){A=t.CardViewComp},function(t){S=t.loadResSpriteAtlasToNode},function(t){V=t.CCVMParentComp},function(t){I=t.TableEvent},function(t){E=t.SpinViewComp},function(t){F=t.WorkerEvent}],execute:function(){var L,_,B,P,R,U,D,N,x,H,z,O,q,K,Q,W,G,j;o._RF.push({},"33a53/BSQ5D2KbFSs51jOT3","ToolsViewComp",void 0);var Y=u.ccclass,J=u.property;t("ToolsViewComp",(L=Y("ToolsViewComp"),_=C.register("ToolsView",!1),B=J(d),P=J(d),R=J(d),U=J(d),D=J(d),N=J(d),x=J(d),L(H=_((O=a((z=function(t){function a(){for(var a,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return a=t.call.apply(t,[this].concat(l))||this,e(a,"cards",O,n(a)),e(a,"turn",q,n(a)),e(a,"slind",K,n(a)),e(a,"fold",Q,n(a)),e(a,"wait",W,n(a)),e(a,"btnCall",G,n(a)),e(a,"btnCheck",j,n(a)),a.socket=void 0,a.data={callSize:0,currentBet:0,currentCallAmount:0,currentPot:0,currentStack:0,half:0,isLastFullType:!1,isLastHalfType:!1,lastBet:0,lastBetParticipant:null,participant:null,max:0,min:0,quarter:0,canNotCall:!1,canNotCheck:!1,canFull:!1,canHalf:!1,canQuarter:!1,canRaise:!1,isShowdown:!1},a.foldCount=0,a.isClicked=!1,a.bet=0,a.isTurn=!1,a.turnTimeout=null,a.turnEndTime=0,a._boundBeforeUnload=null,a}i(a,t);var o=a.prototype;return o.start=function(){m.message.on(y.LEAVE_TABLE,this.handleLeaveTable,this),m.message.on(y.MATCH_STARTED,this.handleMatchStarted,this),m.message.on(I.UPDATE_FOLD,this.onUpdateFold,this),m.message.on(I.PLAYERS_UPDATED,this.handlePlayersUpdated,this),m.message.on(y.CHANGE_TURN,this.handleChangeTurn,this),m.message.on(F.UPDATE,this.workerUpdate,this);var t=this.onBeforeUnload.bind(this);window.addEventListener("beforeunload",t),this._boundBeforeUnload=t,this.socket=T.network.io,this.isClicked=!1,this.turn.getComponent(E).onAdded(v.getValue("Match.player").id)},o.handleLeaveTable=function(t,a){v.getValue("Match.players").length<=1&&this.clearCards(),this.turn&&(this.turn.active=!1)},o.handleMatchStarted=function(t,a){var i;this.clearCards(),this.dealCard(),this.isTurn=(null==(i=v.getValue("Match.player"))?void 0:i.id)===a.playerId,this.turn.active=this.isTurn,this.isClicked=!1,this.slind.active=!1,this.checkTurn(),this.updateSlind(a)},o.handlePlayersUpdated=function(t,a){this.updatePlayerData(a),this.updateView(a),this.checkKick(a),this.checkFold(a),this.checkWait(a)},o.clearCards=function(){var t;if(null!=(t=this.cards)&&t.length){for(var a,i=l(this.cards);!(a=i()).done;){var e,n=a.value;if(null!=n&&null!=(e=n.children)&&e.length)for(var r,s=l(n.children);!(r=s()).done;){r.value.destroy()}}console.log("clearCards",this.cards)}},o.dealCard=function(){var t,a=this;this.clearCards(),null==(t=this.cards)||t.map(r(s().mark((function t(i,e){var n,l,r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(n=i.getChildByName("card"))||!n.active){t.next=2;break}return t.abrupt("return");case 2:return r=g(a.node,i),t.next=5,T.match.createEmptyCard();case 5:(o=t.sent).setPosition(c(500,300,0)),null==(l=a.node)||l.addChild(o),k(o,r,.5+e/2,(function(){o.removeFromParent(),o.getComponent(h).setContentSize(new p(i.w,i.h)),o.position=c(0,0,0),i.addChild(o)})),setTimeout((function(){a.openCard()}),1e3);case 10:case"end":return t.stop()}}),t)}))))},o.openCard=function(){var t;m.audio.playMusic("audios/sound_open");var a=v.getValue("Match.participants"),i=v.getValue("Match.player"),e=a.find((function(t){return t.playerId===i.id}));e&&(null==(t=this.cards)||t.map((function(t,a){var i,n,l,o;if(t.getChildByName("card")){var u=t.getChildByName("card"),d=0===a?null==e||null==(i=e.cardOne)?void 0:i.rank:null==e||null==(n=e.cardTwo)?void 0:n.rank,c=0===a?null==e||null==(l=e.cardOne)?void 0:l.suit:null==e||null==(o=e.cardTwo)?void 0:o.suit,h=0===a?null==e?void 0:e.cardOneId:null==e?void 0:e.cardTwoId;if(d&&c&&h){var p=w(d,c),f=p.path,m=p.sprite;u.getComponent(A).onAdded(h),M(u,.5+a/2,r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(u,f,m);case 2:case"end":return t.stop()}}),t)}))))}}})))},o.onUpdateFold=function(t,a){var i,e=v.getValue("Match.player");if(e.id===a){this.foldCount++;var n=v.getValue("Match.participants").find((function(t){return t.playerId===e.id}));null==(i=this.socket)||i.emit(y.FOLD,{tableId:v.getValue("Match.table").id,participantId:null==n?void 0:n.id}),this.foldCount>=2&&!this.isTurn&&(console.log("Kick player"),T.match.exitMatch())}},o.handleChangeTurn=function(t,a){var i;this.isTurn=(null==(i=v.getValue("Match.player"))?void 0:i.id)===a.playerId,this.isClicked=!1,this.turn&&(this.turn.active=!1,this.turn.active=this.isTurn),this.checkTurn()},o.btn_call=function(t){var a,i,e;null!=(a=this.data)&&a.canNotCall||null!=(i=this.data)&&i.isShowdown||this.canClick(t)&&(null==(e=this.socket)||e.emit(y.CALL,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id}),m.audio.playMusic("audios/call_boy"))},o.btn_quarter=function(t){var a,i,e;null==(a=this.data)||!a.canQuarter||null!=(i=this.data)&&i.isShowdown||this.canClick(t)&&(null==(e=this.socket)||e.emit(y.RAISE,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id,amount:this.data.quarter+this.data.currentBet,type:b.QUARTER}),m.audio.playMusic("audios/quarter_boy"))},o.btn_half=function(t){var a,i,e;null==(a=this.data)||!a.canHalf||null!=(i=this.data)&&i.isShowdown||this.canClick(t)&&(null==(e=this.socket)||e.emit(y.RAISE,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id,amount:this.data.half+this.data.currentBet,type:b.HALF}),m.audio.playMusic("audios/half_boy"))},o.btn_full=function(t){var a,i,e;null==(a=this.data)||!a.canFull||null!=(i=this.data)&&i.isShowdown||this.canClick(t)&&(null==(e=this.socket)||e.emit(y.RAISE,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id,amount:this.data.currentPot+this.data.currentBet,type:b.FULL}),m.audio.playMusic("audios/full_boy"))},o.btn_check=function(t){var a,i,e;null!=(a=this.data)&&a.canNotCheck||null!=(i=this.data)&&i.isShowdown||this.canClick(t)&&(null==(e=this.socket)||e.emit(y.CHECK,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id}),m.audio.playMusic("audios/check_boy"))},o.btn_raise=function(t){var a,i;if(null!=(a=this.data)&&a.canRaise&&this.canClick(t)){0===this.bet&&(this.bet=this.data.min);var e=this.bet>this.data.max?this.data.max:this.bet<this.data.min?this.data.min:this.bet;null==(i=this.socket)||i.emit(y.RAISE,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id,amount:e+this.data.currentBet,type:b.RAISE}),m.audio.playMusic("audios/raise_boy")}},o.btn_fold=function(t){var a,i;null!=(a=this.data)&&a.isShowdown||this.canClick(t)&&(null==(i=this.socket)||i.emit(y.FOLD,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id}),m.audio.playMusic("audios/fold_boy"))},o.btn_allin=function(t){var a,i;null!=(a=this.data)&&a.isShowdown||this.canClick(t)&&(null==(i=this.socket)||i.emit(y.RAISE,{tableId:v.getValue("Match.table").id,participantId:this.data.participant.id,amount:this.data.currentStack+this.data.currentBet,type:y.ALLIN}),m.audio.playMusic("audios/all_boy"))},o.updateView=function(t){if(this.data&&this.btnCall&&this.btnCheck){this.btnCall.active=this.data.canNotCheck,this.btnCheck.active=!this.data.canNotCheck;var a=t.players.find((function(t){return t.id===v.getValue("Match.player").id}));a&&this.data&&v.setValue("Match.player.stack",a.stack)}},o.canClick=function(t){t.propagationStopped=!0;var a=null!==this.data.participant&&this.isTurn&&!this.isClicked;return this.isClicked=!0,this.foldCount>0&&(this.foldCount=0),a},o.updatePlayerData=function(t){var a;if(t&&this.data){var i=t.match,e=t.players.find((function(t){return t.id===v.getValue("Match.player").id}));if(e){var n=i.participants.find((function(t){return t.playerId===e.id})),l=T.match.getLastBetParticipant();this.data.participant=n,this.data.currentPot=(null==i?void 0:i.pot)||0,this.data.currentStack=(null==e?void 0:e.stack)||0,this.data.currentBet=(null==n?void 0:n.bet)||0,this.data.currentCallAmount=(null==i?void 0:i.callAmount)||0,this.data.canNotCall=0===this.data.currentCallAmount||this.data.currentBet>=this.data.currentCallAmount,this.data.canNotCheck=this.data.currentCallAmount!==this.data.currentBet&&this.data.currentCallAmount>0,this.data.quarter=Math.floor(this.data.currentPot/4),this.data.half=Math.floor(this.data.currentPot/2),this.data.callSize=this.data.currentBet<this.data.currentCallAmount&&this.data.currentCallAmount<=this.data.currentStack?this.data.currentCallAmount-this.data.currentBet:this.data.currentStack,this.data.lastBet=(null==l?void 0:l.bet)||0,this.data.isLastHalfType=(null==l?void 0:l.lastAction)===y.HALF,this.data.isLastFullType=(null==l?void 0:l.lastAction)===y.FULL,this.data.max=Math.min((null==i||null==(a=i.table)?void 0:a.maxBuyIn)||0,this.data.currentStack),this.data.min=Math.min(Math.max(this.data.currentCallAmount||0,this.data.lastBet)+this.data.lastBet,this.data.max),this.data.canQuarter=!this.data.isLastFullType&&!this.data.isLastHalfType&&this.data.quarter>=this.data.currentCallAmount&&this.data.currentStack>=this.data.quarter,this.data.canHalf=!this.data.isLastFullType&&!this.data.isLastHalfType&&this.data.half>=this.data.currentCallAmount&&this.data.currentStack>=this.data.half,this.data.canFull=this.data.currentPot>=this.data.currentCallAmount&&this.data.currentStack>=this.data.currentPot,this.data.canRaise=this.data.currentStack>=this.data.currentCallAmount,this.data.isShowdown=i.isShowdown||!1}}},o.checkKick=function(t){var a=t.players.find((function(t){return t.id===v.getValue("Match.player").id}));if(a&&this.data){var i,e,n,l,r=a&&(null==(i=t.match)?void 0:i.minBet)&&(null==a?void 0:a.stack)-2*(null==(e=t.match)?void 0:e.minBet)-t.match.table.ante<0,s=a&&(null==a?void 0:a.stack)<=0,o=(null!=(n=null==(l=t.match)||null==(l=l.winners)?void 0:l.length)?n:0)>0,u=v.getValue("Rebuy.canAutoRebuy");(v.getValue("Rebuy.isLeaveNext")&&o||o&&u&&(s||r||this.foldCount>=2))&&setTimeout((function(){T.match.exitMatch()}),4e3)}},o.checkFold=function(t){var a,i=null==(a=t.match)?void 0:a.participants.find((function(t){return t.playerId===v.getValue("Match.player").id}));i&&this.fold&&(this.fold.active=i.isFolded)},o.checkWait=function(t){var a,i;(null==(a=t.match)?void 0:a.participants.find((function(t){var a;return t.playerId===(null==(a=v.getValue("Match.player"))?void 0:a.id)})))||null!=(i=t.match)&&null!=(i=i.table)&&i.handOver?this.wait.active=!1:this.wait.active=!0},o.checkTurn=function(){if(this.isTurn){setTimeout((function(){m.audio.playMusic("audios/my_turn")}),800);var t,a=this.node.getChildByName("Layout");if(a)a.getComponent(f).spriteFrame=null==(t=a.getComponent(f).spriteAtlas)?void 0:t.getSpriteFrame("bg_tool_turn")}else{var i,e=this.node.getChildByName("Layout");if(e)e.getComponent(f).spriteFrame=null==(i=e.getComponent(f).spriteAtlas)?void 0:i.getSpriteFrame("bg_tool")}},o.updateSlind=function(t){var a;this.slind.active=!1;var i=v.getValue("Match.player"),e=t.match,n=null==(a=t.match)?void 0:a.participants;if(e&&n.length&&i){var l,r,s;if(n.length>2&&e.buttonId===i.id)this.slind.getComponent(f).spriteFrame=null==(l=this.slind.getComponent(f).spriteAtlas)?void 0:l.getSpriteFrame("sl"),this.slind.active=!0;if(e.smallBlindId===i.id)this.slind.getComponent(f).spriteFrame=null==(r=this.slind.getComponent(f).spriteAtlas)?void 0:r.getSpriteFrame("sb"),this.slind.active=!0;if(e.bigBlindId===i.id)this.slind.getComponent(f).spriteFrame=null==(s=this.slind.getComponent(f).spriteAtlas)?void 0:s.getSpriteFrame("bb"),this.slind.active=!0}},o.workerUpdate=function(t,a){var i=this;if(this.turn)if(this.isTurn&&!this.turnTimeout){this.turnEndTime=Date.now()+9e3,this.turnTimeout=setTimeout((function(){i.onUpdateFold("fold",v.getValue("Match.player").id),i.turnTimeout=null,i.turnEndTime=0}),9e3);var e=Math.max(0,Math.ceil((this.turnEndTime-Date.now())/1e3));this.turn.getComponent(E).setCountdownTime(e)}else if(!this.isTurn&&this.turnTimeout)clearTimeout(this.turnTimeout),this.turnTimeout=null,this.turnEndTime=0;else if(this.isTurn&&this.turnTimeout){var n=Math.max(0,Math.ceil((this.turnEndTime-Date.now())/1e3));this.turn.getComponent(E).setCountdownTime(n)}},o.onBeforeUnload=function(t){var a,i="Are you sure you want to leave?";(t&&t.preventDefault(),confirm(i))&&(null==(a=this.socket)||a.emit(I.TABLE_LEFT,{tableId:v.getValue("Match.table").id,playerId:v.getValue("Match.player").id}),T.match.exitMatch());if(t)return i},o.onDestroy=function(){m.message.off(y.MATCH_STARTED,this.handleMatchStarted,this),m.message.off(I.UPDATE_FOLD,this.onUpdateFold,this),m.message.off(I.PLAYERS_UPDATED,this.handlePlayersUpdated,this),m.message.off(y.CHANGE_TURN,this.handleChangeTurn,this)},o.reset=function(){this.node.destroy()},a}(V)).prototype,"cards",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=a(z.prototype,"turn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=a(z.prototype,"slind",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=a(z.prototype,"fold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=a(z.prototype,"wait",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=a(z.prototype,"btnCall",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=a(z.prototype,"btnCheck",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=z))||H)||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,o,n,i,r,u,c,a,p,l,s,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){c=t.cclegacy,a=t._decorator,p=t.AudioClip,l=t.game,s=t.Button},function(t){f=t.oops}],execute:function(){var h,d,y,m,v,_,g,E,b,T;c._RF.push({},"86cefAWukVE77lEwgfFdYeD","UIButton",void 0);var w=a.ccclass,B=a.property,z=a.menu;t("default",(h=w("UIButton"),d=z("OopsFramework/Button/UIButton （通用按钮）"),y=B({tooltip:"每次触发间隔"}),m=B({tooltip:"是否只触发一次"}),v=B({tooltip:"触摸音效",type:p}),h(_=d((E=e((g=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,n(e,"interval",E,i(e)),n(e,"once",b,i(e)),n(e,"effect",T,i(e)),e._touchCount=0,e._touchEndTime=0,e}o(e,t);var c=e.prototype;return c._onTouchEnded=function(e){if(this.once){if(this._touchCount>0)return void(e.propagationStopped=!0);this._touchCount++}this._touchEndTime&&l.totalTime-this._touchEndTime<this.interval?e.propagationStopped=!0:(this._touchEndTime=l.totalTime,t.prototype._onTouchEnded.call(this,e),this.playEffect())},c.playEffect=function(){var t=r(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.effect&&f.audio.playEffect(this.effect);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(s)).prototype,"interval",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),b=e(g.prototype,"once",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=e(g.prototype,"effect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_)||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtil.ts"],(function(n){var e,r,t,u,a;return{setters:[function(n){e=n.createClass},function(n){r=n.cclegacy,t=n.Vec3,u=n.Mat4},function(n){a=n.MathUtil}],execute:function(){r._RF.push({},"38947ih8d5EQ7HG4buug+SR","Vec3Util",void 0);n("Vec3Util",function(){function n(){}return n.progress=function(n,e,r){var u=new t;return u.x=a.progress(n.x,e.x,r),u.y=a.progress(n.y,e.y,r),u.z=a.progress(n.z,e.z,r),u},n.add=function(n,e){var r=new t;return t.add(r,n,e),r},n.sub=function(n,e){var r=new t;return t.subtract(r,n,e),r},n.mul=function(n,e){var r=new t;return t.multiplyScalar(r,n,e),r},n.div=function(n,e){var r=new t;return r.x=n.x/e,r.y=n.y/e,r.z=n.z/e,r},n.equals=function(n,e){return n.x==e.x&&n.y==e.y&&n.z==e.z},n.magnitude=function(n){return n.length()},n.normalize=function(n){return new t(n.x,n.y,n.z).normalize()},n.direction=function(n,e){var r=new t;return t.subtract(r,e,n),r.normalize()},n.distance=function(n,e){return t.distance(n,e)},n.lerp=function(n,e,r){return this.bezierOne(r,n,e)},n.slerp=function(n,e,r){if(r<=0)return n;if(r>=1)return e;var u=this.rotateTo(n,e,t.angle(n,e)/Math.PI*180*r),a=e.length()*r+n.length()*(1-r);return u.normalize().multiplyScalar(a)},n.rotateTo=function(n,e,r){if(0==t.angle(n,e))return e;var a=new t;t.cross(a,n,e),a.normalize();var i=r*Math.PI/180,l=new u;return l.rotate(i,a),new t(n.x*l.m00+n.y*l.m04+n.z*l.m08,n.x*l.m01+n.y*l.m05+n.z*l.m09,n.x*l.m02+n.y*l.m06+n.z*l.m10)},n.bezierOne=function(n,e,r){n>1?n=1:n<0&&(n=0);var t=e.clone(),u=r.clone();return t.multiplyScalar(1-n).add(u.multiplyScalar(n))},n.bezierTwo=function(n,e,r,u){n>1?n=1:n<0&&(n=0);var a=1-n,i=n*n,l=e.clone(),o=new t,c=r.clone(),y=u.clone();return o.add(l.multiplyScalar(a*a)),o.add(c.multiplyScalar(2*a*n)),o.add(y.multiplyScalar(i)),o},n.bezierThree=function(n,e,r,t,u){n>1?n=1:n<0&&(n=0);var a=1-n,i=a*a,l=i*a,o=n*n,c=o*n,y=e.clone(),f=e.clone(),s=r.clone(),d=t.clone(),m=u.clone();return f.add(y.multiplyScalar(l)),f.add(s.multiplyScalar(3*i*n)),f.add(d.multiplyScalar(3*a*o)),f.add(m.multiplyScalar(c)),f},n.dot=function(n,e){var r=n,t=e;return r.x*t.x+r.y*t.y+r.z*t.z},n.cross=function(n,e){var r=new t(1,0,0),u=new t(0,1,0),a=new t(0,0,1),i=new t(n.x,n.y,n.z),l=new t(e.x,e.y,e.z),o=r.multiplyScalar(i.y*l.z-l.y*i.z),c=u.multiplyScalar(l.x*i.z-i.x*l.z),y=a.multiplyScalar(i.x*l.y-l.x*i.y);return o.add(c).add(y)},n.angle=function(n,e){var r=this.dot(n.clone().normalize(),e.clone().normalize());return Math.acos(r)/Math.PI*180*Math.sign(r)},n.dirAngle=function(e,r){var t=n.cross(e,r);return n.angle(e,r)*Math.sign(n.dot(t.normalize(),n.cross(r.normalize(),e.normalize())))},e(n,null,[{key:"x",get:function(){return new t(1,0,0)}},{key:"y",get:function(){return new t(0,1,0)}},{key:"z",get:function(){return new t(0,0,1)}},{key:"left",get:function(){return new t(-1,0,0)}},{key:"right",get:function(){return new t(1,0,0)}},{key:"up",get:function(){return new t(0,1,0)}},{key:"down",get:function(){return new t(0,-1,0)}},{key:"forward",get:function(){return new t(0,0,1)}},{key:"back",get:function(){return new t(0,0,-1)}},{key:"one",get:function(){return new t(1,1,1)}},{key:"zero",get:function(){return new t(0,0,0)}}]),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewModel.ts",["cc","./JsonOb.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.cclegacy,n=t.director},function(t){i=t.JsonOb}],execute:function(){e._RF.push({},"54f75k4X+RP0qaXOzrfZysL","ViewModel",void 0);var o="VC:";function r(t,e,n,i){void 0===i&&(i="");for(var o=e.split("."),r=0;r<o.length;r++){var a=o[r];if(a in t==!1){console.error("["+a+"] not find in "+i+"."+e);break}r==o.length-1?t[a]=n:t=t[a]}}function a(t,e,n,i){void 0===i&&(i="");for(var o=e.split("."),r=0;r<o.length;r++){var a=o[r];if(a in t==!1)return console.error("["+a+"] not find in "+i+"."+e),n;t=t[a]}return null==t&&(t=n),t}var s=function(){function t(t,e){this.$data=void 0,this._tag=null,this.active=!0,this.emitToRootPath=!1,new i(t,this._callback.bind(this)),this.$data=t,this._tag=e}var e=t.prototype;return e._callback=function(t,e,i){if(1==this.active){var r=o+this._tag+"."+i.join(".");if(n.emit(r,t,e,[this._tag].concat(i)),this.emitToRootPath&&n.emit(o+this._tag,t,e,i),i.length>=2)for(var a=0;a<i.length-1;a++)i[a]}},e.setValue=function(t,e){r(this.$data,t,e,this._tag)},e.getValue=function(t,e){return a(this.$data,t,e,this._tag)},t}();t("VM",new(function(){function t(){this._mvs=new Map,this.setObjValue=r,this.getObjValue=a}var e=t.prototype;return e.add=function(t,e,n){void 0===e&&(e="global"),void 0===n&&(n=!1);var i=new s(t,e),o=this._mvs.get(e);e.includes(".")?console.error("cant write . in tag:",e):o?console.error("already set VM tag:"+e):(i.emitToRootPath=n,this._mvs.set(e,i))},e.remove=function(t){this._mvs.delete(t)},e.get=function(t){return this._mvs.get(t)},e.addValue=function(t,e){var n=(t=t.trim()).split(".");n.length<2&&console.error("Cant find path:"+t);var i=this.get(n[0]);if(i){var o=n.slice(1).join(".");i.setValue(o,i.getValue(o)+e)}else console.error("Cant Set VM:"+n[0])},e.getValue=function(t,e){var n=(t=t.trim()).split(".");if(n.length<2)console.error("Get Value Cant find path:"+t);else{var i=this.get(n[0]);if(i)return i.getValue(n.slice(1).join("."),e);console.error("Cant Get VM:"+n[0])}},e.setValue=function(t,e){var n=(t=t.trim()).split(".");if(n.length<2)console.error("Set Value Cant find path:"+t);else{var i=this.get(n[0]);i?i.setValue(n.slice(1).join("."),e):console.error("Cant Set VM:"+n[0])}},e.bindPath=function(t,e,i,r){""!=(t=t.trim())?"*"!==t.split(".")[0]?n.on(o+t,e,i,r):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本"):console.error(i.node.name,"节点绑定的路径为空")},e.unbindPath=function(t,e,i){"*"!==(t=t.trim()).split(".")[0]?n.off(o+t,e,i):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本")},e.inactive=function(){this._mvs.forEach((function(t){t.active=!1}))},e.active=function(){this._mvs.forEach((function(t){t.active=!1}))},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts"],(function(e){var n,t,o,r,a,i,c,u,l,f,s;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.UITransform,a=e.v3,i=e.Size,c=e.Prefab,u=e.instantiate,l=e.Animation,f=e.AnimationClip},function(e){s=e.resLoader}],execute:function(){o._RF.push({},"f607cCjAEZHVKVZ/FyRs5bA","ViewUtil",void 0);e("ViewUtil",function(){function e(){}return e.nodeTreeInfoLite=function(n,t){for(var o=t||new Map,r=n.children,a=0;a<r.length;a++){var i=r[a];i.name.indexOf(" ")<0&&o.set(i.name,i),e.nodeTreeInfoLite(i,o)}return o},e.findNodes=function(n,t,o){for(var r=o||[],a=t.children,i=0;i<a.length;i++){var c=a[i].name;n.test(c)&&r.push(a[i]),e.findNodes(n,a[i],r)}return r},e.calculateASpaceToBSpacePos=function(e,n,t){var o=e.getComponent(r).convertToWorldSpaceAR(t);return n.getComponent(r).convertToNodeSpaceAR(o)},e.calculateScreenPosToSpacePos=function(e,n){var t=e.getUILocation(),o=a(t.x,t.y);return n.getComponent(r).convertToNodeSpaceAR(o)},e.uniformScale=function(e,n,t,o){var r,a=t/e,c=o/n;return r=a<c?a:c,new i(Math.floor(e*r),Math.floor(n*r))},e.createPrefabNode=function(e,n){void 0===n&&(n=s.defaultBundleName);var t=s.get(e,c,n);return t?u(t):null},e.createPrefabNodeAsync=function(e,o){return void 0===o&&(o=s.defaultBundleName),new Promise(n(t().mark((function n(r,a){var i;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.loadAsync(o,e,c);case 2:(i=n.sent)?r(u(i)):(console.error("名为【"+e+"】的资源加载失败"),r(null));case 4:case"end":return n.stop()}}),n)}))))},e.addNodeAnimation=function(e,n,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!1),n&&n.isValid){var r=n.getComponent(l);null==r&&(r=n.addComponent(l));var a=s.get(e,f);if(a&&!(t&&r.getState(a.name)&&r.getState(a.name).isPlaying)){if(o)return r.defaultClip=a,void r.play();r.once(l.EventType.FINISHED,(function(){r.defaultClip&&r.play()}),this),r.getState(a.name)||r.createState(a,a.name),r.play(a.name)}}},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/VMBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewModel.ts","./VMEnv.ts"],(function(t){var n,e,i,a,h,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,a=t.log,h=t.Component},function(t){o=t.VM},function(t){r=t.VMEnv}],execute:function(){var s;e._RF.push({},"2f6f36IvUdPO7xynnVTPgzb","VMBase",void 0);var c=i.ccclass,l=i.help;t("VMBase",c(s=l("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037631&doc_id=2873565")(s=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).VM=o,n.watchPath="",n.templateMode=!1,n.watchPathArr=[],n.templateValueArr=[],n}n(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;if(!r.editor){for(var n=this.watchPath.split("."),e=1;e<n.length;e++){if("*"==n[e]){var i=this.node.parent.children.findIndex((function(n){return n===t.node}));i<=0&&(i=0),n[e]=i.toString();break}}this.watchPath=n.join(".");var h=this.watchPathArr;if(h.length>=1)for(var o=0;o<h.length;o++){for(var s=h[o].split("."),c=1;c<s.length;c++){if("*"==s[c]){var l=this.node.parent.children.findIndex((function(n){return n===t.node}));l<=0&&(l=0),s[c]=l.toString();break}}this.watchPathArr[o]=s.join(".")}""==this.watchPath&&""==this.watchPathArr.join("")&&a("可能未设置路径的节点:",this.node.parent.name+"."+this.node.name)}},i.onEnable=function(){r.editor||(this.templateMode?this.setMultPathEvent(!0):""!=this.watchPath&&this.VM.bindPath(this.watchPath,this.onValueChanged,this),this.onValueInit())},i.onDisable=function(){r.editor||(this.templateMode?this.setMultPathEvent(!1):""!=this.watchPath&&this.VM.unbindPath(this.watchPath,this.onValueChanged,this))},i.setMultPathEvent=function(t){if(void 0===t&&(t=!0),!r.editor)for(var n=this.watchPathArr,e=0;e<n.length;e++){var i=n[e];t?this.VM.bindPath(i,this.onValueChanged,this):this.VM.unbindPath(i,this.onValueChanged,this)}},i.onValueInit=function(){},i.onValueChanged=function(t,n,e){},e}(h))||s)||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMCompsEdit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var t,r,o,i,n,a,c,l,s,p,u,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,c=e._decorator,l=e.CCString,s=e.Enum,p=e.Node,u=e.log,h=e.Component},function(e){f=e.VMEnv}],execute:function(){var _,g,d,E,y,T,P,b,C,N,O,v,m,A,w,M,L,k,H,D,R,j,z;a._RF.push({},"2359eFXKF5HFYS74K7Y17/U","VMCompsEdit",void 0);var S=c.ccclass,V=c.property,F=c.executeInEditMode,B=c.menu,W=c.help,x=function(e){return e[e.SEARCH_COMPONENT=0]="SEARCH_COMPONENT",e[e.ENABLE_COMPONENT=1]="ENABLE_COMPONENT",e[e.REPLACE_WATCH_PATH=2]="REPLACE_WATCH_PATH",e[e.DELETE_COMPONENT=3]="DELETE_COMPONENT",e}(x||{});e("default",(_=B("OopsFramework/Mvvm/Edit-Comps （快速组件操作）"),g=W("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037632&doc_id=2873565"),d=V({type:[l]}),E=V({type:s(x)}),y=V({tooltip:"勾选后,会自动查找 find list 中填写的组件",visible:function(){return this.actionType===x.SEARCH_COMPONENT}}),T=V({tooltip:"勾选后,会批量激活 find list 中填写的组件",visible:function(){return this.actionType===x.ENABLE_COMPONENT}}),P=V({tooltip:"勾选后,会批量关闭 find list 中填写的组件",visible:function(){return this.actionType===x.ENABLE_COMPONENT}}),b=V({tooltip:"允许删除节点的组件,确定需要移除请勾选,防止误操作",visible:function(){return this.actionType===x.DELETE_COMPONENT}}),C=V({tooltip:"勾选后,会批量删除 find list 中填写的组件",displayName:"[ X DELETE X ]",visible:function(){return this.allowDelete&&this.actionType===x.DELETE_COMPONENT}}),N=V({tooltip:"勾选后,会批量替换掉指定的路径",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),O=V({tooltip:"匹配的路径,匹配规则: 搜索开头为 game的路径",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),v=V({tooltip:"替换的路径,将匹配到的路径替换",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),m=V({tooltip:"是否搜集绑定VM组件的节点?",visible:function(){return this.actionType===x.SEARCH_COMPONENT}}),A=V({type:[p],readonly:!0,tooltip:"收集到绑定了VM组件相关的节点，可以自己跳转过去",visible:function(){return this.canCollectNodes&&this.actionType===x.SEARCH_COMPONENT}}),S(w=F(w=_(w=g((L=t((M=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"findList",L,i(t)),o(t,"actionType",k,i(t)),o(t,"allowDelete",H,i(t)),o(t,"targetPath",D,i(t)),o(t,"replacePath",R,i(t)),o(t,"canCollectNodes",j,i(t)),o(t,"collectNodes",z,i(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){if(!f.editor){var e=this.getNodePath(this.node);console.error("you forget delete MVEditFinder,[path]",e)}},a.setComponents=function(e){var t=this,r=this.findList,o="搜索到当前节点下面的组件";switch(e){case 0:o="搜索到当前节点下面的组件";break;case 1:o="激活以下节点的组件";break;case 2:o="关闭以下节点的组件";break;case 3:o="删除以下节点的组件";break;case 4:o="替换以下节点的路径"}u(o),u("______________________"),r.forEach((function(r){t.searchComponent(r,e)})),u("______________________")},a.searchComponent=function(e,t){var r=this;void 0===t&&(t=0),this.collectNodes=[];var o=this.node.getComponentsInChildren(e);null==o||o.length<1||(u("["+e+"]:"),o.forEach((function(e){var o="";switch(t<=3&&(o=!0===e.templateMode?e.watchPathArr?":[Path:"+e.watchPathArr.join("|")+"]":"":e.watchPath?":[Path:"+e.watchPath+"]":""),u(r.getNodePath(e.node)+o),t){case 0:r.canCollectNodes&&-1===r.collectNodes.indexOf(e.node)&&r.collectNodes.push(e.node);break;case 1:e.enabled=!0;break;case 2:e.enabled=!1;break;case 3:e.node.removeComponent(e);break;case 4:var i=r.targetPath,n=r.replacePath;if(!0===e.templateMode)for(var a=0;a<e.watchPathArr.length;a++){var c=e.watchPathArr[a];e.watchPathArr[a]=r.replaceNodePath(c,i,n)}else e.watchPath=r.replaceNodePath(e.watchPath,i,n)}})))},a.replaceNodePath=function(e,t,r){for(var o=e.split("."),i=t.split("."),n=r.split("."),a=!0,c=0;c<i.length;c++)if(o[c]!==i[c]){a=!1;break}if(!0===a){for(var l=0;l<n.length;l++)o[l]=n[l];u(" 路径更新:",e,">>>",o.join("."))}return o.join(".")},a.getNodePath=function(e){for(var t=e,r=[];t;){var o=t.getParent();if(!o)break;r.push(t.name),t=o}return r.reverse().join("/")},n(t,[{key:"findTrigger",get:function(){return!1},set:function(e){this.setComponents(0)}},{key:"enableTrigger",get:function(){return!1},set:function(e){this.setComponents(1)}},{key:"disableTrigger",get:function(){return!1},set:function(e){this.setComponents(2)}},{key:"deleteTrigger",get:function(){return!1},set:function(e){this.setComponents(3)}},{key:"replaceTrigger",get:function(){return!1},set:function(e){this.setComponents(4)}}]),t}(h)).prototype,"findList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["VMBase","VMParent"]}}),k=t(M.prototype,"actionType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.SEARCH_COMPONENT}}),t(M.prototype,"findTrigger",[y],Object.getOwnPropertyDescriptor(M.prototype,"findTrigger"),M.prototype),t(M.prototype,"enableTrigger",[T],Object.getOwnPropertyDescriptor(M.prototype,"enableTrigger"),M.prototype),t(M.prototype,"disableTrigger",[P],Object.getOwnPropertyDescriptor(M.prototype,"disableTrigger"),M.prototype),H=t(M.prototype,"allowDelete",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(M.prototype,"deleteTrigger",[C],Object.getOwnPropertyDescriptor(M.prototype,"deleteTrigger"),M.prototype),t(M.prototype,"replaceTrigger",[N],Object.getOwnPropertyDescriptor(M.prototype,"replaceTrigger"),M.prototype),D=t(M.prototype,"targetPath",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"game"}}),R=t(M.prototype,"replacePath",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"*"}}),j=t(M.prototype,"canCollectNodes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(M.prototype,"collectNodes",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=M))||w)||w)||w)||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/VMCustom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./VMEnv.ts"],(function(t){var e,o,n,i,r,c,a,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,a=t.Toggle},function(t){s=t.VMBase},function(t){l=t.VMEnv}],execute:function(){var h,p,u,m,f,d,g,C,V,_,y,b,w,v;r._RF.push({},"ce662fwsSVPLKpmHx+KocFu","VMCustom",void 0);var P=c.ccclass,M=c.property,k=c.executeInEditMode,x=c.menu,B=c.help,R=[["BhvFrameIndex","index",!1],["BhvGroupToggle","index",!1],["BhvRollNumber","targetValue",!1],["cc.Label","string",!1],["cc.RichText","string",!1],["cc.EditBox","string",!0],["cc.Slider","progress",!0],["cc.ProgressBar","progress",!1],["cc.Toggle","isChecked",!0]];t("VMCustom",(h=x("OopsFramework/Mvvm/VM-Custom （自定义）"),p=B("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037634&doc_id=2873565"),u=M({tooltip:"激活controller,以开启双向绑定，否则只能接收消息"}),m=M({tooltip:"监视对象路径"}),f=M({tooltip:"绑定组件的名字"}),d=M({tooltip:"组件上需要监听的属性"}),g=M({tooltip:"刷新间隔频率(只影响脏检查的频率)",step:.01,range:[0,1],visible:function(){return!0===this.controller}}),P(C=k(C=h(C=p((_=e((V=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,n(e,"controller",_,i(e)),n(e,"watchPath",y,i(e)),n(e,"componentName",b,i(e)),n(e,"componentProperty",w,i(e)),n(e,"refreshRate",v,i(e)),e._timer=0,e._watchComponent=null,e._canWatchComponent=!1,e._oldValue=null,e}o(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this),this.checkEditorComponent(),l.editor||(this._watchComponent=this.node.getComponent(this.componentName),this.checkComponentState())},r.onRestore=function(){this.checkEditorComponent()},r.start=function(){this.onValueInit()},r.checkEditorComponent=function(){if(!l.editor)for(var t=R,e=0;e<t.length;e++){var o=t[e];if(this.node.getComponent(o[0])){""==this.componentName&&(this.componentName=o[0]),""==this.componentProperty&&(this.componentProperty=o[1]),null!==o[2]&&(this.controller=o[2]);break}}},r.checkComponentState=function(){this._canWatchComponent=!1,this._watchComponent?this.componentProperty?this.componentProperty in this._watchComponent!=!1?this._canWatchComponent=!0:console.error("需要监听的组件的属性不存在"):console.error("未设置需要监听的组件 的属性"):console.error("未设置需要监听的组件")},r.getComponentValue=function(){return this._watchComponent[this.componentProperty]},r.setComponentValue=function(t){"cc.Toggle"==this.componentName?this.node.getComponent(a).isChecked=t:this._watchComponent[this.componentProperty]=t},r.onValueInit=function(){l.editor||this.setComponentValue(this.VM.getValue(this.watchPath))},r.onValueController=function(t,e){this.VM.setValue(this.watchPath,t)},r.onValueChanged=function(t,e,o){this.setComponentValue(t)},r.update=function(t){if(!l.editor&&this.controller&&this._canWatchComponent&&!1!==this._watchComponent.enabled&&(this._timer+=t,!(this._timer<this.refreshRate))){this._timer=0;var e=this._oldValue,o=this.getComponentValue();this._oldValue!==o&&(this._oldValue=this.getComponentValue(),this.onValueController(o,e))}},e}(s)).prototype,"controller",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(V.prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=e(V.prototype,"componentName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(V.prototype,"componentProperty",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=e(V.prototype,"refreshRate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),C=V))||C)||C)||C)||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/VMEnv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(n){var e,t,u;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy},function(n){u=n.EDITOR}],execute:function(){t._RF.push({},"fdf72Q91PdCXpPQ+62s1ufi","VMEnv",void 0);n("VMEnv",function(){function n(){}return e(n,null,[{key:"editor",get:function(){return u}}]),n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/VMEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(e){var t,r,n,i,a,o,c,u,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.CCString,u=e.Enum,l=e.EventHandler},function(e){s=e.VMBase}],execute:function(){var p,f,h,b,g,d,m,v,y,w,M,k,E,z,V,P,A,C;a._RF.push({},"a9ce7kf8XZJeLPlT2iWn2zD","VMEvent",void 0);var _=o.ccclass,D=o.property,O=o.executeInEditMode,B=o.menu,F=o.help,I=function(e){return e[e.none=0]="none",e[e["=="]=1]="==",e[e["!="]=2]="!=",e[e[">"]=3]=">",e[e[">="]=4]=">=",e[e["<"]=5]="<",e[e["<="]=6]="<=",e}(I||{});e("default",(p=B("OopsFramework/Mvvm/VM-EventCall （调用函数）"),f=F("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037640&doc_id=2873565"),h=D({tooltip:"使用模板模式，可以使用多路径监听"}),b=D({tooltip:"监听获取值的路径",visible:function(){return!1===this.templateMode}}),g=D({tooltip:"触发一次后会自动关闭该事件"}),d=D({tooltip:"监听获取值的多条路径,这些值的改变都会通过这个函数回调,请使用 pathArr 区分获取的值 ",type:[c],visible:function(){return!0===this.templateMode}}),m=D({tooltip:"过滤模式，会根据条件过滤掉时间的触发",type:u(I)}),v=D({visible:function(){return this.filterMode!==I.none}}),y=D([l]),_(w=O(w=p(w=f((k=t((M=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"templateMode",k,i(t)),n(t,"watchPath",E,i(t)),n(t,"triggerOnce",z,i(t)),n(t,"watchPathArr",V,i(t)),n(t,"filterMode",P,i(t)),n(t,"compareValue",A,i(t)),n(t,"changeEvents",C,i(t)),t}r(t,e);var a=t.prototype;return a.onValueInit=function(){},a.onValueChanged=function(e,t,r){this.conditionCheck(e,this.compareValue)&&(Array.isArray(this.changeEvents)&&this.changeEvents.forEach((function(n){n.emit([e,t,r])})),!0===this.triggerOnce&&(this.enabled=!1))},a.conditionCheck=function(e,t){var r=I;switch(this.filterMode){case r.none:return!0;case r["=="]:if(e==t)return!0;break;case r["!="]:if(e!=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r[">"]:if(e>t)return!0;break;case r[">="]:if(e>=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r["<="]:if(e<=t)return!0}return!1},t}(s)).prototype,"templateMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(M.prototype,"watchPath",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=t(M.prototype,"triggerOnce",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=t(M.prototype,"watchPathArr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(M.prototype,"filterMode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.none}}),A=t(M.prototype,"compareValue",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=t(M.prototype,"changeEvents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=M))||w)||w)||w)||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/VMLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMBase.ts","./VMEnv.ts"],(function(t){var e,r,i,a,n,l,o,s,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,o=t.CCString,s=t.error},function(t){c=t.StringFormatFunction},function(t){u=t.VMBase},function(t){h=t.VMEnv}],execute:function(){var p,f,m,g,b,d,V,v,y,L,M,T;n._RF.push({},"545c05XsG9GDJispEGWKvYv","VMLabel",void 0);var w=l.ccclass,x=l.property,A=l.menu,F=l.executeInEditMode,P=l.help,k="cc.Label";t("default",(p=A("OopsFramework/Mvvm/VM-Label （标签）"),f=P("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037641&doc_id=2873565"),m=x({tooltip:"是否启用模板代码,只能在运行时之前设置,\n将会动态解析模板语法 {{0}},并且自动设置监听的路径"}),g=x({visible:function(){return!1===this.templateMode}}),b=x({readonly:!0}),d=x({type:[o],visible:function(){return!0===this.templateMode}}),w(V=F(V=p(V=f((y=e((v=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,i(e,"templateMode",y,a(e)),i(e,"watchPath",L,a(e)),i(e,"labelType",M,a(e)),i(e,"watchPathArr",T,a(e)),e.templateValueArr=[],e.templateFormatArr=[],e.originText=null,e}r(e,t);var n=e.prototype;return n.onRestore=function(){this.checkLabel()},n.onLoad=function(){t.prototype.onLoad.call(this),this.checkLabel(),h.editor||this.templateMode&&(this.originText=this.getLabelValue(),this.parseTemplate())},n.start=function(){h.editor||this.onValueInit()},n.parseTemplate=function(){var t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null!=e)for(var r=0;r<e.length;r++){var i=e[r].match(t)[1].split(":")[1]||"";this.templateFormatArr[r]=i}},n.getReplaceText=function(){if(!this.originText)return"";var t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null==e)return"";for(var r=this.originText,i=0;i<e.length;i++){var a,n=e[i],l=n.match(t),o=parseInt(l[1]||"0")||0,s=this.templateFormatArr[i];a=this.templateValueArr[o],r=r.replace(n,this.getValueFromFormat(a,s))}return r},n.getValueFromFormat=function(t,e){return c.deal(t,e)},n.onValueInit=function(){if(!1===this.templateMode)this.setLabelValue(this.VM.getValue(this.watchPath));else{for(var t=this.watchPathArr.length,e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e],"?");this.setLabelValue(this.getReplaceText())}},n.onValueChanged=function(t,e,r){if(!1===this.templateMode)this.setLabelValue(t);else{var i=r.join("."),a=this.watchPathArr.findIndex((function(t){return t===i}));a>=0&&(this.templateValueArr[a]=t,this.setLabelValue(this.getReplaceText()))}},n.setLabelValue=function(t){this.getComponent(this.labelType).string=t+""},n.getLabelValue=function(){return this.getComponent(this.labelType).string},n.checkLabel=function(){for(var t=["cc.Label","cc.RichText","cc.EditBox"],e=0;e<t.length;e++){var r=t[e];if(this.node.getComponent(r))return this.labelType=r,!0}return s("没有挂载任何label组件"),!1},e}(u)).prototype,"templateMode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=e(v.prototype,"watchPath",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=e(v.prototype,"labelType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k}}),T=e(v.prototype,"watchPathArr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=v))||V)||V)||V)||V));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMModify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(t){var a,e,i,n,r,u,l,o;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,l=t.Enum},function(t){o=t.VMBase}],execute:function(){var s,h,c,v,p,M,f,d,m,V,b,w,g,y;r._RF.push({},"7d2a4voaOJJGJZRWFPG6Bk7","VMModify",void 0);var P=u.ccclass,I=u.property,A=u.menu,C=u.help,N=function(t){return t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t[t.MIN_MAX=2]="MIN_MAX",t}(N||{});t("default",(s=A("OopsFramework/Mvvm/VM-Modify （修改数据）"),h=C("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037642&doc_id=2873565"),c=I({tooltip:"监视对象路径"}),v=I({tooltip:"是不启用取值范围限制"}),p=I({type:l(N),visible:function(){return!0===this.valueClamp}}),M=I({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==N.MAX}}),f=I({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==N.MIN}}),P(d=s(d=h((V=a((m=function(t){function a(){for(var a,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return a=t.call.apply(t,[this].concat(r))||this,i(a,"watchPath",V,n(a)),i(a,"valueClamp",b,n(a)),i(a,"valueClampMode",w,n(a)),i(a,"valueMin",g,n(a)),i(a,"valueMax",y,n(a)),a}e(a,t);var r=a.prototype;return r.clampValue=function(t){var a=this.valueMin,e=this.valueMax;if(0==this.valueClamp)return t;switch(this.valueClampMode){case N.MIN_MAX:t>e&&(t=e),t<a&&(t=a);break;case N.MIN:t<a&&(t=a);break;case N.MAX:t>e&&(t=e)}return t},r.vAddInt=function(t,a){this.vAdd(t,a,!0)},r.vSubInt=function(t,a){this.vSub(t,a,!0)},r.vMulInt=function(t,a){this.vMul(t,a,!0)},r.vDivInt=function(t,a){this.vDiv(t,a,!0)},r.vAdd=function(t,a,e){void 0===e&&(e=!1);var i=parseFloat(a),n=this.VM.getValue(this.watchPath,0)+i;e&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},r.vSub=function(t,a,e){void 0===e&&(e=!1);var i=parseFloat(a),n=this.VM.getValue(this.watchPath,0)-i;e&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},r.vMul=function(t,a,e){void 0===e&&(e=!1);var i=parseFloat(a),n=this.VM.getValue(this.watchPath,0)*i;e&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},r.vDiv=function(t,a,e){void 0===e&&(e=!1);var i=parseFloat(a),n=this.VM.getValue(this.watchPath,0)/i;e&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},r.vString=function(t,a){var e=a;this.VM.setValue(this.watchPath,e)},r.vNumberInt=function(t,a){this.vNumber(t,a,!0)},r.vNumber=function(t,a,e){void 0===e&&(e=!1);var i=parseFloat(a);e&&(i=Math.round(i)),this.VM.setValue(this.watchPath,this.clampValue(i))},a}(o)).prototype,"watchPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=a(m.prototype,"valueClamp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=a(m.prototype,"valueClampMode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.MIN_MAX}}),g=a(m.prototype,"valueMin",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=a(m.prototype,"valueMax",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=m))||d)||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/VMParent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts","./ViewModel.ts"],(function(t){var n,e,o,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){i=t.GameComponent},function(t){a=t.VM}],execute:function(){var r;e._RF.push({},"15ccciO+ZRH476sPKD/LvB7","VMParent",void 0);var s=o.ccclass,c=o.help,h=o.executionOrder;t("default",s(r=h(-1)(r=c("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037729&doc_id=2873565")(r=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).tag="_temp",n.data={},n.VM=a,n}n(e,t);var o=e.prototype;return o.onLoad=function(){if(null!=this.data){this.tag="_temp<"+this.node.uuid.replace(".","")+">",a.add(this.data,this.tag);for(var t=this.getVMComponents(),n=0;n<t.length;n++){var e=t[n];this.replaceVMPath(e,this.tag)}this.onBind()}},o.onBind=function(){},o.onUnBind=function(){},o.replaceVMPath=function(t,n){var e=t.watchPath;if(1==t.templateMode){var o=t.watchPathArr;if(o)for(var i=0;i<o.length;i++){var a=o[i];o[i]=a.replace("*",n)}}else"*"===e.split(".")[0]&&(t.watchPath=e.replace("*",n))},o.getVMComponents=function(){var t=this,n=this.node.getComponentsInChildren("VMBase"),e=this.node.getComponentsInChildren("VMParent").filter((function(n){return n.uuid!==t.uuid})),o=[];return e.forEach((function(t){o=o.concat(t.getComponentsInChildren("VMBase"))})),n=n.filter((function(t){return o.indexOf(t)<0}))},o.onDestroy=function(){this.onUnBind(),a.remove(this.tag),this.data=null,t.prototype.onDestroy.call(this)},e}(i))||r)||r)||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMCustom.ts","./VMEnv.ts"],(function(t){var e,r,a,i,n,o,s,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.CCString},function(t){l=t.StringFormatFunction},function(t){u=t.VMCustom},function(t){h=t.VMEnv}],execute:function(){var c,p,m,f,V,g,d,v,w,P;n._RF.push({},"2a50eqI7JZNV5Sh0y/Qd9C6","VMProgress",void 0);var y=o.ccclass,A=o.property,M=o.menu,b=o.help;t("default",(c=M("OopsFramework/Mvvm/VM-Progress （进度条）"),p=b("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037843&doc_id=2873565"),m=A({visible:!1,override:!0}),f=A({type:[s],tooltip:"第一个值是min 值，第二个值 是 max 值，会计算出两者的比例"}),V=A({visible:function(){return"string"===this.componentProperty},tooltip:"字符串格式化，和 VMLabel 的字段一样，需要填入对应的格式化字符串"}),y(g=c(g=p((v=e((d=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"watchPath",v,i(e)),a(e,"watchPathArr",w,i(e)),e.templateMode=!0,a(e,"stringFormat",P,i(e)),e}r(e,t);var n=e.prototype;return n.onLoad=function(){(this.watchPathArr.length<2||"[min]"==this.watchPathArr[0]||"[max]"==this.watchPathArr[1])&&console.error("VMProgress must have two values!"),t.prototype.onLoad.call(this)},n.start=function(){h.editor||this.onValueInit()},n.onValueInit=function(){for(var t=this.watchPathArr.length,e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e]);var r=this.templateValueArr[0]/this.templateValueArr[1];this.setComponentValue(r)},n.setComponentValue=function(e){if(""!==this.stringFormat){var r=l.deal(e,this.stringFormat);t.prototype.setComponentValue.call(this,r)}else t.prototype.setComponentValue.call(this,e)},n.onValueController=function(t,e){var r=Math.round(t*this.templateValueArr[1]);Number.isNaN(r)&&(r=0),this.VM.setValue(this.watchPathArr[0],r)},n.onValueChanged=function(t,e,r){if(!1!==this.templateMode){var a=r.join("."),i=this.watchPathArr.findIndex((function(t){return t===a}));i>=0&&(this.templateValueArr[i]=t);var n=this.templateValueArr[0]/this.templateValueArr[1];n>1&&(n=1),(n<0||Number.isNaN(n))&&(n=0),this.setComponentValue(n)}},e}(u)).prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(d.prototype,"watchPathArr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["[min]","[max]"]}}),P=e(d.prototype,"stringFormat",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=d))||g)||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./ViewModel.ts"],(function(e){var t,i,n,o,a,r,l,u,c,s,p,h,f,N,C,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Enum,u=e.CCInteger,c=e.Node,s=e.Button,p=e.Sprite,h=e.UIRenderer,f=e.color,N=e.UIOpacity},function(e){C=e.VMBase},function(e){d=e.VM}],execute:function(){var b,v,O,m,E,y,A,T,_,g,w,D,M,V,I,S,P,k,L,R,z,B,U,Y,F,X,G,j,x,H,q;a._RF.push({},"47052uw/Y5O1LXaLObj4ARx","VMState",void 0);var J=r.ccclass,K=r.property,Q=r.menu,W=r.help,Z=function(e){return e[e["=="]=0]="==",e[e["!="]=1]="!=",e[e[">"]=2]=">",e[e[">="]=3]=">=",e[e["<"]=4]="<",e[e["<="]=5]="<=",e[e.range=6]="range",e}(Z||{}),$=function(e){return e[e.NODE_ACTIVE=0]="NODE_ACTIVE",e[e.NODE_VISIBLE=1]="NODE_VISIBLE",e[e.NODE_OPACITY=2]="NODE_OPACITY",e[e.NODE_COLOR=3]="NODE_COLOR",e[e.COMPONENT_CUSTOM=4]="COMPONENT_CUSTOM",e[e.SPRITE_GRAYSCALE=5]="SPRITE_GRAYSCALE",e[e.BUTTON_INTERACTABLE=6]="BUTTON_INTERACTABLE",e}($||{}),ee=function(e){return e[e.NODE_INDEX=0]="NODE_INDEX",e[e.NODE_NAME=1]="NODE_NAME",e}(ee||{});e("default",(b=Q("OopsFramework/Mvvm/VM-State （状态控制）"),v=W("https://gitee.com/dgflash/oops-framework/wikis/pages?sort_id=12037846&doc_id=2873565"),O=K({tooltip:"遍历子节点,根据子节点的名字或名字转换为值，判断值满足条件 来激活"}),m=K({type:l(Z)}),E=K({type:l(ee),tooltip:"遍历子节点,根据子节点的名字转换为值，判断值满足条件 来激活",visible:function(){return!0===this.foreachChildMode}}),y=K({displayName:"Value: a",visible:function(){return!1===this.foreachChildMode}}),A=K({displayName:"Value: b",visible:function(){return!1===this.foreachChildMode&&this.condition===Z.range}}),T=K({type:l($),tooltip:"一旦满足条件就对节点执行操作"}),_=K({visible:function(){return this.valueAction===$.NODE_OPACITY},range:[0,255],type:u,displayName:"Action Opacity"}),g=K({visible:function(){return this.valueAction===$.NODE_COLOR},displayName:"Action Color"}),w=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Component Name"}),D=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Component Property"}),M=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Default Value"}),V=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Action Value"}),I=K({type:[c],tooltip:"需要执行条件的节点，如果不填写则默认会执行本节点以及本节点的所有子节点 的状态"}),J(S=b(S=v((k=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"watchPath",k,o(t)),n(t,"foreachChildMode",L,o(t)),n(t,"condition",R,o(t)),n(t,"foreachChildType",z,o(t)),n(t,"valueA",B,o(t)),n(t,"valueB",U,o(t)),n(t,"valueAction",Y,o(t)),n(t,"valueActionOpacity",F,o(t)),n(t,"valueActionColor",X,o(t)),n(t,"valueComponentName",G,o(t)),n(t,"valueComponentProperty",j,o(t)),n(t,"valueComponentDefaultValue",x,o(t)),n(t,"valueComponentActionValue",H,o(t)),n(t,"watchNodes",q,o(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),0==this.watchNodes.length&&(this.valueAction!==$.NODE_ACTIVE&&!1===this.foreachChildMode&&this.watchNodes.push(this.node),this.watchNodes=this.watchNodes.concat(this.node.children))},a.start=function(){this.enabled&&this.onValueInit()},a.onValueInit=function(){var e=d.getValue(this.watchPath);this.checkNodeFromValue(e)},a.onValueChanged=function(e,t,i){this.checkNodeFromValue(e)},a.checkNodeFromValue=function(e){var t=this;if(this.foreachChildMode)this.watchNodes.forEach((function(i,n){var o=t.foreachChildType===ee.NODE_INDEX?n:i.name,a=t.conditionCheck(e,o);t.setNodeState(i,a)}));else{var i=this.conditionCheck(e,this.valueA,this.valueB);this.setNodesStates(i)}},a.setNodesStates=function(e){var t=this,i=this.watchNodes,n=e;i.forEach((function(e){t.setNodeState(e,n)}))},a.setNodeState=function(e,t){var i=t;switch(this.valueAction){case $.NODE_ACTIVE:e.active=!!i;break;case $.NODE_VISIBLE:var n=e.getComponent(N);null==n&&(n=e.addComponent(N)),n&&(n.opacity=i?255:0);break;case $.NODE_OPACITY:var o=e.getComponent(N);null==o&&(o=e.addComponent(N)),o&&(o.opacity=i?this.valueActionOpacity:255);break;case $.NODE_COLOR:var a=e.getComponent(h);a&&(a.color=i?this.valueActionColor:f(255,255,255));break;case $.COMPONENT_CUSTOM:var r=e.getComponent(this.valueComponentName);if(null==r)return;this.valueComponentProperty in r&&(r[this.valueComponentProperty]=i?this.valueComponentActionValue:this.valueComponentDefaultValue);break;case $.SPRITE_GRAYSCALE:var l=e.getComponent(p);l&&(l.grayscale=i);break;case $.BUTTON_INTERACTABLE:var u=e.getComponent(s);u&&(u.interactable=i)}},a.conditionCheck=function(e,t,i){var n=Z;switch(this.condition){case n["=="]:if(e==t)return!0;break;case n["!="]:if(e!=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n[">"]:if(e>t)return!0;break;case n[">="]:if(e>=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n["<="]:if(e<=t)return!0;break;case n.range:if(e>=t&&e<=i)return!0}return!1},t}(C)).prototype,"watchPath",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=t(P.prototype,"foreachChildMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=t(P.prototype,"condition",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z["=="]}}),z=t(P.prototype,"foreachChildType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ee.NODE_INDEX}}),B=t(P.prototype,"valueA",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=t(P.prototype,"valueB",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=t(P.prototype,"valueAction",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.NODE_ACTIVE}}),F=t(P.prototype,"valueActionOpacity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=t(P.prototype,"valueActionColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f(155,155,155)}}),G=t(P.prototype,"valueComponentName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=t(P.prototype,"valueComponentProperty",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=t(P.prototype,"valueComponentDefaultValue",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=t(P.prototype,"valueComponentActionValue",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=t(P.prototype,"watchNodes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=P))||S)||S)||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/VolumeViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts"],(function(e){var t,i,o,r,s,n,l,u,p,c,a,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,n=e._decorator,l=e.Slider,u=e.Sprite,p=e.Node},function(e){c=e.oops},function(e){a=e.ecs},function(e){m=e.CCVMParentComp}],execute:function(){var d,h,g,f,v,_,y,C;s._RF.push({},"2c970+7gIVB0avvbd4W8oWE","VolumeViewComp",void 0);var F=n.ccclass,V=n.property;e("VolumeViewComp",(d=F("VolumeViewComp"),h=a.register("VolumeView",!1),g=V(l),f=V(u),d(v=h((y=t((_=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,o(t,"slider",y,r(t)),o(t,"icon",C,r(t)),t}i(t,e);var s=t.prototype;return s.start=function(){this.slider.progress=.5,this.icon.node.on(p.EventType.TOUCH_START,this.toggle_mute,this)},s.slide=function(e){this.update_volume(e.progress),c.audio.volumeMusic=e.progress},s.toggle_mute=function(){"0.0"===this.slider.progress.toFixed(1)?(this.slider.progress=.5,c.audio.volumeMusic=.5):(this.slider.progress=0,c.audio.volumeMusic=0),this.update_volume(this.slider.progress)},s.update_volume=function(e){"0.0"===e.toFixed(1)&&(this.icon.spriteFrame=this.icon.spriteAtlas.getSpriteFrame("volume_mute")),e>0&&e<=.5&&(this.icon.spriteFrame=this.icon.spriteAtlas.getSpriteFrame("volume_1")),e>.5&&e<1&&(this.icon.spriteFrame=this.icon.spriteAtlas.getSpriteFrame("volume_2")),"1.0"===e.toFixed(1)&&(this.icon.spriteFrame=this.icon.spriteAtlas.getSpriteFrame("volume_3"))},s.reset=function(){this.node.destroy()},s.onDestroy=function(){this.icon.node.off(p.EventType.TOUCH_START,this.toggle_mute,this)},t}(m)).prototype,"slider",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(_.prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=_))||v)||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./Logger.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Logger}],execute:function(){e._RF.push({},"70df2VbIU9B66Fr+op8FKJp","WebSock",void 0);t("WebSock",function(){function t(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}var e=t.prototype;return e.connect=function(t){var e=this;if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return n.logNet("websocket connecting, wait for a moment..."),!1;var s=null;if(t.url)s=t.url;else{var o=t.ip,r=t.port;s=t.protocol+"://"+o+":"+r}return this._ws=new WebSocket(s),this._ws.binaryType=t.binaryType?t.binaryType:"arraybuffer",this._ws.onmessage=function(t){(0,e.onMessage)(t.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0},e.send=function(t){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(t),1):-1},e.close=function(t,e){this._ws&&this._ws.close(t,e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WebWorker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./player.ts","./ECS.ts","./Logger.ts"],(function(e){var r,t,o,n,s,i,a,c,u;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,n=e.game,s=e.Game},function(e){i=e.oops},function(e){a=e.default},function(e){c=e.ecs},function(e){u=e.Logger}],execute:function(){var h;t._RF.push({},"107f7FfxG9LGpzT2ltKOy91","WebWorker",void 0);o.ccclass,o.property;var p=e("WorkerEvent",function(e){return e.UPDATE="update",e.START="start",e.STOP="stop",e}({}));e("WebWorker",c.register("NetworkManager")(h=function(e){function t(){for(var r,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return(r=e.call.apply(e,[this].concat(o))||this).worker=null,r}r(t,e);var o=t.prototype;return o.init=function(){var e=this;u.logNet("WebWorker init"),n.on(s.EVENT_HIDE,this.onGameBackground,this),n.on(s.EVENT_SHOW,this.onGameForeground,this);try{var r=a.toString(),t=new Blob(["("+r+")()"]);this.worker=new Worker(URL.createObjectURL(t)),this.worker.onmessage=function(r){"update"===r.data.type&&e.handleWorkerUpdate(r.data.deltaTime)},this.worker.onerror=function(e){console.error(e)}}catch(e){console.error("Failed to create worker:",e)}},o.onGameBackground=function(){this.worker&&this.worker.postMessage("start")},o.onGameForeground=function(){this.worker&&this.worker.postMessage("stop")},o.postMessage=function(e){this.worker&&this.worker.postMessage(e)},o.stop=function(){this.worker&&this.worker.postMessage("stop")},o.handleWorkerUpdate=function(e){i.message.dispatchEvent(p.UPDATE,e)},o.destroy=function(){this.worker&&(this.worker.terminate(),this.worker=null),n.off(s.EVENT_HIDE,this.onGameBackground,this),n.off(s.EVENT_SHOW,this.onGameForeground,this)},t}(c.Entity))||h);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});